(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Iab2:function(t,e,n){var i,s;void 0===(s="function"==typeof(i=function(){"use strict";function e(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){o(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype?function(t,o,c){var r=s.URL||s.webkitURL,a=document.createElement("a");a.download=o=o||t.name||"download",a.rel="noopener","string"==typeof t?(a.href=t,a.origin===location.origin?i(a):n(a.href)?e(t,o,c):i(a,a.target="_blank")):(a.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(a.href)}),4e4),setTimeout((function(){i(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,s,o){if(s=s||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),s);else if(n(t))e(t,s,o);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout((function(){i(c)}))}}:function(t,n,i,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,i);var c="application/octet-stream"===t.type,r=/constructor/i.test(s.HTMLElement)||s.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||c&&r)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=a?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},l.readAsDataURL(t)}else{var d=s.URL||s.webkitURL,h=d.createObjectURL(t);o?o.location=h:location.href=h,o=null,setTimeout((function(){d.revokeObjectURL(h)}),4e4)}});s.saveAs=o.saveAs=o,t.exports=o})?i.apply(e,[]):i)||(t.exports=s)},meJe:function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),s=n("dEAy"),o=n("mrSG"),c=n("LSvS"),r=n("fXoL"),a=n("3Pt+"),l=n("xgIS"),d=n("VRyK"),h=n("quSY"),u=n("pLZG"),b=n("vkgz"),p=n("lJxs");function g(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>Object(p.a)(function(t,e){return n=>{let i=n;for(let s=0;s<e;s++){const e=i[t[s]];if(void 0===e)return;i=e}return i}}(t,e))(n)}var f=n("/uUt"),m=n("1G5W"),z=n("bMUq"),v=n("OCB9"),y=n("XNiG");const k=["overlay"],O=["nzTemplate"];function C(t,e){if(1&t&&(r.Wb(0),r.Kc(1),r.Vb()),2&t){const t=r.kc(2);r.Eb(1),r.Lc(t.title)}}function w(t,e){if(1&t&&(r.Yb(0,"div",2),r.Yb(1,"div",3),r.Tb(2,"div",4),r.Yb(3,"div",5),r.Ic(4,C,2,1,"ng-container",6),r.Xb(),r.Xb(),r.Xb()),2&t){const t=r.kc();r.sc("ngClass",t._classMap)("ngStyle",t.nzOverlayStyle)("@.disabled",null==t.noAnimation?null:t.noAnimation.nzNoAnimation)("nzNoAnimation",null==t.noAnimation?null:t.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),r.Eb(4),r.sc("nzStringTemplateOutlet",t.title)}}const T=["*"];let M=(()=>{class t{constructor(t,e){this.cdr=t,this.noAnimation=e,this.nzVisibleChange=new r.n,this._classMap={},this._hasBackdrop=!1,this._prefix="ant-tooltip-placement",this._visible=!1,this._positions=[...z.c],this._placement="top",this._trigger="hover"}get content(){return void 0!==this.nzContent?this.nzContent:this.nzContentTemplate}get title(){return void 0!==this.nzTitle?this.nzTitle:this.nzTitleTemplate}show(){this.nzVisible||this.isTitleEmpty()&&this.isContentEmpty()||(this.nzVisible=!0,this.nzVisibleChange.emit(!0),this.cdr.detectChanges())}hide(){this.nzVisible&&(this.nzVisible=!1,this.nzVisibleChange.emit(!1),this.cdr.detectChanges())}updateByDirective(){this.setClassMap(),this.cdr.detectChanges(),Promise.resolve().then(()=>{this.updatePosition()})}updatePosition(){this.origin&&this.overlay&&this.overlay.overlayRef&&this.overlay.overlayRef.updatePosition()}onPositionChange(t){this._placement=Object(z.G)(t),this.setClassMap(),this.cdr.detectChanges()}setClassMap(){this._classMap={[this.nzOverlayClassName]:!0,[`${this._prefix}-${this._placement}`]:!0}}setOverlayOrigin(t){this.origin=t,this.cdr.markForCheck()}isTitleEmpty(){return!(this.title instanceof r.M||""!==this.title&&Object(z.K)(this.title))}isContentEmpty(){return!(this.content instanceof r.M||""!==this.content&&Object(z.K)(this.content))}}return t.\u0275fac=function(t){r.fc()},t.\u0275dir=r.Nb({type:t,outputs:{nzVisibleChange:"nzVisibleChange"}}),t})(),S=(()=>{class t extends M{constructor(t,e){super(t,e),this.noAnimation=e,this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzMouseEnterDelay=.15,this.nzMouseLeaveDelay=.1,this.nzVisibleChange=new r.n}set nzPlacement(t){t!==this._placement&&(this._placement=t,this._positions=[z.w[this.nzPlacement],...this._positions])}get nzPlacement(){return this._placement}set nzVisible(t){const e=Object(z.R)(t);this._visible!==e&&(this._visible=e,this.nzVisibleChange.emit(e))}get nzVisible(){return this._visible}set nzTrigger(t){this._trigger=t,this._hasBackdrop="click"===this._trigger}get nzTrigger(){return this._trigger}ngOnChanges(){Promise.resolve().then(()=>{this.updatePosition()})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.h),r.Sb(z.m,9))},t.\u0275dir=r.Nb({type:t,viewQuery:function(t,e){var n;1&t&&r.Nc(k,!0),2&t&&r.zc(n=r.hc())&&(e.overlay=n.first)},inputs:{nzOverlayClassName:"nzOverlayClassName",nzOverlayStyle:"nzOverlayStyle",nzMouseEnterDelay:"nzMouseEnterDelay",nzMouseLeaveDelay:"nzMouseLeaveDelay",nzPlacement:"nzPlacement",nzVisible:"nzVisible",nzTrigger:"nzTrigger"},outputs:{nzVisibleChange:"nzVisibleChange"},features:[r.Bb,r.Cb()]}),t})(),P=(()=>{class t extends S{constructor(t,e){super(t),this.noAnimation=e}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.h),r.Sb(z.m,9))},t.\u0275cmp=r.Mb({type:t,selectors:[["nz-tooltip"]],contentQueries:function(t,e,n){var i;1&t&&r.Fc(n,O,!0),2&t&&r.zc(i=r.hc())&&(e.nzTitleTemplate=i.first)},inputs:{nzTitle:"nzTitle"},exportAs:["nzTooltipComponent"],features:[r.Db([{provide:S,useExisting:t}]),r.Bb],ngContentSelectors:T,decls:3,vars:4,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayPositions","backdropClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],[1,"ant-tooltip",3,"ngClass","ngStyle","nzNoAnimation"],[1,"ant-tooltip-content"],[1,"ant-tooltip-arrow"],[1,"ant-tooltip-inner"],[4,"nzStringTemplateOutlet"]],template:function(t,e){1&t&&(r.rc(),r.qc(0),r.Ic(1,w,5,6,"ng-template",0,1,r.Jc),r.gc("backdropClick",(function(t){return e.hide()}))("detach",(function(t){return e.hide()}))("positionChange",(function(t){return e.onPositionChange(t)}))),2&t&&(r.Eb(1),r.sc("cdkConnectedOverlayOrigin",e.origin)("cdkConnectedOverlayOpen",e._visible)("cdkConnectedOverlayHasBackdrop",e._hasBackdrop)("cdkConnectedOverlayPositions",e._positions))},directives:[v.a,z.j,i.i,i.l,z.m,z.r],styles:["\n      .ant-tooltip {\n        position: relative;\n      }\n    "],encapsulation:2,data:{animation:[z.V]},changeDetection:0}),t})(),x=(()=>{class t{constructor(t,e,n,i,s,o){this.elementRef=t,this.hostView=e,this.resolver=n,this.renderer=i,this._tooltip=s,this.noAnimation=o,this.nzTrigger="hover",this.nzPlacement="top",this.needProxyProperties=["nzOverlayClassName","nzOverlayStyle","nzMouseEnterDelay","nzMouseLeaveDelay","nzVisible","noAnimation"],this.nzVisibleChange=new r.n,this.isTooltipComponentVisible=!1,this.isDynamicTooltip=!1,this.triggerUnlisteners=[],this.$destroy=new y.a}get title(){return this.specificTitle||this.directiveNameTitle||this.nzTitle}get content(){return this.specificContent||this.directiveNameContent||this.nzContent}get placement(){return this.specificPlacement||this.nzPlacement}get trigger(){return this.specificTrigger||this.nzTrigger}ngOnChanges(t){const{nzTrigger:e,specificTrigger:n}=t,i=n||e;i&&!i.isFirstChange()&&this.registerTriggers(),this.tooltip&&this.isDynamicTooltip&&this.updateChangedProperties(t)}ngOnInit(){this._tooltip?(Object(z.U)("'<nz-tooltip></nz-tooltip>', '<nz-popover></nz-popover>' and '<nz-popconfirm></nz-popconfirm>' is deprecated and will be removed in 9.0.0. Refer: https://ng.ant.design/components/tooltip/zh ."),this.tooltip=this._tooltip,this.tooltip.setOverlayOrigin(this)):this.createDynamicTooltipComponent(),this.tooltip.nzVisibleChange.pipe(Object(f.a)(),Object(m.a)(this.$destroy)).subscribe(t=>{this.isTooltipComponentVisible=t,this.nzVisibleChange.emit(t)})}ngAfterViewInit(){this.registerTriggers()}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete(),this.clearTogglingTimer(),this.removeTriggerListeners(),this.tooltipRef&&this.tooltipRef.destroy()}show(){this.tooltip.show()}hide(){this.tooltip.hide()}updatePosition(){this.tooltip&&this.isDynamicTooltip&&this.tooltip.updatePosition()}createDynamicTooltipComponent(){this.isDynamicTooltip=!0,this.tooltipRef=this.hostView.createComponent(this.componentFactory),this.tooltip=this.tooltipRef.instance,this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.tooltipRef.location.nativeElement),this.tooltip.setOverlayOrigin(this),this.updateChangedProperties(this.needProxyProperties)}registerTriggers(){const t=this.elementRef.nativeElement,e=this.isDynamicTooltip?this.trigger:this.tooltip.nzTrigger;if(this.removeTriggerListeners(),"hover"===e){let e;this.triggerUnlisteners.push(this.renderer.listen(t,"mouseenter",()=>{this.delayEnterLeave(!0,!0,this.tooltip.nzMouseEnterDelay)})),this.triggerUnlisteners.push(this.renderer.listen(t,"mouseleave",()=>{this.delayEnterLeave(!0,!1,this.tooltip.nzMouseLeaveDelay),this.tooltip.overlay.overlayRef&&!e&&(e=this.tooltip.overlay.overlayRef.overlayElement,this.triggerUnlisteners.push(this.renderer.listen(e,"mouseenter",()=>{this.delayEnterLeave(!1,!0)})),this.triggerUnlisteners.push(this.renderer.listen(e,"mouseleave",()=>{this.delayEnterLeave(!1,!1)})))}))}else"focus"===e?(this.triggerUnlisteners.push(this.renderer.listen(t,"focus",()=>this.show())),this.triggerUnlisteners.push(this.renderer.listen(t,"blur",()=>this.hide()))):"click"===e&&this.triggerUnlisteners.push(this.renderer.listen(t,"click",t=>{t.preventDefault(),this.show()}))}updateChangedProperties(t){const e=Array.isArray(t);if((e?t:Object.keys(t)).forEach(t=>{-1!==this.needProxyProperties.indexOf(t)&&this.updateComponentValue(t,this[t])}),e)this.updateComponentValue("nzTitle",this.title),this.updateComponentValue("nzContent",this.content),this.updateComponentValue("nzPlacement",this.placement),this.updateComponentValue("nzTrigger",this.trigger);else{const e=t;(e.specificTitle||e.directiveNameTitle||e.nzTitle)&&this.updateComponentValue("nzTitle",this.title),(e.specificContent||e.directiveNameContent||e.nzContent)&&this.updateComponentValue("nzContent",this.content),(e.specificTrigger||e.nzTrigger)&&this.updateComponentValue("nzTrigger",this.trigger),(e.specificPlacement||e.nzPlacement)&&this.updateComponentValue("nzPlacement",this.placement)}this.tooltip.updateByDirective()}updateComponentValue(t,e){void 0!==e&&(this.tooltip[t]=e)}delayEnterLeave(t,e,n=-1){this.delayTimer?this.clearTogglingTimer():n>0?this.delayTimer=setTimeout(()=>{this.delayTimer=void 0,e?this.show():this.hide()},1e3*n):e&&t?this.show():this.hide()}removeTriggerListeners(){this.triggerUnlisteners.forEach(t=>t()),this.triggerUnlisteners.length=0}clearTogglingTimer(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0)}}return t.\u0275fac=function(t){r.fc()},t.\u0275dir=r.Nb({type:t,inputs:{nzTrigger:"nzTrigger",nzPlacement:"nzPlacement",nzTitle:"nzTitle",nzContent:"nzContent",nzMouseEnterDelay:"nzMouseEnterDelay",nzMouseLeaveDelay:"nzMouseLeaveDelay",nzOverlayClassName:"nzOverlayClassName",nzOverlayStyle:"nzOverlayStyle",nzVisible:"nzVisible"},outputs:{nzVisibleChange:"nzVisibleChange"},features:[r.Cb()]}),t})(),X=(()=>{class t extends x{constructor(t,e,n,i,s,o){super(t,e,n,i,s,o),this.componentFactory=this.resolver.resolveComponentFactory(P)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.l),r.Sb(r.Q),r.Sb(r.j),r.Sb(r.E),r.Sb(S,8),r.Sb(z.m,9))},t.\u0275dir=r.Nb({type:t,selectors:[["","nz-tooltip",""]],hostVars:2,hostBindings:function(t,e){2&t&&r.Jb("ant-tooltip-open",e.isTooltipComponentVisible)},inputs:{specificTitle:["nzTooltipTitle","specificTitle"],directiveNameTitle:["nz-tooltip","directiveNameTitle"],specificTrigger:["nzTooltipTrigger","specificTrigger"],specificPlacement:["nzTooltipPlacement","specificPlacement"]},exportAs:["nzTooltip"],features:[r.Bb]}),t})(),Y=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)},imports:[[i.c,v.g,z.g,z.o,z.n]]}),t})();const I=["slider"];function E(t,e){if(1&t&&r.Tb(0,"nz-slider-step",7),2&t){const t=r.kc();r.sc("nzVertical",t.nzVertical)("nzLowerBound",t.bounds.lower)("nzUpperBound",t.bounds.upper)("nzMarksArray",t.marksArray)("nzIncluded",t.nzIncluded)}}function j(t,e){if(1&t&&r.Tb(0,"nz-slider-handle",8),2&t){const t=e.$implicit,n=r.kc();r.sc("nzVertical",n.nzVertical)("nzOffset",t.offset)("nzValue",t.value)("nzActive",t.active)("nzTipFormatter",n.nzTipFormatter)("nzTooltipVisible",n.nzTooltipVisible)("nzTooltipPlacement",n.nzTooltipPlacement)}}function V(t,e){if(1&t&&r.Tb(0,"nz-slider-marks",9),2&t){const t=r.kc();r.sc("nzVertical",t.nzVertical)("nzMin",t.nzMin)("nzMax",t.nzMax)("nzLowerBound",t.bounds.lower)("nzUpperBound",t.bounds.upper)("nzMarksArray",t.marksArray)("nzIncluded",t.nzIncluded)}}function _(t,e){if(1&t&&r.Tb(0,"div",2),2&t){const t=r.kc();r.sc("ngStyle",t.style)("nzTitle",t.tooltipTitle)("nzTrigger",null)("nzPlacement",t.nzTooltipPlacement)}}function D(t,e){if(1&t&&r.Tb(0,"div",3),2&t){const t=r.kc();r.sc("ngStyle",t.style)}}function F(t,e){if(1&t&&r.Tb(0,"span",2),2&t){const t=e.$implicit;r.Jb("ant-slider-mark-active",t.active),r.sc("ngStyle",t.style)("innerHTML",t.label,r.Cc)}}function L(t,e){if(1&t&&r.Tb(0,"span",2),2&t){const t=e.$implicit;r.Jb("ant-slider-dot-active",t.active),r.sc("ngStyle",t.style)}}function A(t){return t instanceof Array&&2===t.length}function B(t){return t instanceof Object}let $=(()=>{class t{constructor(t,e){this.cdr=t,this.platform=e,this.nzDisabled=!1,this.nzDots=!1,this.nzIncluded=!0,this.nzRange=!1,this.nzVertical=!1,this.nzDefaultValue=null,this.nzMarks=null,this.nzMax=100,this.nzMin=0,this.nzStep=1,this.nzTooltipVisible="default",this.nzTooltipPlacement="top",this.nzOnAfterChange=new r.n,this.value=null,this.cacheSliderStart=null,this.cacheSliderLength=null,this.activeValueIndex=void 0,this.track={offset:null,length:null},this.bounds={lower:null,upper:null},this.isDragging=!1}ngOnInit(){this.handles=this.generateHandles(this.nzRange?2:1),this.sliderDOM=this.slider.nativeElement,this.marksArray=this.nzMarks?this.generateMarkItems(this.nzMarks):null,this.platform.isBrowser&&this.createDraggingObservables(),this.toggleDragDisabled(this.nzDisabled),null===this.getValue()&&this.setValue(this.formatValue(null))}ngOnChanges(t){const{nzDisabled:e,nzMarks:n,nzRange:i}=t;e&&!e.firstChange?this.toggleDragDisabled(e.currentValue):n&&!n.firstChange?this.marksArray=this.nzMarks?this.generateMarkItems(this.nzMarks):null:i&&!i.firstChange&&this.setValue(this.formatValue(null))}ngOnDestroy(){this.unsubscribeDrag()}writeValue(t){this.setValue(t,!0)}onValueChange(t){}onTouched(){}registerOnChange(t){this.onValueChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.nzDisabled=t,this.toggleDragDisabled(t)}setValue(t,e=!1){e?(this.value=this.formatValue(t),this.updateTrackAndHandles()):this.valuesEqual(this.value,t)||(this.value=t,this.updateTrackAndHandles(),this.onValueChange(this.getValue(!0)))}getValue(t=!1){return t&&this.value&&A(this.value)?Object(z.N)(this.value).sort((t,e)=>t-e):this.value}getValueToOffset(t){let e=t;return void 0===e&&(e=this.getValue(!0)),A(e)?e.map(t=>this.valueToOffset(t)):this.valueToOffset(e)}setActiveValueIndex(t){const e=this.getValue();if(A(e)){let n,i=null,s=-1;e.forEach((e,o)=>{n=Math.abs(t-e),(null===i||n<i)&&(i=n,s=o)}),this.activeValueIndex=s}}setActiveValue(t){if(A(this.value)){const e=Object(z.N)(this.value);e[this.activeValueIndex]=t,this.setValue(e)}else this.setValue(t)}updateTrackAndHandles(){const t=this.getValue(),e=this.getValueToOffset(t),n=this.getValue(!0),i=this.getValueToOffset(n),s=A(n)?n:[0,n],o=A(i)?[i[0],i[1]-i[0]]:[0,i];this.handles.forEach((n,i)=>{n.offset=A(e)?e[i]:e,n.value=A(t)?t[i]:t||0}),[this.bounds.lower,this.bounds.upper]=s,[this.track.offset,this.track.length]=o,this.cdr.markForCheck()}onDragStart(t){this.toggleDragMoving(!0),this.cacheSliderProperty(),this.setActiveValueIndex(t),this.setActiveValue(t),this.showHandleTooltip(this.nzRange?this.activeValueIndex:0)}onDragMove(t){this.setActiveValue(t),this.cdr.markForCheck()}onDragEnd(){this.nzOnAfterChange.emit(this.getValue(!0)),this.toggleDragMoving(!1),this.cacheSliderProperty(!0),this.hideAllHandleTooltip(),this.cdr.markForCheck()}createDraggingObservables(){const t=this.sliderDOM,e=this.nzVertical?"pageY":"pageX",n={start:"mousedown",move:"mousemove",end:"mouseup",pluckKey:[e]},i={start:"touchstart",move:"touchmove",end:"touchend",pluckKey:["touches","0",e],filter:t=>t instanceof TouchEvent};[n,i].forEach(e=>{const{start:n,move:i,end:s,pluckKey:o,filter:c=(()=>!0)}=e;e.startPlucked$=Object(l.a)(t,n).pipe(Object(u.a)(c),Object(b.a)(z.O),g(...o),Object(p.a)(t=>this.findClosestValue(t))),e.end$=Object(l.a)(document,s),e.moveResolved$=Object(l.a)(document,i).pipe(Object(u.a)(c),Object(b.a)(z.O),g(...o),Object(f.a)(),Object(p.a)(t=>this.findClosestValue(t)),Object(f.a)(),Object(m.a)(e.end$))}),this.dragStart$=Object(d.a)(n.startPlucked$,i.startPlucked$),this.dragMove$=Object(d.a)(n.moveResolved$,i.moveResolved$),this.dragEnd$=Object(d.a)(n.end$,i.end$)}subscribeDrag(t=["start","move","end"]){-1!==t.indexOf("start")&&this.dragStart$&&!this.dragStart_&&(this.dragStart_=this.dragStart$.subscribe(this.onDragStart.bind(this))),-1!==t.indexOf("move")&&this.dragMove$&&!this.dragMove_&&(this.dragMove_=this.dragMove$.subscribe(this.onDragMove.bind(this))),-1!==t.indexOf("end")&&this.dragEnd$&&!this.dragEnd_&&(this.dragEnd_=this.dragEnd$.subscribe(this.onDragEnd.bind(this)))}unsubscribeDrag(t=["start","move","end"]){-1!==t.indexOf("start")&&this.dragStart_&&(this.dragStart_.unsubscribe(),this.dragStart_=null),-1!==t.indexOf("move")&&this.dragMove_&&(this.dragMove_.unsubscribe(),this.dragMove_=null),-1!==t.indexOf("end")&&this.dragEnd_&&(this.dragEnd_.unsubscribe(),this.dragEnd_=null)}toggleDragMoving(t){const e=["move","end"];t?(this.isDragging=!0,this.subscribeDrag(e)):(this.isDragging=!1,this.unsubscribeDrag(e))}toggleDragDisabled(t){t?this.unsubscribeDrag():this.subscribeDrag(["start"])}findClosestValue(t){const e=this.getSliderStartPosition(),n=this.getSliderLength(),i=Object(z.B)((t-e)/n,0,1),s=(this.nzMax-this.nzMin)*(this.nzVertical?1-i:i)+this.nzMin,o=null===this.nzMarks?[]:Object.keys(this.nzMarks).map(parseFloat);if(null!==this.nzStep&&!this.nzDots){const t=Math.round(s/this.nzStep)*this.nzStep;o.push(t)}const c=o.map(t=>Math.abs(s-t)),r=o[c.indexOf(Math.min(...c))];return null===this.nzStep?r:parseFloat(r.toFixed(Object(z.H)(this.nzStep)))}valueToOffset(t){return Object(z.F)(this.nzMin,this.nzMax,t)}getSliderStartPosition(){if(null!==this.cacheSliderStart)return this.cacheSliderStart;const t=Object(z.E)(this.sliderDOM);return this.nzVertical?t.top:t.left}getSliderLength(){if(null!==this.cacheSliderLength)return this.cacheSliderLength;const t=this.sliderDOM;return this.nzVertical?t.clientHeight:t.clientWidth}cacheSliderProperty(t=!1){this.cacheSliderStart=t?null:this.getSliderStartPosition(),this.cacheSliderLength=t?null:this.getSliderLength()}formatValue(t){let e=t;return e=this.assertValueValid(t)?A(t)?t.map(t=>Object(z.B)(t,this.nzMin,this.nzMax)):Object(z.B)(t,this.nzMin,this.nzMax):null===this.nzDefaultValue?this.nzRange?[this.nzMin,this.nzMax]:this.nzMin:this.nzDefaultValue,e}assertValueValid(t){return!(!Array.isArray(t)&&isNaN("number"!=typeof t?parseFloat(t):t))&&this.assertValueTypeMatch(t)}assertValueTypeMatch(t){if(t){if(A(t)!==this.nzRange)throw new Error('The "nzRange" can\'t match the "ngModel"\'s type, please check these properties: "nzRange", "ngModel", "nzDefaultValue".');return!0}return!0}valuesEqual(t,e){return typeof t==typeof e&&(A(t)&&A(e)?Object(z.z)(t,e):t===e)}showHandleTooltip(t=0){this.handles.forEach((e,n)=>{e.active=n===t})}hideAllHandleTooltip(){this.handles.forEach(t=>t.active=!1)}generateHandles(t){return Array(t).fill(0).map(()=>({offset:null,value:null,active:!1}))}generateMarkItems(t){const e=[];for(const n in t){const i=t[n],s="number"==typeof n?n:parseFloat(n);s>=this.nzMin&&s<=this.nzMax&&e.push({value:s,offset:this.valueToOffset(s),config:i})}return e.length?e:null}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.h),r.Sb(c.a))},t.\u0275cmp=r.Mb({type:t,selectors:[["nz-slider"]],viewQuery:function(t,e){var n;1&t&&r.Gc(I,!0),2&t&&r.zc(n=r.hc())&&(e.slider=n.first)},inputs:{nzDisabled:"nzDisabled",nzDots:"nzDots",nzIncluded:"nzIncluded",nzRange:"nzRange",nzVertical:"nzVertical",nzDefaultValue:"nzDefaultValue",nzMarks:"nzMarks",nzMax:"nzMax",nzMin:"nzMin",nzStep:"nzStep",nzTooltipVisible:"nzTooltipVisible",nzTooltipPlacement:"nzTooltipPlacement",nzTipFormatter:"nzTipFormatter"},outputs:{nzOnAfterChange:"nzOnAfterChange"},exportAs:["nzSlider"],features:[r.Db([{provide:a.g,useExisting:Object(r.W)(()=>t),multi:!0}]),r.Cb()],decls:7,vars:13,consts:[[1,"ant-slider"],["slider",""],[1,"ant-slider-rail"],[3,"nzVertical","nzIncluded","nzOffset","nzLength"],[3,"nzVertical","nzLowerBound","nzUpperBound","nzMarksArray","nzIncluded",4,"ngIf"],[3,"nzVertical","nzOffset","nzValue","nzActive","nzTipFormatter","nzTooltipVisible","nzTooltipPlacement",4,"ngFor","ngForOf"],[3,"nzVertical","nzMin","nzMax","nzLowerBound","nzUpperBound","nzMarksArray","nzIncluded",4,"ngIf"],[3,"nzVertical","nzLowerBound","nzUpperBound","nzMarksArray","nzIncluded"],[3,"nzVertical","nzOffset","nzValue","nzActive","nzTipFormatter","nzTooltipVisible","nzTooltipPlacement"],[3,"nzVertical","nzMin","nzMax","nzLowerBound","nzUpperBound","nzMarksArray","nzIncluded"]],template:function(t,e){1&t&&(r.Yb(0,"div",0,1),r.Tb(2,"div",2),r.Tb(3,"nz-slider-track",3),r.Ic(4,E,1,5,"nz-slider-step",4),r.Ic(5,j,1,7,"nz-slider-handle",5),r.Ic(6,V,1,7,"nz-slider-marks",6),r.Xb()),2&t&&(r.Jb("ant-slider-disabled",e.nzDisabled)("ant-slider-vertical",e.nzVertical)("ant-slider-with-marks",e.marksArray),r.Eb(3),r.sc("nzVertical",e.nzVertical)("nzIncluded",e.nzIncluded)("nzOffset",e.track.offset)("nzLength",e.track.length),r.Eb(1),r.sc("ngIf",e.marksArray),r.Eb(1),r.sc("ngForOf",e.handles),r.Eb(1),r.sc("ngIf",e.marksArray))},directives:function(){return[N,i.k,i.j,q,R,K]},encapsulation:2,changeDetection:0}),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzDisabled",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Boolean)],t.prototype,"nzDots",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Boolean)],t.prototype,"nzIncluded",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Boolean)],t.prototype,"nzRange",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Boolean)],t.prototype,"nzVertical",void 0),t})(),R=(()=>{class t{constructor(t,e){this.sliderComponent=t,this.cdr=e,this.nzTooltipVisible="default",this.nzActive=!1,this.style={},this.hovers_=new h.a,this.enterHandle=()=>{this.sliderComponent.isDragging||(this.toggleTooltip(!0),this.updateTooltipPosition(),this.cdr.detectChanges())},this.leaveHandle=()=>{this.sliderComponent.isDragging||(this.toggleTooltip(!1),this.cdr.detectChanges())}}ngOnChanges(t){const{nzOffset:e,nzValue:n,nzActive:i,nzTooltipVisible:s}=t;e&&this.updateStyle(),n&&(this.updateTooltipTitle(),this.updateTooltipPosition()),i&&this.toggleTooltip(!!i.currentValue),s&&"always"===s.currentValue&&Promise.resolve().then(()=>this.toggleTooltip(!0,!0))}ngOnDestroy(){this.hovers_.unsubscribe()}toggleTooltip(t,e=!1){(e||"default"===this.nzTooltipVisible&&this.tooltip)&&(t?this.tooltip.show():this.tooltip.hide())}updateTooltipTitle(){this.tooltipTitle=this.nzTipFormatter?this.nzTipFormatter(this.nzValue):`${this.nzValue}`}updateTooltipPosition(){this.tooltip&&Promise.resolve().then(()=>this.tooltip.updatePosition())}updateStyle(){this.style[this.nzVertical?"bottom":"left"]=`${this.nzOffset}%`,this.cdr.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb($),r.Sb(r.h))},t.\u0275cmp=r.Mb({type:t,selectors:[["nz-slider-handle"]],viewQuery:function(t,e){var n;1&t&&r.Nc(X,!0),2&t&&r.zc(n=r.hc())&&(e.tooltip=n.first)},hostBindings:function(t,e){1&t&&r.gc("mouseenter",(function(t){return e.enterHandle()}))("mouseleave",(function(t){return e.leaveHandle()}))},inputs:{nzTooltipVisible:"nzTooltipVisible",nzActive:"nzActive",nzVertical:"nzVertical",nzOffset:"nzOffset",nzValue:"nzValue",nzTooltipPlacement:"nzTooltipPlacement",nzTipFormatter:"nzTipFormatter"},exportAs:["nzSliderHandle"],features:[r.Cb()],decls:2,vars:2,consts:[["nz-tooltip","","class","ant-slider-handle",3,"ngStyle","nzTitle","nzTrigger","nzPlacement",4,"ngIf"],["class","ant-slider-handle",3,"ngStyle",4,"ngIf"],["nz-tooltip","",1,"ant-slider-handle",3,"ngStyle","nzTitle","nzTrigger","nzPlacement"],[1,"ant-slider-handle",3,"ngStyle"]],template:function(t,e){1&t&&(r.Ic(0,_,1,4,"div",0),r.Ic(1,D,1,1,"div",1)),2&t&&(r.sc("ngIf",null!==e.nzTipFormatter&&"never"!==e.nzTooltipVisible),r.Eb(1),r.sc("ngIf",null===e.nzTipFormatter||"never"===e.nzTooltipVisible))},directives:[i.k,X,i.l],encapsulation:2,changeDetection:0}),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzActive",void 0),t})(),K=(()=>{class t{constructor(){this.nzLowerBound=null,this.nzUpperBound=null,this.nzVertical=!1,this.nzIncluded=!1}ngOnChanges(t){t.nzMarksArray&&this.buildMarks(),(t.nzMarksArray||t.nzLowerBound||t.nzUpperBound)&&this.togglePointActive()}trackById(t,e){return e.value}buildMarks(){const t=this.nzMax-this.nzMin;this.marks=this.nzMarksArray.map(e=>{const{value:n,offset:i,config:s}=e,o=this.getMarkStyles(n,t,s);return{label:B(s)?s.label:s,offset:i,style:o,value:n,config:s,active:!1}})}getMarkStyles(t,e,n){let i;return i=this.nzVertical?{marginBottom:"-50%",bottom:`${(t-this.nzMin)/e*100}%`}:{transform:"translate3d(-50%, 0, 0)",left:`${(t-this.nzMin)/e*100}%`},B(n)&&n.style&&(i=Object.assign({},i,n.style)),i}togglePointActive(){this.marks&&null!==this.nzLowerBound&&null!==this.nzUpperBound&&this.marks.forEach(t=>{const e=t.value;t.active=!this.nzIncluded&&e===this.nzUpperBound||this.nzIncluded&&e<=this.nzUpperBound&&e>=this.nzLowerBound})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Mb({type:t,selectors:[["nz-slider-marks"]],inputs:{nzLowerBound:"nzLowerBound",nzUpperBound:"nzUpperBound",nzVertical:"nzVertical",nzIncluded:"nzIncluded",nzMarksArray:"nzMarksArray",nzMin:"nzMin",nzMax:"nzMax"},exportAs:["nzSliderMarks"],features:[r.Cb()],decls:2,vars:2,consts:[[1,"ant-slider-mark"],["class","ant-slider-mark-text",3,"ant-slider-mark-active","ngStyle","innerHTML",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ant-slider-mark-text",3,"ngStyle","innerHTML"]],template:function(t,e){1&t&&(r.Yb(0,"div",0),r.Ic(1,F,1,4,"span",1),r.Xb()),2&t&&(r.Eb(1),r.sc("ngForOf",e.marks)("ngForTrackBy",e.trackById))},directives:[i.j,i.l],encapsulation:2,changeDetection:0}),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzVertical",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzIncluded",void 0),t})(),q=(()=>{class t{constructor(){this.nzLowerBound=null,this.nzUpperBound=null,this.nzVertical=!1,this.nzIncluded=!1}ngOnChanges(t){t.nzMarksArray&&this.buildSteps(),(t.nzMarksArray||t.nzLowerBound||t.nzUpperBound)&&this.togglePointActive()}trackById(t,e){return e.value}buildSteps(){const t=this.nzVertical?"bottom":"left";this.steps=this.nzMarksArray.map(e=>{const{value:n,offset:i,config:s}=e;return{value:n,offset:i,config:s,active:!1,style:{[t]:`${i}%`}}})}togglePointActive(){this.steps&&null!==this.nzLowerBound&&null!==this.nzUpperBound&&this.steps.forEach(t=>{const e=t.value;t.active=!this.nzIncluded&&e===this.nzUpperBound||this.nzIncluded&&e<=this.nzUpperBound&&e>=this.nzLowerBound})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Mb({type:t,selectors:[["nz-slider-step"]],inputs:{nzLowerBound:"nzLowerBound",nzUpperBound:"nzUpperBound",nzVertical:"nzVertical",nzIncluded:"nzIncluded",nzMarksArray:"nzMarksArray"},exportAs:["nzSliderStep"],features:[r.Cb()],decls:2,vars:2,consts:[[1,"ant-slider-step"],["class","ant-slider-dot",3,"ant-slider-dot-active","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ant-slider-dot",3,"ngStyle"]],template:function(t,e){1&t&&(r.Yb(0,"div",0),r.Ic(1,L,1,3,"span",1),r.Xb()),2&t&&(r.Eb(1),r.sc("ngForOf",e.steps)("ngForTrackBy",e.trackById))},directives:[i.j,i.l],encapsulation:2,changeDetection:0}),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzVertical",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzIncluded",void 0),t})(),N=(()=>{class t{constructor(){this.nzVertical=!1,this.nzIncluded=!1,this.style={}}ngOnChanges(t){t.nzIncluded&&(this.style.visibility=this.nzIncluded?"visible":"hidden"),(t.nzVertical||t.nzOffset||t.nzLength)&&(this.nzVertical?(this.style.bottom=`${this.nzOffset}%`,this.style.height=`${this.nzLength}%`,this.style.left=null,this.style.width=null):(this.style.left=`${this.nzOffset}%`,this.style.width=`${this.nzLength}%`,this.style.bottom=null,this.style.height=null))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Mb({type:t,selectors:[["nz-slider-track"]],inputs:{nzVertical:"nzVertical",nzIncluded:"nzIncluded",nzOffset:"nzOffset",nzLength:"nzLength"},exportAs:["nzSliderTrack"],features:[r.Cb()],decls:1,vars:1,consts:[[1,"ant-slider-track",3,"ngStyle"]],template:function(t,e){1&t&&r.Tb(0,"div",0),2&t&&r.sc("ngStyle",e.style)},directives:[i.l],encapsulation:2,changeDetection:0}),Object(o.a)([Object(z.e)(),Object(o.b)("design:type",Number)],t.prototype,"nzOffset",void 0),Object(o.a)([Object(z.e)(),Object(o.b)("design:type",Number)],t.prototype,"nzLength",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzVertical",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzIncluded",void 0),t})(),U=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)},imports:[[i.c,c.b,Y]]}),t})();var H=n("EY2u"),W=n("itXk"),G=n("CqXF"),J=n("Kj3r"),Z=(n("IzEk"),n("3+Bf")),Q=n("6KbF"),tt=n("OzZK"),et=n("FwiY"),nt=(n("2Vo4"),n("3UWI"),n("JX91"),n("5+tZ"),n("tyNb"));let it=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)},imports:[[i.c,a.f,c.b,tt.c,v.g,et.b,z.n,z.g]]}),t})();function st(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",1),r.gc("mouseenter",(function(e){return r.Bc(t),r.kc(2).setVisibleStateWhen(!0,"hover")}))("mouseleave",(function(e){return r.Bc(t),r.kc(2).setVisibleStateWhen(!1,"hover")})),r.Yb(1,"div"),r.qc(2),r.Xb(),r.Xb()}if(2&t){const t=r.kc(2);r.Gb("ant-dropdown nz-dropdown ant-dropdown-placement-"+t.nzPlacement),r.sc("ngClass",t.nzOverlayClassName)("ngStyle",t.nzOverlayStyle)("@slideMotion",t.dropDownPosition)("@.disabled",null==t.noAnimation?null:t.noAnimation.nzNoAnimation)("nzNoAnimation",null==t.noAnimation?null:t.noAnimation.nzNoAnimation),r.Eb(1),r.Jb("ant-table-filter-dropdown",t.nzTableFilter)}}function ot(t,e){if(1&t&&r.Ic(0,st,3,10,"div",0),2&t){const t=r.kc();r.sc("ngIf",t.open)}}const ct=["*"];let rt=(()=>{class t extends z.l{constructor(){super(...arguments),this.isInDropDown=!0}}return t.\u0275fac=function(e){return ht(e||t)},t.\u0275prov=r.Ob({token:t,factory:t.\u0275fac}),t})();function at(t){return t.get(rt)}let lt=(()=>{class t{constructor(t,e,n,i,s,o){this.cdr=t,this.elementRef=e,this.renderer=n,this.viewContainerRef=i,this.nzMenuDropdownService=s,this.noAnimation=o,this.open=!1,this.triggerWidth=0,this.dropDownPosition="bottom",this.visible$=new y.a,this.nzTrigger="hover",this.nzPlacement="bottomLeft",this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzTableFilter=!1}setVisibleStateWhen(t,e="all"){this.nzTrigger!==e&&"all"!==e||this.visible$.next(t)}setValue(t,e){this[t]=e,this.cdr.markForCheck()}ngAfterContentInit(){this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.h),r.Sb(r.l),r.Sb(r.E),r.Sb(r.Q),r.Sb(rt),r.Sb(z.m,9))},t.\u0275cmp=r.Mb({type:t,selectors:[["nz-dropdown-menu"]],viewQuery:function(t,e){var n;1&t&&r.Gc(r.M,!0),2&t&&r.zc(n=r.hc())&&(e.templateRef=n.first)},exportAs:["nzDropdownMenu"],features:[r.Db([rt,{provide:z.k,useFactory:at,deps:[[new r.J,r.r]]}])],ngContentSelectors:ct,decls:1,vars:0,consts:[[3,"class","ngClass","ngStyle","nzNoAnimation","mouseenter","mouseleave",4,"ngIf"],[3,"ngClass","ngStyle","nzNoAnimation","mouseenter","mouseleave"]],template:function(t,e){1&t&&(r.rc(),r.Ic(0,ot,1,1,"ng-template"))},directives:[i.k,i.i,i.l,z.m],styles:["\n      :root .ant-dropdown.nz-dropdown {\n        top: 0;\n        left: 0;\n        position: relative;\n        width: 100%;\n        margin-top: 4px;\n        margin-bottom: 4px;\n      }\n    "],encapsulation:2,data:{animation:[z.Q]},changeDetection:0}),t})(),dt=(()=>{class t{constructor(t,e,n,i,s,o,c){this.elementRef=t,this.renderer=e,this.overlay=n,this.platform=i,this.nzButtonComponent=s,this.nzButtonGroupComponent=o,this.viewContainerRef=c,this.overlayRef=null,this.destroy$=new y.a,this.triggerWidth=0,this.el=this.elementRef.nativeElement,this.dropdownOpen=!1,this.positions=[...z.a],this.positionSubscription=h.a.EMPTY,this.overlaySubscription=h.a.EMPTY,this.hover$=Object(d.a)(Object(l.a)(this.el,"mouseenter").pipe(Object(G.a)(!0)),Object(l.a)(this.el,"mouseleave").pipe(Object(G.a)(!1))),this.$click=Object(l.a)(this.el,"click").pipe(Object(b.a)(t=>t.stopPropagation()),Object(G.a)(!0)),this.nzTrigger="hover",this.nzBackdrop=!0,this.nzClickHide=!0,this.nzDisabled=!1,this.nzVisible=!1,this.nzTableFilter=!1,this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzPlacement="bottomLeft",this.nzVisibleChange=new r.n,e.addClass(t.nativeElement,"ant-dropdown-trigger"),this.nzButtonComponent&&(this.nzButtonComponent.isInDropdown=!0),this.nzButtonGroupComponent&&(this.nzButtonGroupComponent.isInDropdown=!0)}setDisabled(t){t?(this.renderer.setAttribute(this.el,"disabled",""),this.nzVisible&&(this.nzVisible=!1,this.nzVisibleChange.emit(this.nzVisible),this.updateOverlayByVisible())):this.renderer.removeAttribute(this.el,"disabled")}getOverlayConfig(){return new v.e({positionStrategy:this.overlay.position().flexibleConnectedTo(this.el).withLockedPosition(),minWidth:this.triggerWidth,hasBackdrop:"click"===this.nzTrigger,backdropClass:this.nzBackdrop?void 0:"nz-overlay-transparent-backdrop",scrollStrategy:this.overlay.scrollStrategies.reposition()})}createOverlay(){if(this.overlayRef){const t=this.overlayRef.getConfig();return this.updateOverlayConfig(t),this.overlayRef}{const t=this.getOverlayConfig();return this.overlayRef=this.overlay.create(t),this.subscribeOverlayEvent(this.overlayRef),this.subscribeToPositions(t.positionStrategy),this.overlayRef}}updateOverlayConfig(t){return t.minWidth=this.triggerWidth,t.hasBackdrop="click"===this.nzTrigger,t}dispose(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null,this.positionSubscription.unsubscribe(),this.overlaySubscription.unsubscribe())}subscribeToPositions(t){this.positionSubscription.unsubscribe(),this.positionSubscription=t.positionChanges.pipe(Object(m.a)(this.destroy$)).subscribe(t=>{this.nzDropdownMenu.setValue("dropDownPosition",t.connectionPair.originY)})}subscribeOverlayEvent(t){this.overlaySubscription.unsubscribe(),this.overlaySubscription=Object(d.a)(t.backdropClick(),t.detachments(),t.keydownEvents().pipe(Object(u.a)(t=>t.keyCode===Z.e&&!Object(Z.n)(t)))).pipe(Object(m.a)(this.destroy$)).subscribe(()=>{this.nzDropdownMenu.setVisibleStateWhen(!1)})}getPortal(){return this.portal&&this.portal.templateRef===this.nzDropdownMenu.templateRef||(this.portal=new Q.f(this.nzDropdownMenu.templateRef,this.viewContainerRef)),this.portal}openMenu(){if(!this.dropdownOpen){const t=this.createOverlay(),e=t.getConfig();this.nzDropdownMenu.setValue("open",!0),this.setPosition(e.positionStrategy),t.attach(this.getPortal()),this.dropdownOpen=!0}}closeMenu(){this.overlayRef&&(this.overlayRef.detach(),this.dropdownOpen=!1,this.nzDropdownMenu.setValue("open",!1))}setPosition(t){this.positionStrategy=t,t.withPositions([...this.positions])}updatePositionStrategy(t){this.positionStrategy&&this.positionStrategy.withPositions(t)}setTriggerWidth(){this.platform.isBrowser&&(this.triggerWidth=(this.nzMatchWidthElement?this.nzMatchWidthElement.nativeElement:this.el).getBoundingClientRect().width)}initActionSubscribe(){const t="hover"===this.nzTrigger?this.hover$:this.$click,e=this.nzDropdownMenu.visible$,n=this.nzClickHide?this.nzDropdownMenu.nzMenuDropdownService.menuItemClick$.pipe(Object(G.a)(!1)):H.a,i=Object(d.a)(e,t,n),s=this.nzDropdownMenu.nzMenuDropdownService.menuOpen$;Object(W.a)([i,s]).pipe(Object(p.a)(([t,e])=>t||e),Object(J.a)(50),Object(f.a)(),Object(m.a)(this.destroy$)).subscribe(t=>{this.nzDisabled||this.nzVisible===t||(this.nzVisible=t,this.updateOverlayByVisible(),this.nzVisibleChange.emit(this.nzVisible),this.setTriggerWidth(),this.nzDropdownMenu.setValue("triggerWidth",this.triggerWidth))})}updateOverlayByVisible(){this.nzVisible?this.openMenu():this.closeMenu()}updateDisabledState(){this.setDisabled(this.nzDisabled)}regeneratePosition(t,e){return[z.w[t],...e]}ngAfterViewInit(){this.nzDropdownMenu&&(this.setTriggerWidth(),this.initActionSubscribe(),this.updateDisabledState())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dispose()}ngOnChanges(t){const{nzVisible:e,nzTrigger:n,nzPlacement:i,nzDisabled:s,nzOverlayClassName:o,nzOverlayStyle:c,nzTableFilter:r}=t;this.nzDropdownMenu&&(e&&(this.updateOverlayByVisible(),this.nzDropdownMenu.visible$.next(this.nzVisible)),n&&this.nzDropdownMenu.setValue("nzTrigger",this.nzTrigger),r&&this.nzDropdownMenu.setValue("nzTableFilter",this.nzTableFilter),o&&this.nzDropdownMenu.setValue("nzOverlayClassName",this.nzOverlayClassName),c&&this.nzDropdownMenu.setValue("nzOverlayStyle",this.nzOverlayStyle),i&&(this.nzDropdownMenu.setValue("nzPlacement",this.nzPlacement),this.nzDropdownMenu.setValue("dropDownPosition",-1!==this.nzDropdownMenu.nzPlacement.indexOf("top")?"top":"bottom"),this.positions=this.regeneratePosition(this.nzPlacement,this.positions),this.updatePositionStrategy(this.positions))),s&&this.updateDisabledState()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.l),r.Sb(r.E),r.Sb(v.d),r.Sb(c.a),r.Sb(tt.a,9),r.Sb(tt.b,8),r.Sb(r.Q))},t.\u0275dir=r.Nb({type:t,selectors:[["","nz-dropdown",""]],inputs:{nzTrigger:"nzTrigger",nzBackdrop:"nzBackdrop",nzClickHide:"nzClickHide",nzDisabled:"nzDisabled",nzVisible:"nzVisible",nzTableFilter:"nzTableFilter",nzOverlayClassName:"nzOverlayClassName",nzOverlayStyle:"nzOverlayStyle",nzPlacement:"nzPlacement",nzDropdownMenu:"nzDropdownMenu",nzMatchWidthElement:"nzMatchWidthElement"},outputs:{nzVisibleChange:"nzVisibleChange"},exportAs:["nzDropdown"],features:[r.Cb()]}),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzBackdrop",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzClickHide",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzDisabled",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzVisible",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzTableFilter",void 0),t})();const ht=r.ac(rt);let ut=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)}}),t})(),bt=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)}}),t})(),pt=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)},imports:[[i.c,v.g,a.f,tt.c,it,et.b,c.b,z.n,z.o,ut,bt,z.g],it]}),t})();var gt=n("tk/3"),ft=n("LRne"),mt=n("HDdC"),zt=n("eIep"),vt=n("R0Ic"),yt=n("Rm4T");function kt(t,e){if(1&t&&(r.Wb(0),r.Tb(1,"i",8),r.Vb()),2&t){const t=r.kc(3);r.Eb(1),r.sc("nzType",t.icon)}}function Ot(t,e){if(1&t&&r.Kc(0),2&t){const t=r.kc(3);r.Mc(" ",t.formatter(t.nzPercent)," ")}}function Ct(t,e){if(1&t&&(r.Yb(0,"span",5),r.Ic(1,kt,2,1,"ng-container",6),r.Ic(2,Ot,1,1,"ng-template",null,7,r.Jc),r.Xb()),2&t){const t=r.Ac(3),e=r.kc(2);r.Eb(1),r.sc("ngIf","exception"===e.status||"success"===e.status&&!e.nzFormat)("ngIfElse",t)}}function wt(t,e){if(1&t&&r.Ic(0,Ct,4,2,"span",4),2&t){const t=r.kc();r.sc("ngIf",t.nzShowInfo)}}function Tt(t,e){if(1&t&&r.Tb(0,"div",14),2&t){const t=r.kc(2);r.Hc("width",t.nzSuccessPercent,"%")("border-radius","round"===t.nzStrokeLinecap?"100px":"0")("height",t.strokeWidth,"px")}}function Mt(t,e){}function St(t,e){if(1&t&&(r.Yb(0,"div"),r.Yb(1,"div",9),r.Yb(2,"div",10),r.Tb(3,"div",11),r.Ic(4,Tt,1,6,"div",12),r.Xb(),r.Xb(),r.Ic(5,Mt,0,0,"ng-template",13),r.Xb()),2&t){const t=r.kc(),e=r.Ac(1);r.Eb(3),r.Hc("width",t.nzPercent,"%")("border-radius","round"===t.nzStrokeLinecap?"100px":"0")("background",t.isGradient?null:t.nzStrokeColor,r.Lb)("background-image",t.isGradient?t.lineGradient:null,r.Lb)("height",t.strokeWidth,"px"),r.Eb(1),r.sc("ngIf",t.nzSuccessPercent||0===t.nzSuccessPercent),r.Eb(1),r.sc("ngTemplateOutlet",e)}}function Pt(t,e){if(1&t&&(r.jc(),r.Tb(0,"stop")),2&t){const t=e.$implicit;r.Fb("offset",t.offset)("stop-color",t.color)}}function xt(t,e){if(1&t&&(r.jc(),r.Yb(0,"defs"),r.Yb(1,"linearGradient",18),r.Ic(2,Pt,1,2,"stop",19),r.Xb(),r.Xb()),2&t){const t=r.kc(2);r.Eb(1),r.sc("id","gradient-"+t.gradientId),r.Eb(1),r.sc("ngForOf",t.circleGradient)}}function Xt(t,e){if(1&t&&(r.jc(),r.Tb(0,"path",20)),2&t){const t=e.$implicit,n=r.kc(2);r.sc("ngStyle",t.strokePathStyle),r.Fb("d",n.pathString)("stroke-linecap",n.nzStrokeLinecap)("stroke",t.stroke)("stroke-width",n.nzPercent?n.strokeWidth:0)}}function Yt(t,e){1&t&&r.jc()}function It(t,e){if(1&t&&(r.Yb(0,"div",10),r.jc(),r.Yb(1,"svg",15),r.Ic(2,xt,3,2,"defs",2),r.Tb(3,"path",16),r.Ic(4,Xt,1,5,"path",17),r.Xb(),r.Ic(5,Yt,0,0,"ng-template",13),r.Xb()),2&t){const t=r.kc(),e=r.Ac(1);r.Hc("width",t.nzWidth,"px")("height",t.nzWidth,"px")("font-size",.15*t.nzWidth+6,"px"),r.Jb("ant-progress-circle-gradient",t.isGradient),r.Eb(2),r.sc("ngIf",t.isGradient),r.Eb(1),r.sc("ngStyle",t.trailPathStyle),r.Fb("stroke-width",t.strokeWidth)("d",t.pathString),r.Eb(1),r.sc("ngForOf",t.progressCirclePath)("ngForTrackBy",t.trackByFn),r.Eb(1),r.sc("ngTemplateOutlet",e)}}const Et=t=>{let e=[];return Object.keys(t).forEach(n=>{const i=t[n],s=+n.replace("%","");if(isNaN(s))return{};e.push({key:s,value:i})}),e=e.sort((t,e)=>t.key-e.key),e};let jt=0;const Vt=new Map([["success","check"],["exception","close"]]),_t=new Map([["normal","#108ee9"],["exception","#ff5500"],["success","#87d068"]]),Dt=t=>`${t}%`;let Ft=(()=>{class t{constructor(t){this.nzConfigService=t,this.nzWidth=132,this.nzPercent=0,this.nzType="line",this.lineGradient=null,this.isGradient=!1,this.gradientId=jt++,this.progressCirclePath=[],this.trackByFn=t=>`${t}`,this.cachedStatus="normal",this.inferredStatus="normal",this.destroy$=new y.a}get formatter(){return this.nzFormat||Dt}get status(){return this.nzStatus||this.inferredStatus}get strokeWidth(){return this.nzStrokeWidth||("line"===this.nzType&&"small"!==this.nzSize?8:6)}get isCircleStyle(){return"circle"===this.nzType||"dashboard"===this.nzType}ngOnChanges(t){const{nzGapPosition:e,nzStrokeLinecap:n,nzStrokeColor:i,nzGapDegree:s,nzType:o,nzStatus:c,nzPercent:r,nzSuccessPercent:a}=t;c&&(this.cachedStatus=this.nzStatus||this.cachedStatus),(r||a)&&(parseInt(this.nzPercent.toString(),10)>=100?(Object(z.K)(this.nzSuccessPercent)&&this.nzSuccessPercent>=100||void 0===this.nzSuccessPercent)&&(this.inferredStatus="success"):this.inferredStatus=this.cachedStatus),(c||r||a)&&this.updateIcon(),i&&this.setStrokeColor(),(e||n||s||o||r||i)&&this.getCirclePaths()}ngOnInit(){this.nzConfigService.getConfigChangeEventForComponent("progress").pipe(Object(m.a)(this.destroy$)).subscribe(()=>{this.updateIcon(),this.setStrokeColor(),this.getCirclePaths()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateIcon(){const t=Vt.get(this.status);this.icon=t?t+(this.isCircleStyle?"-o":"-circle-fill"):""}getCirclePaths(){if(!this.isCircleStyle)return;const t=Object(z.K)(this.nzSuccessPercent)?[this.nzSuccessPercent,this.nzPercent]:[this.nzPercent],e=50-this.strokeWidth/2,n=2*Math.PI*e,i=this.nzGapDegree||("circle"===this.nzType?0:75);let s=0,o=-e,c=0,r=-2*e;switch(this.nzGapPosition||("circle"===this.nzType?"top":"bottom")){case"left":s=-e,o=0,c=2*e,r=0;break;case"right":s=e,o=0,c=-2*e,r=0;break;case"bottom":o=e,r=2*e}this.pathString=`M 50,50 m ${s},${o}\n       a ${e},${e} 0 1 1 ${c},${-r}\n       a ${e},${e} 0 1 1 ${-c},${r}`,this.trailPathStyle={strokeDasharray:`${n-i}px ${n}px`,strokeDashoffset:`-${i/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"},this.progressCirclePath=t.map((e,s)=>{const o=2===t.length&&0===s;return{stroke:this.isGradient&&!o?`url(#gradient-${this.gradientId})`:null,strokePathStyle:{stroke:this.isGradient?null:o?_t.get("success"):this.nzStrokeColor,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s",strokeDasharray:`${(e||0)/100*(n-i)}px ${n}px`,strokeDashoffset:`-${i/2}px`}}}).reverse()}setStrokeColor(){const t=this.nzStrokeColor,e=this.isGradient=!!t&&"string"!=typeof t;e&&!this.isCircleStyle?this.lineGradient=(t=>{const{from:e="#1890ff",to:n="#1890ff",direction:i="to right"}=t,s=Object(o.c)(t,["from","to","direction"]);return 0!==Object.keys(s).length?`linear-gradient(${i}, ${Et(s).map(({key:t,value:e})=>`${e} ${t}%`).join(", ")})`:`linear-gradient(${i}, ${e}, ${n})`})(t):e&&this.isCircleStyle?this.circleGradient=Et(this.nzStrokeColor).map(({key:t,value:e})=>({offset:`${t}%`,color:e})):(this.lineGradient=null,this.circleGradient=[])}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(z.i))},t.\u0275cmp=r.Mb({type:t,selectors:[["nz-progress"]],inputs:{nzWidth:"nzWidth",nzPercent:"nzPercent",nzType:"nzType",nzShowInfo:"nzShowInfo",nzStrokeColor:"nzStrokeColor",nzSize:"nzSize",nzFormat:"nzFormat",nzSuccessPercent:"nzSuccessPercent",nzStrokeWidth:"nzStrokeWidth",nzGapDegree:"nzGapDegree",nzStatus:"nzStatus",nzGapPosition:"nzGapPosition",nzStrokeLinecap:"nzStrokeLinecap"},exportAs:["nzProgress"],features:[r.Cb()],decls:5,vars:11,consts:[["progressInfoTemplate",""],[3,"ngClass"],[4,"ngIf"],["class","ant-progress-inner",3,"width","height","fontSize","ant-progress-circle-gradient",4,"ngIf"],["class","ant-progress-text",4,"ngIf"],[1,"ant-progress-text"],[4,"ngIf","ngIfElse"],["formatTemplate",""],["nz-icon","",3,"nzType"],[1,"ant-progress-outer"],[1,"ant-progress-inner"],[1,"ant-progress-bg"],["class","ant-progress-success-bg",3,"width","border-radius","height",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"ant-progress-success-bg"],["viewBox","0 0 100 100",1,"ant-progress-circle"],["stroke","#f3f3f3","fill-opacity","0",1,"ant-progress-circle-trail",3,"ngStyle"],["class","ant-progress-circle-path","fill-opacity","0",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["x1","100%","y1","0%","x2","0%","y2","0%",3,"id"],[4,"ngFor","ngForOf"],["fill-opacity","0",1,"ant-progress-circle-path",3,"ngStyle"]],template:function(t,e){1&t&&(r.Ic(0,wt,1,1,"ng-template",null,0,r.Jc),r.Yb(2,"div",1),r.Ic(3,St,6,12,"div",2),r.Ic(4,It,6,15,"div",3),r.Xb()),2&t&&(r.Eb(2),r.Jb("ant-progress-line","line"==e.nzType)("ant-progress-small","small"==e.nzSize)("ant-progress-show-info",e.nzShowInfo)("ant-progress-circle",e.isCircleStyle),r.sc("ngClass","ant-progress ant-progress-status-"+e.status),r.Eb(1),r.sc("ngIf","line"===e.nzType),r.Eb(1),r.sc("ngIf",e.isCircleStyle))},directives:[i.i,i.k,et.a,i.p,i.l,i.j],encapsulation:2,changeDetection:0}),Object(o.a)([Object(z.y)("progress",!0),Object(o.b)("design:type",Boolean)],t.prototype,"nzShowInfo",void 0),Object(o.a)([Object(z.y)("progress"),Object(o.b)("design:type",Object)],t.prototype,"nzStrokeColor",void 0),Object(o.a)([Object(z.y)("progress","default"),Object(o.b)("design:type",String)],t.prototype,"nzSize",void 0),Object(o.a)([Object(z.e)(),Object(o.b)("design:type",Number)],t.prototype,"nzSuccessPercent",void 0),Object(o.a)([Object(z.e)(),Object(o.b)("design:type",Number)],t.prototype,"nzPercent",void 0),Object(o.a)([Object(z.y)("progress"),Object(z.e)(),Object(o.b)("design:type",Number)],t.prototype,"nzStrokeWidth",void 0),Object(o.a)([Object(z.y)("progress"),Object(z.e)(),Object(o.b)("design:type",Number)],t.prototype,"nzGapDegree",void 0),Object(o.a)([Object(z.y)("progress","top"),Object(o.b)("design:type",String)],t.prototype,"nzGapPosition",void 0),Object(o.a)([Object(z.y)("progress","round"),Object(o.b)("design:type",String)],t.prototype,"nzStrokeLinecap",void 0),t})(),Lt=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)},imports:[[i.c,et.b]]}),t})();const At=["file"],Bt=["nz-upload-btn",""],$t=["*"];function Rt(t,e){if(1&t&&(r.Yb(0,"div",14),r.Kc(1),r.Xb()),2&t){const t=r.kc(4);r.Eb(1),r.Lc(t.locale.uploading)}}function Kt(t,e){if(1&t&&(r.Wb(0),r.Ic(1,Rt,2,1,"div",13),r.Vb()),2&t){r.kc();const t=r.Ac(2),e=r.kc().$implicit,n=r.kc();r.Eb(1),r.sc("ngIf","picture-card"===n.listType&&"uploading"===e.status)("ngIfElse",t)}}function qt(t,e){1&t&&r.Tb(0,"i",16)}function Nt(t,e){if(1&t&&r.Ic(0,qt,1,0,"i",15),2&t){r.kc();const t=r.Ac(4),e=r.kc().$implicit;r.sc("ngIf",!e.thumbUrl&&!e.url)("ngIfElse",t)}}function Ut(t,e){if(1&t&&r.Tb(0,"img",19),2&t){const t=r.kc(3).$implicit;r.sc("src",t.thumbUrl||t.url,r.Dc),r.Fb("alt",t.name)}}function Ht(t,e){if(1&t){const t=r.Zb();r.Yb(0,"a",17),r.gc("click",(function(e){r.Bc(t);const n=r.kc(2).$implicit;return r.kc().handlePreview(n,e)})),r.Ic(1,Ut,1,2,"img",18),r.Xb()}if(2&t){r.kc();const t=r.Ac(6),e=r.kc().$implicit,n=r.kc();r.sc("href",e.thumbUrl||e.url,r.Dc),r.Eb(1),r.sc("ngIf",n.isImageUrl(e))("ngIfElse",t)}}function Wt(t,e){1&t&&r.Tb(0,"i",20)}function Gt(t,e){if(1&t&&r.Tb(0,"i",21),2&t){const t=r.kc(2).$implicit;r.sc("nzType","uploading"===t.status?"loading":"paper-clip")}}function Jt(t,e){if(1&t&&(r.Ic(0,Kt,2,2,"ng-container",6),r.Ic(1,Nt,1,2,"ng-template",null,9,r.Jc),r.Ic(3,Ht,2,3,"ng-template",null,10,r.Jc),r.Ic(5,Wt,1,0,"ng-template",null,11,r.Jc),r.Ic(7,Gt,1,1,"ng-template",null,12,r.Jc)),2&t){const t=r.Ac(8),e=r.kc(2);r.sc("ngIf",e.showPic)("ngIfElse",t)}}function Zt(t,e){if(1&t){const t=r.Zb();r.Wb(0),r.Yb(1,"a",23),r.gc("click",(function(e){r.Bc(t);const n=r.kc(2).$implicit;return r.kc().handlePreview(n,e)})),r.Kc(2),r.Xb(),r.Vb()}if(2&t){const t=r.kc(2).$implicit;r.Eb(1),r.tc("title",t.name),r.sc("href",t.thumbUrl||t.url,r.Dc),r.Fb("download",t.linkProps&&t.linkProps.download),r.Eb(1),r.Lc(t.name)}}function Qt(t,e){if(1&t){const t=r.Zb();r.Yb(0,"span",24),r.gc("click",(function(e){r.Bc(t);const n=r.kc(2).$implicit;return r.kc().handlePreview(n,e)})),r.Kc(1),r.Xb()}if(2&t){const t=r.kc(2).$implicit;r.tc("title",t.name),r.Eb(1),r.Lc(t.name)}}function te(t,e){if(1&t&&(r.Ic(0,Zt,3,4,"ng-container",6),r.Ic(1,Qt,2,2,"ng-template",null,22,r.Jc)),2&t){const t=r.Ac(2),e=r.kc().$implicit;r.sc("ngIf",e.url)("ngIfElse",t)}}function ee(t,e){}function ne(t,e){}function ie(t,e){if(1&t&&(r.Yb(0,"span",25),r.Ic(1,ee,0,0,"ng-template",26),r.Ic(2,ne,0,0,"ng-template",26),r.Xb()),2&t){const t=r.kc().$implicit,e=r.Ac(2),n=r.Ac(4);r.sc("nzTitle",t.message),r.Eb(1),r.sc("ngTemplateOutlet",e),r.Eb(1),r.sc("ngTemplateOutlet",n)}}function se(t,e){}function oe(t,e){}function ce(t,e){if(1&t&&(r.Yb(0,"span"),r.Ic(1,se,0,0,"ng-template",26),r.Ic(2,oe,0,0,"ng-template",26),r.Xb()),2&t){r.kc();const t=r.Ac(2),e=r.Ac(4);r.Eb(1),r.sc("ngTemplateOutlet",t),r.Eb(1),r.sc("ngTemplateOutlet",e)}}const re=function(){return{opacity:.5,"pointer-events":"none"}};function ae(t,e){if(1&t){const t=r.Zb();r.Yb(0,"a",30),r.gc("click",(function(e){r.Bc(t);const n=r.kc(2).$implicit;return r.kc().handlePreview(n,e)})),r.Tb(1,"i",31),r.Xb()}if(2&t){const t=r.kc(2).$implicit,e=r.kc();r.tc("title",e.locale.previewFile),r.sc("href",t.thumbUrl||t.url,r.Dc)("ngStyle",!(t.url||t.thumbUrl)&&r.vc(3,re))}}function le(t,e){if(1&t){const t=r.Zb();r.Yb(0,"i",32),r.gc("click",(function(e){r.Bc(t);const n=r.kc(2).$implicit;return r.kc().handleRemove(n,e)})),r.Xb()}if(2&t){const t=r.kc(3);r.tc("title",t.locale.removeFile)}}function de(t,e){if(1&t&&(r.Wb(0),r.Yb(1,"span",27),r.Ic(2,ae,2,4,"a",28),r.Ic(3,le,1,1,"i",29),r.Xb(),r.Vb()),2&t){const t=r.kc().$implicit,e=r.kc();r.Eb(2),r.sc("ngIf",e.showPreview(t)),r.Eb(1),r.sc("ngIf",e.icons.showRemoveIcon)}}function he(t,e){if(1&t){const t=r.Zb();r.Yb(0,"i",34),r.gc("click",(function(e){r.Bc(t);const n=r.kc(2).$implicit;return r.kc().handleRemove(n,e)})),r.Xb()}if(2&t){const t=r.kc(3);r.tc("title",t.locale.removeFile)}}function ue(t,e){if(1&t&&r.Ic(0,he,1,1,"i",33),2&t){const t=r.kc(2);r.sc("ngIf",t.icons.showRemoveIcon)}}function be(t,e){if(1&t&&(r.Yb(0,"div",35),r.Tb(1,"nz-progress",36),r.Xb()),2&t){const t=r.kc().$implicit;r.Eb(1),r.sc("nzPercent",t.percent)("nzShowInfo",!1)("nzStrokeWidth",2)}}function pe(t,e){if(1&t&&(r.Yb(0,"div"),r.Ic(1,Jt,9,2,"ng-template",null,1,r.Jc),r.Ic(3,te,3,2,"ng-template",null,2,r.Jc),r.Yb(5,"div",3),r.Ic(6,ie,3,3,"span",4),r.Ic(7,ce,3,2,"span",5),r.Xb(),r.Ic(8,de,4,2,"ng-container",6),r.Ic(9,ue,1,1,"ng-template",null,7,r.Jc),r.Ic(11,be,2,3,"div",8),r.Xb()),2&t){const t=e.$implicit,n=r.Ac(10),i=r.kc();r.Hb("ant-upload-list-item ant-upload-list-item-",t.status,""),r.sc("@itemState",void 0),r.Eb(6),r.sc("ngIf","error"===t.status),r.Eb(1),r.sc("ngIf","error"!==t.status),r.Eb(1),r.sc("ngIf","picture-card"===i.listType&&"uploading"!==t.status)("ngIfElse",n),r.Eb(3),r.sc("ngIf","uploading"===t.status)}}const ge=["uploadComp"],fe=["listComp"],me=function(){return[]};function ze(t,e){if(1&t&&r.Tb(0,"nz-upload-list",6,7),2&t){const t=r.kc();r.Hc("display",t.nzShowUploadList?"":"none"),r.sc("locale",t.locale)("listType",t.nzListType)("items",t.nzFileList||r.vc(8,me))("icons",t.nzShowUploadList)("onPreview",t.nzPreview)("onRemove",t.onRemove)}}function ve(t,e){1&t&&r.qc(0)}function ye(t,e){}function ke(t,e){if(1&t&&(r.Yb(0,"div",8),r.Yb(1,"div",9,10),r.Ic(3,ye,0,0,"ng-template",11),r.Xb(),r.Xb()),2&t){const t=r.kc(),e=r.Ac(3);r.Hc("display",t.nzShowButton?"":"none"),r.sc("ngClass",t.classList),r.Eb(1),r.sc("options",t._btnOptions),r.Eb(2),r.sc("ngTemplateOutlet",e)}}function Oe(t,e){}function Ce(t,e){}const we=function(){return{"ant-upload-btn":!0}};function Te(t,e){if(1&t){const t=r.Zb();r.Wb(0),r.Yb(1,"div",12),r.gc("drop",(function(e){return r.Bc(t),r.kc().fileDrop(e)}))("dragover",(function(e){return r.Bc(t),r.kc().fileDrop(e)}))("dragleave",(function(e){return r.Bc(t),r.kc().fileDrop(e)})),r.Yb(2,"div",13,10),r.Yb(4,"div",14),r.Ic(5,Oe,0,0,"ng-template",11),r.Xb(),r.Xb(),r.Xb(),r.Ic(6,Ce,0,0,"ng-template",11),r.Vb()}if(2&t){const t=r.kc(),e=r.Ac(3),n=r.Ac(1);r.Eb(1),r.sc("ngClass",t.classList),r.Eb(1),r.sc("options",t._btnOptions)("classes",r.vc(5,we)),r.Eb(3),r.sc("ngTemplateOutlet",e),r.Eb(1),r.sc("ngTemplateOutlet",n)}}function Me(t,e){}function Se(t,e){}function Pe(t,e){if(1&t&&(r.Wb(0),r.Ic(1,Me,0,0,"ng-template",11),r.Ic(2,Se,0,0,"ng-template",11),r.Vb()),2&t){r.kc(2);const t=r.Ac(1),e=r.Ac(5);r.Eb(1),r.sc("ngTemplateOutlet",t),r.Eb(1),r.sc("ngTemplateOutlet",e)}}function xe(t,e){if(1&t&&r.Ic(0,Pe,3,2,"ng-container",3),2&t){const t=r.kc(),e=r.Ac(10);r.sc("ngIf","picture-card"===t.nzListType)("ngIfElse",e)}}function Xe(t,e){}function Ye(t,e){}function Ie(t,e){if(1&t&&(r.Ic(0,Xe,0,0,"ng-template",11),r.Ic(1,Ye,0,0,"ng-template",11)),2&t){r.kc();const t=r.Ac(5),e=r.Ac(1);r.sc("ngTemplateOutlet",t),r.Eb(1),r.sc("ngTemplateOutlet",e)}}let Ee=(()=>{class t{constructor(t,e,n){if(this.http=t,this.el=e,this.updateHostClassService=n,this.reqs={},this.inited=!1,this.destroy=!1,this.classes={},this.prefixCls="ant-upload",!t)throw new Error("Not found 'HttpClient', You can import 'HttpClientModule' in your root module.")}onClick(){!this.options.disabled&&this.options.openFileDialogOnClick&&this.file.nativeElement.click()}onKeyDown(t){this.options.disabled||"Enter"!==t.key&&t.keyCode!==Z.d||this.onClick()}onFileDrop(t){if(this.options.disabled||"dragover"===t.type)t.preventDefault();else{if(this.options.directory)this.traverseFileTree(t.dataTransfer.items);else{const e=Array.prototype.slice.call(t.dataTransfer.files).filter(t=>this.attrAccept(t,this.options.accept));e.length&&this.uploadFiles(e)}t.preventDefault()}}onChange(t){if(this.options.disabled)return;const e=t.target;this.uploadFiles(e.files),e.value=""}traverseFileTree(t){const e=(t,n)=>{t.isFile?t.file(t=>{this.attrAccept(t,this.options.accept)&&this.uploadFiles([t])}):t.isDirectory&&t.createReader().readEntries(i=>{for(const s of i)e(s,`${n}${t.name}/`)})};for(const n of t)e(n.webkitGetAsEntry(),"")}attrAccept(t,e){if(t&&e){const n=Array.isArray(e)?e:e.split(","),i=""+t.name,s=""+t.type,o=s.replace(/\/.*$/,"");return n.some(t=>{const e=t.trim();return"."===e.charAt(0)?-1!==i.toLowerCase().indexOf(e.toLowerCase(),i.toLowerCase().length-e.toLowerCase().length):/\/\*$/.test(e)?o===e.replace(/\/.*$/,""):s===e})}return!0}attachUid(t){return t.uid||(t.uid=Math.random().toString(36).substring(2)),t}uploadFiles(t){let e=Object(ft.a)(Array.prototype.slice.call(t));this.options.filters&&this.options.filters.forEach(t=>{e=e.pipe(Object(zt.a)(e=>{const n=t.fn(e);return n instanceof mt.a?n:Object(ft.a)(n)}))}),e.subscribe(t=>{t.forEach(e=>{this.attachUid(e),this.upload(e,t)})},t=>{Object(z.T)("Unhandled upload filter error",t)})}upload(t,e){if(!this.options.beforeUpload)return this.post(t);const n=this.options.beforeUpload(t,e);if(n instanceof mt.a)n.subscribe(e=>{const n=Object.prototype.toString.call(e);"[object File]"===n||"[object Blob]"===n?(this.attachUid(e),this.post(e)):"boolean"==typeof e&&!1!==e&&this.post(t)},t=>{Object(z.T)("Unhandled upload beforeUpload error",t)});else if(!1!==n)return this.post(t)}post(t){if(this.destroy)return;const e=this.options,{uid:n}=t;let{data:i,headers:s}=e;"function"==typeof i&&(i=i(t)),"function"==typeof s&&(s=s(t));const o={action:e.action,name:e.name,headers:s,file:t,data:i,withCredentials:e.withCredentials,onProgress:e.onProgress?n=>{e.onProgress(n,t)}:void 0,onSuccess:(i,s)=>{this.clean(n),e.onSuccess(i,t,s)},onError:i=>{this.clean(n),e.onError(i,t)}},c=(e.customRequest||this.xhr).call(this,o);c instanceof h.a||Object(z.T)("Must return Subscription type in '[nzCustomRequest]' property"),this.reqs[n]=c,e.onStart(t)}xhr(t){const e=new FormData;e.append(t.name,t.file),t.data&&Object.keys(t.data).map(n=>{e.append(n,t.data[n])}),t.headers||(t.headers={}),null!==t.headers["X-Requested-With"]?t.headers["X-Requested-With"]="XMLHttpRequest":delete t.headers["X-Requested-With"];const n=new gt.g("POST",t.action,e,{reportProgress:!0,withCredentials:t.withCredentials,headers:new gt.f(t.headers)});return this.http.request(n).subscribe(e=>{e.type===gt.e.UploadProgress?(e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e,t.file)):e instanceof gt.h&&t.onSuccess(e.body,t.file,e)},e=>{this.abort(t.file),t.onError(e,t.file)})}clean(t){const e=this.reqs[t];e instanceof h.a&&e.unsubscribe(),delete this.reqs[t]}abort(t){t?this.clean(t&&t.uid):Object.keys(this.reqs).forEach(t=>this.clean(t))}setClassMap(){const t=Object.assign({[this.prefixCls]:!0,[`${this.prefixCls}-disabled`]:this.options.disabled},this.classes);this.updateHostClassService.updateHostClass(this.el.nativeElement,t)}ngOnInit(){this.inited=!0,this.setClassMap()}ngOnChanges(){this.inited&&this.setClassMap()}ngOnDestroy(){this.destroy=!0,this.abort()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(gt.c,8),r.Sb(r.l),r.Sb(z.t))},t.\u0275cmp=r.Mb({type:t,selectors:[["","nz-upload-btn",""]],viewQuery:function(t,e){var n;1&t&&r.Nc(At,!0),2&t&&r.zc(n=r.hc())&&(e.file=n.first)},hostVars:2,hostBindings:function(t,e){1&t&&r.gc("click",(function(t){return e.onClick()}))("keydown",(function(t){return e.onKeyDown(t)}))("drop",(function(t){return e.onFileDrop(t)}))("dragover",(function(t){return e.onFileDrop(t)})),2&t&&r.Fb("tabindex","0")("role","button")},inputs:{classes:"classes",options:"options"},exportAs:["nzUploadBtn"],features:[r.Db([z.t]),r.Cb()],attrs:Bt,ngContentSelectors:$t,decls:3,vars:4,consts:[["type","file",2,"display","none",3,"multiple","change"],["file",""]],template:function(t,e){1&t&&(r.rc(),r.Yb(0,"input",0,1),r.gc("change",(function(t){return e.onChange(t)})),r.Xb(),r.qc(2)),2&t&&(r.sc("multiple",e.options.multiple),r.Fb("accept",e.options.accept)("directory",e.options.directory?"directory":null)("webkitdirectory",e.options.directory?"webkitdirectory":null))},encapsulation:2}),t})(),je=(()=>{class t{constructor(t,e,n,i){this.el=t,this.cdr=e,this.updateHostClassService=n,this.platform=i,this.imageTypes=["image","webp","png","svg","gif","jpg","jpeg","bmp"],this.locale={},this.prefixCls="ant-upload-list"}get showPic(){return"picture"===this.listType||"picture-card"===this.listType}set items(t){t.forEach(t=>{t.linkProps="string"==typeof t.linkProps?JSON.parse(t.linkProps):t.linkProps}),this._items=t}get items(){return this._items}setClassMap(){this.updateHostClassService.updateHostClass(this.el.nativeElement,{[this.prefixCls]:!0,[`${this.prefixCls}-${this.listType}`]:!0})}extname(t){const e=t.split("/"),n=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(n)||[""])[0]}isImageUrl(t){if(~this.imageTypes.indexOf(t.type))return!0;const e=t.thumbUrl||t.url||"";if(!e)return!1;const n=this.extname(e);return!(!/^data:image\//.test(e)&&!/(webp|svg|png|gif|jpg|jpeg|bmp)$/i.test(n))||!/^data:/.test(e)&&!n}previewFile(t,e){t.type&&-1===this.imageTypes.indexOf(t.type)&&e("");const n=new FileReader;n.onloadend=()=>e(n.result),n.readAsDataURL(t)}genThumb(){if(!this.platform.isBrowser)return;const t=window;this.showPic&&"undefined"!=typeof document&&void 0!==t&&t.FileReader&&t.File&&this.items.filter(t=>t.originFileObj instanceof File&&void 0===t.thumbUrl).forEach(t=>{t.thumbUrl="",this.previewFile(t.originFileObj,e=>{t.thumbUrl=e,this.detectChanges()})})}showPreview(t){const{showPreviewIcon:e,hidePreviewIconInNonImage:n}=this.icons;return!(!e||!this.isImageUrl(t)&&n)}handlePreview(t,e){if(this.onPreview)return e.preventDefault(),this.onPreview(t)}handleRemove(t,e){e.preventDefault(),this.onRemove&&this.onRemove(t)}detectChanges(){this.cdr.detectChanges()}ngOnChanges(){this.setClassMap(),this.genThumb()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.l),r.Sb(r.h),r.Sb(z.t),r.Sb(c.a))},t.\u0275cmp=r.Mb({type:t,selectors:[["nz-upload-list"]],inputs:{locale:"locale",items:"items",listType:"listType",icons:"icons",onPreview:"onPreview",onRemove:"onRemove"},exportAs:["nzUploadList"],features:[r.Db([z.t]),r.Cb()],decls:1,vars:1,consts:[[3,"class",4,"ngFor","ngForOf"],["icon",""],["preview",""],[1,"ant-upload-list-item-info"],["nz-tooltip","",3,"nzTitle",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["close",""],["class","ant-upload-list-item-progress",4,"ngIf"],["thumbUrlCheck",""],["thumbTpl",""],["noThumbTpl",""],["noPicTpl",""],["class","ant-upload-list-item-uploading-text",4,"ngIf","ngIfElse"],[1,"ant-upload-list-item-uploading-text"],["class","ant-upload-list-item-thumbnail","nz-icon","","nzType","picture","nzTheme","twotone",4,"ngIf","ngIfElse"],["nz-icon","","nzType","picture","nzTheme","twotone",1,"ant-upload-list-item-thumbnail"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"href","click"],[3,"src",4,"ngIf","ngIfElse"],[3,"src"],["nz-icon","","nzType","file","nzTheme","twotone",1,"ant-upload-list-item-icon"],["nz-icon","",3,"nzType"],["prevText",""],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"href","title","click"],[1,"ant-upload-list-item-name",3,"title","click"],["nz-tooltip","",3,"nzTitle"],[3,"ngTemplateOutlet"],[1,"ant-upload-list-item-actions"],["target","_blank","rel","noopener noreferrer",3,"href","title","ngStyle","click",4,"ngIf"],["nz-icon","","nzType","delete",3,"title","click",4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"href","title","ngStyle","click"],["nz-icon","","nzType","eye-o"],["nz-icon","","nzType","delete",3,"title","click"],["nz-icon","","nzType","close",3,"title","click",4,"ngIf"],["nz-icon","","nzType","close",3,"title","click"],[1,"ant-upload-list-item-progress"],[3,"nzPercent","nzShowInfo","nzStrokeWidth"]],template:function(t,e){1&t&&r.Ic(0,pe,12,9,"div",0),2&t&&r.sc("ngForOf",e.items)},directives:[i.j,i.k,et.a,X,i.p,i.l,Ft],encapsulation:2,data:{animation:[Object(vt.j)("itemState",[Object(vt.i)(":enter",[Object(vt.h)({height:"0",width:"0",opacity:0}),Object(vt.e)(150,Object(vt.h)({height:"*",width:"*",opacity:1}))]),Object(vt.i)(":leave",[Object(vt.e)(150,Object(vt.h)({height:"0",width:"0",opacity:0}))])])]},changeDetection:0}),t})(),Ve=(()=>{class t{constructor(t,e){this.cdr=t,this.i18n=e,this.locale={},this.nzType="select",this.nzLimit=0,this.nzSize=0,this.nzDirectory=!1,this.nzOpenFileDialogOnClick=!0,this.nzFilter=[],this.nzFileList=[],this.nzDisabled=!1,this.nzListType="text",this.nzMultiple=!1,this.nzName="file",this._showUploadList=!0,this.nzShowButton=!0,this.nzWithCredentials=!1,this.nzChange=new r.n,this.nzFileListChange=new r.n,this.onStart=t=>{this.nzFileList||(this.nzFileList=[]);const e=this.fileToObject(t);e.status="uploading",this.nzFileList=this.nzFileList.concat(e),this.nzFileListChange.emit(this.nzFileList),this.nzChange.emit({file:e,fileList:this.nzFileList,type:"start"}),this.detectChangesList()},this.onProgress=(t,e)=>{const n=this.getFileItem(e,this.nzFileList);n.percent=t.percent,this.nzChange.emit({event:t,file:Object.assign({},n),fileList:this.nzFileList,type:"progress"}),this.detectChangesList()},this.onSuccess=(t,e)=>{const n=this.nzFileList,i=this.getFileItem(e,n);i.status="done",i.response=t,this.nzChange.emit({file:Object.assign({},i),fileList:n,type:"success"}),this.detectChangesList()},this.onError=(t,e)=>{const n=this.nzFileList,i=this.getFileItem(e,n);i.error=t,i.status="error",i.message=this.genErr(i),this.nzChange.emit({file:Object.assign({},i),fileList:n,type:"error"}),this.detectChangesList()},this.onRemove=t=>{this.uploadComp.abort(t),t.status="removed";const e="function"==typeof this.nzRemove?this.nzRemove(t):null==this.nzRemove||this.nzRemove;(e instanceof mt.a?e:Object(ft.a)(e)).pipe(Object(u.a)(t=>t)).subscribe(()=>{this.nzFileList=this.removeFileItem(t,this.nzFileList),this.nzChange.emit({file:t,fileList:this.nzFileList,type:"removed"}),this.nzFileListChange.emit(this.nzFileList),this.cdr.detectChanges()})},this.prefixCls="ant-upload",this.classList=[]}set nzShowUploadList(t){this._showUploadList="boolean"==typeof t?Object(z.R)(t):t}get nzShowUploadList(){return this._showUploadList}zipOptions(){"boolean"==typeof this.nzShowUploadList&&this.nzShowUploadList&&(this.nzShowUploadList={showPreviewIcon:!0,showRemoveIcon:!0,hidePreviewIconInNonImage:!1});const t=this.nzFilter.slice();if(this.nzMultiple&&this.nzLimit>0&&-1===t.findIndex(t=>"limit"===t.name)&&t.push({name:"limit",fn:t=>t.slice(-this.nzLimit)}),this.nzSize>0&&-1===t.findIndex(t=>"size"===t.name)&&t.push({name:"size",fn:t=>t.filter(t=>t.size/1024<=this.nzSize)}),this.nzFileType&&this.nzFileType.length>0&&-1===t.findIndex(t=>"type"===t.name)){const e=this.nzFileType.split(",");t.push({name:"type",fn:t=>t.filter(t=>~e.indexOf(t.type))})}return this._btnOptions={disabled:this.nzDisabled,accept:this.nzAccept,action:this.nzAction,directory:this.nzDirectory,openFileDialogOnClick:this.nzOpenFileDialogOnClick,beforeUpload:this.nzBeforeUpload,customRequest:this.nzCustomRequest,data:this.nzData,headers:this.nzHeaders,name:this.nzName,multiple:this.nzMultiple,withCredentials:this.nzWithCredentials,filters:t,onStart:this.onStart,onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError},this}fileToObject(t){return{lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.filename||t.name,size:t.size,type:t.type,uid:t.uid,response:t.response,error:t.error,percent:0,originFileObj:t}}getFileItem(t,e){return e.filter(e=>e.uid===t.uid)[0]}removeFileItem(t,e){return e.filter(e=>e.uid!==t.uid)}genErr(t){return t.response&&"string"==typeof t.response?t.response:t.error&&t.error.statusText||this.locale.uploadError}fileDrop(t){t.type!==this.dragState&&(this.dragState=t.type,this.setClassMap())}detectChangesList(){this.cdr.detectChanges(),this.listComp.detectChanges()}setClassMap(){let t=[];"drag"===this.nzType?(this.nzFileList.some(t=>"uploading"===t.status)&&t.push(`${this.prefixCls}-drag-uploading`),"dragover"===this.dragState&&t.push(`${this.prefixCls}-drag-hover`)):t=[`${this.prefixCls}-select-${this.nzListType}`],this.classList=[this.prefixCls,`${this.prefixCls}-${this.nzType}`,...t,this.nzDisabled&&`${this.prefixCls}-disabled`||""].filter(t=>!!t),this.cdr.detectChanges()}ngOnInit(){this.i18n$=this.i18n.localeChange.subscribe(()=>{this.locale=this.i18n.getLocaleData("Upload"),this.detectChangesList()})}ngOnChanges(t){t.nzFileList&&(this.nzFileList||[]).forEach(t=>t.message=this.genErr(t)),this.zipOptions().setClassMap()}ngOnDestroy(){this.i18n$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.h),r.Sb(yt.c))},t.\u0275cmp=r.Mb({type:t,selectors:[["nz-upload"]],viewQuery:function(t,e){var n;1&t&&(r.Nc(ge,!0),r.Nc(fe,!0)),2&t&&(r.zc(n=r.hc())&&(e.uploadComp=n.first),r.zc(n=r.hc())&&(e.listComp=n.first))},hostVars:2,hostBindings:function(t,e){2&t&&r.Jb("ant-upload-picture-card-wrapper","picture-card"===e.nzListType)},inputs:{nzType:"nzType",nzLimit:"nzLimit",nzSize:"nzSize",nzDirectory:"nzDirectory",nzOpenFileDialogOnClick:"nzOpenFileDialogOnClick",nzFilter:"nzFilter",nzFileList:"nzFileList",nzDisabled:"nzDisabled",nzListType:"nzListType",nzMultiple:"nzMultiple",nzName:"nzName",nzShowButton:"nzShowButton",nzWithCredentials:"nzWithCredentials",nzShowUploadList:"nzShowUploadList",nzFileType:"nzFileType",nzAccept:"nzAccept",nzAction:"nzAction",nzBeforeUpload:"nzBeforeUpload",nzCustomRequest:"nzCustomRequest",nzData:"nzData",nzHeaders:"nzHeaders",nzRemove:"nzRemove",nzPreview:"nzPreview"},outputs:{nzChange:"nzChange",nzFileListChange:"nzFileListChange"},exportAs:["nzUpload"],features:[r.Cb()],ngContentSelectors:$t,decls:11,vars:2,consts:[["list",""],["con",""],["btn",""],[4,"ngIf","ngIfElse"],["select",""],["pic",""],[3,"locale","listType","items","icons","onPreview","onRemove"],["listComp",""],[3,"ngClass"],["nz-upload-btn","",3,"options"],["uploadComp",""],[3,"ngTemplateOutlet"],[3,"ngClass","drop","dragover","dragleave"],["nz-upload-btn","",3,"options","classes"],[1,"ant-upload-drag-container"]],template:function(t,e){if(1&t&&(r.rc(),r.Ic(0,ze,2,9,"ng-template",null,0,r.Jc),r.Ic(2,ve,1,0,"ng-template",null,1,r.Jc),r.Ic(4,ke,4,5,"ng-template",null,2,r.Jc),r.Ic(6,Te,7,6,"ng-container",3),r.Ic(7,xe,1,2,"ng-template",null,4,r.Jc),r.Ic(9,Ie,2,2,"ng-template",null,5,r.Jc)),2&t){const t=r.Ac(8);r.Eb(6),r.sc("ngIf","drag"===e.nzType)("ngIfElse",t)}},directives:[i.k,je,i.i,Ee,i.p],encapsulation:2,changeDetection:0}),Object(o.a)([Object(z.e)(),Object(o.b)("design:type",Object)],t.prototype,"nzLimit",void 0),Object(o.a)([Object(z.e)(),Object(o.b)("design:type",Object)],t.prototype,"nzSize",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzDirectory",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzOpenFileDialogOnClick",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzDisabled",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzMultiple",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzShowButton",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzWithCredentials",void 0),t})(),_e=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)},imports:[[i.c,a.f,c.b,Y,Lt,yt.b,et.b]]}),t})();var De=n("tkJt");const Fe=["drawerTemplate"];function Le(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",9),r.gc("click",(function(e){return r.Bc(t),r.kc(2).maskClick()})),r.Xb()}if(2&t){const t=r.kc(2);r.sc("ngStyle",t.nzMaskStyle)}}function Ae(t,e){if(1&t&&(r.Wb(0),r.Tb(1,"div",14),r.Vb()),2&t){const t=r.kc(4);r.Eb(1),r.sc("innerHTML",t.nzTitle,r.Cc)}}function Be(t,e){if(1&t&&(r.Yb(0,"div",12),r.Ic(1,Ae,2,1,"ng-container",13),r.Xb()),2&t){const t=r.kc(3);r.Eb(1),r.sc("nzStringTemplateOutlet",t.nzTitle)}}function $e(t,e){if(1&t){const t=r.Zb();r.Yb(0,"button",15),r.gc("click",(function(e){return r.Bc(t),r.kc(3).closeClick()})),r.Tb(1,"i",16),r.Xb()}}function Re(t,e){if(1&t&&(r.Yb(0,"div"),r.Ic(1,Be,2,1,"div",10),r.Ic(2,$e,2,0,"button",11),r.Xb()),2&t){const t=r.kc(2);r.Jb("ant-drawer-header",!!t.nzTitle)("ant-drawer-header-no-title",!!t.nzTitle),r.Eb(1),r.sc("ngIf",t.nzTitle),r.Eb(1),r.sc("ngIf",t.nzClosable)}}function Ke(t,e){}function qe(t,e){1&t&&r.Ub(0)}function Ne(t,e){if(1&t&&(r.Wb(0),r.Ic(1,qe,1,0,"ng-container",17),r.Vb()),2&t){const t=r.kc(2);r.Eb(1),r.sc("ngTemplateOutlet",t.nzContent)("ngTemplateOutletContext",t.templateContext)}}function Ue(t,e){1&t&&r.qc(0,0,["*ngIf","!nzContent"])}function He(t,e){if(1&t&&(r.Yb(0,"div",1),r.Ic(1,Le,1,1,"div",2),r.Yb(2,"div"),r.Yb(3,"div",3),r.Yb(4,"div",4),r.Ic(5,Re,3,6,"div",5),r.Yb(6,"div",6),r.Ic(7,Ke,0,0,"ng-template",7),r.Ic(8,Ne,2,2,"ng-container",8),r.Ic(9,Ue,1,0,void 0,8),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&t){const t=r.kc();r.Hc("transform",t.offsetTransform)("z-index",t.nzZIndex),r.Jb("ant-drawer-open",t.isOpen)("ant-drawer-top","top"===t.nzPlacement)("ant-drawer-bottom","bottom"===t.nzPlacement)("ant-drawer-right","right"===t.nzPlacement)("ant-drawer-left","left"===t.nzPlacement),r.sc("nzNoAnimation",t.nzNoAnimation),r.Eb(1),r.sc("ngIf",t.nzMask),r.Eb(1),r.Hb("ant-drawer-content-wrapper ",t.nzWrapClassName,""),r.Hc("width",t.width)("height",t.height)("transform",t.transform),r.Eb(2),r.Hc("height",t.isLeftOrRight?"100%":null),r.Eb(1),r.sc("ngIf",t.nzTitle||t.nzClosable),r.Eb(1),r.sc("ngStyle",t.nzBodyStyle),r.Eb(2),r.sc("ngIf",t.isTemplateRef(t.nzContent)),r.Eb(1),r.sc("ngIf",!t.nzContent)}}const We=["*"];class Ge{}let Je=(()=>{class t extends Ge{constructor(t,e,n,i,s,o,c,a,l){super(),this.document=t,this.nzConfigService=e,this.renderer=n,this.overlay=i,this.injector=s,this.changeDetectorRef=o,this.focusTrapFactory=c,this.viewContainerRef=a,this.overlayKeyboardDispatcher=l,this.nzClosable=!0,this.nzNoAnimation=!1,this.nzKeyboard=!0,this.nzPlacement="right",this.nzMaskStyle={},this.nzBodyStyle={},this.nzWidth=256,this.nzHeight=256,this.nzZIndex=1e3,this.nzOffsetX=0,this.nzOffsetY=0,this.nzOnViewInit=new r.n,this.nzOnClose=new r.n,this.destroy$=new y.a,this.isOpen=!1,this.templateContext={$implicit:void 0,drawerRef:this},this.nzAfterOpen=new y.a,this.nzAfterClose=new y.a}set nzVisible(t){this.isOpen=t}get nzVisible(){return this.isOpen}get offsetTransform(){if(!this.isOpen||this.nzOffsetX+this.nzOffsetY===0)return null;switch(this.nzPlacement){case"left":return`translateX(${this.nzOffsetX}px)`;case"right":return`translateX(-${this.nzOffsetX}px)`;case"top":return`translateY(${this.nzOffsetY}px)`;case"bottom":return`translateY(-${this.nzOffsetY}px)`}}get transform(){if(this.isOpen)return null;switch(this.nzPlacement){case"left":return"translateX(-100%)";case"right":return"translateX(100%)";case"top":return"translateY(-100%)";case"bottom":return"translateY(100%)"}}get width(){return this.isLeftOrRight?Object(z.S)(this.nzWidth):null}get height(){return this.isLeftOrRight?null:Object(z.S)(this.nzHeight)}get isLeftOrRight(){return"left"===this.nzPlacement||"right"===this.nzPlacement}get afterOpen(){return this.nzAfterOpen.asObservable()}get afterClose(){return this.nzAfterClose.asObservable()}isTemplateRef(t){return t instanceof r.M}ngOnInit(){this.attachOverlay(),this.updateOverlayStyle(),this.updateBodyOverflow(),this.templateContext={$implicit:this.nzContentParams,drawerRef:this},this.changeDetectorRef.detectChanges()}ngAfterViewInit(){this.attachBodyContent(),setTimeout(()=>{this.nzOnViewInit.emit()})}ngOnChanges(t){t.hasOwnProperty("nzVisible")&&(t.nzVisible.currentValue?this.open():this.close())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.disposeOverlay()}getAnimationDuration(){return this.nzNoAnimation?0:300}close(t){this.isOpen=!1,this.updateOverlayStyle(),this.overlayKeyboardDispatcher.remove(this.overlayRef),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.updateBodyOverflow(),this.restoreFocus(),this.nzAfterClose.next(t),this.nzAfterClose.complete()},this.getAnimationDuration())}open(){this.isOpen=!0,this.overlayKeyboardDispatcher.add(this.overlayRef),this.updateOverlayStyle(),this.updateBodyOverflow(),this.savePreviouslyFocusedElement(),this.trapFocus(),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.nzAfterOpen.next()},this.getAnimationDuration())}closeClick(){this.nzOnClose.emit()}maskClick(){this.nzMaskClosable&&this.nzMask&&this.nzOnClose.emit()}attachBodyContent(){if(this.bodyPortalOutlet.dispose(),this.nzContent instanceof r.O){const t=new Q.d(this.injector,new WeakMap([[Ge,this]])),e=new Q.b(this.nzContent,null,t),n=this.bodyPortalOutlet.attachComponentPortal(e);Object.assign(n.instance,this.nzContentParams),n.changeDetectorRef.detectChanges()}}attachOverlay(){this.overlayRef||(this.portal=new Q.f(this.drawerTemplate,this.viewContainerRef),this.overlayRef=this.overlay.create(this.getOverlayConfig())),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.overlayRef.keydownEvents().pipe(Object(m.a)(this.destroy$)).subscribe(t=>{t.keyCode===Z.e&&this.isOpen&&this.nzKeyboard&&this.nzOnClose.emit()}))}disposeOverlay(){this.overlayRef&&this.overlayRef.dispose(),this.overlayRef=null}getOverlayConfig(){return new v.e({positionStrategy:this.overlay.position().global(),scrollStrategy:this.overlay.scrollStrategies.block()})}updateOverlayStyle(){this.overlayRef&&this.overlayRef.overlayElement&&this.renderer.setStyle(this.overlayRef.overlayElement,"pointer-events",this.isOpen?"auto":"none")}updateBodyOverflow(){this.overlayRef&&(this.isOpen?this.overlayRef.getConfig().scrollStrategy.enable():this.overlayRef.getConfig().scrollStrategy.disable())}savePreviouslyFocusedElement(){this.document&&!this.previouslyFocusedElement&&(this.previouslyFocusedElement=this.document.activeElement,this.previouslyFocusedElement&&"function"==typeof this.previouslyFocusedElement.blur&&this.previouslyFocusedElement.blur())}trapFocus(){!this.focusTrap&&this.overlayRef&&this.overlayRef.overlayElement&&(this.focusTrap=this.focusTrapFactory.create(this.overlayRef.overlayElement),this.focusTrap.focusInitialElement())}restoreFocus(){this.previouslyFocusedElement&&"function"==typeof this.previouslyFocusedElement.focus&&this.previouslyFocusedElement.focus(),this.focusTrap&&this.focusTrap.destroy()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(i.d,8),r.Sb(z.i),r.Sb(r.E),r.Sb(v.d),r.Sb(r.r),r.Sb(r.h),r.Sb(De.a),r.Sb(r.Q),r.Sb(v.f))},t.\u0275cmp=r.Mb({type:t,selectors:[["nz-drawer"]],viewQuery:function(t,e){var n;1&t&&(r.Gc(Fe,!0),r.Nc(Q.a,!0)),2&t&&(r.zc(n=r.hc())&&(e.drawerTemplate=n.first),r.zc(n=r.hc())&&(e.bodyPortalOutlet=n.first))},inputs:{nzClosable:"nzClosable",nzNoAnimation:"nzNoAnimation",nzKeyboard:"nzKeyboard",nzPlacement:"nzPlacement",nzMaskStyle:"nzMaskStyle",nzBodyStyle:"nzBodyStyle",nzWidth:"nzWidth",nzHeight:"nzHeight",nzZIndex:"nzZIndex",nzOffsetX:"nzOffsetX",nzOffsetY:"nzOffsetY",nzVisible:"nzVisible",nzContent:"nzContent",nzMaskClosable:"nzMaskClosable",nzMask:"nzMask",nzTitle:"nzTitle",nzWrapClassName:"nzWrapClassName"},outputs:{nzOnViewInit:"nzOnViewInit",nzOnClose:"nzOnClose"},exportAs:["nzDrawer"],features:[r.Bb,r.Cb()],ngContentSelectors:We,decls:2,vars:0,consts:[["drawerTemplate",""],[1,"ant-drawer",3,"nzNoAnimation"],["class","ant-drawer-mask",3,"ngStyle","click",4,"ngIf"],[1,"ant-drawer-content"],[1,"ant-drawer-wrapper-body"],[3,"ant-drawer-header","ant-drawer-header-no-title",4,"ngIf"],[1,"ant-drawer-body",3,"ngStyle"],["cdkPortalOutlet",""],[4,"ngIf"],[1,"ant-drawer-mask",3,"ngStyle","click"],["class","ant-drawer-title",4,"ngIf"],["aria-label","Close","class","ant-drawer-close",3,"click",4,"ngIf"],[1,"ant-drawer-title"],[4,"nzStringTemplateOutlet"],[3,"innerHTML"],["aria-label","Close",1,"ant-drawer-close",3,"click"],["nz-icon","","nzType","close"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(r.rc(),r.Ic(0,He,10,31,"ng-template",null,0,r.Jc))},directives:[z.m,i.k,i.l,Q.a,z.r,et.a,i.p],encapsulation:2,changeDetection:0}),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Boolean)],t.prototype,"nzClosable",void 0),Object(o.a)([Object(z.y)("drawer",!0),Object(z.d)(),Object(o.b)("design:type",Boolean)],t.prototype,"nzMaskClosable",void 0),Object(o.a)([Object(z.y)("drawer",!0),Object(z.d)(),Object(o.b)("design:type",Boolean)],t.prototype,"nzMask",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Object)],t.prototype,"nzNoAnimation",void 0),Object(o.a)([Object(z.d)(),Object(o.b)("design:type",Boolean)],t.prototype,"nzKeyboard",void 0),t})(),Ze=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)}}),t})(),Qe=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)},imports:[[i.c,v.g,Q.e,et.b,z.g,z.n,Ze]]}),t})();var tn=n("zAKX"),en=n("YqVT"),nn=n("nYR2"),sn=n("Iab2"),on=n("0bL0"),cn=n("iYJU"),rn=n("9uVP"),an=n("v+BZ"),ln=n("2r3b"),dn=n("AytR");let hn=(()=>{class t{constructor(t){this.http=t,this.url=dn.a.endpoints.api+"/tracks"}getAll(){return this.http.get(`${this.url}`).pipe()}getByCategories(){return this.http.get(`${this.url}/categories`).pipe()}}return t.\u0275fac=function(e){return new(e||t)(r.cc(gt.c))},t.\u0275prov=r.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var un=n("GKNv"),bn=n("dAYa"),pn=n("PScX");let gn=(()=>{class t{constructor(){this.icon="ban",this.iconColor="red"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Mb({type:t,selectors:[["sqy-if-not-icon"]],inputs:{value:"value",icon:"icon",iconColor:"iconColor"},decls:2,vars:6,consts:[[3,"hidden"]],template:function(t,e){1&t&&(r.Kc(0),r.Tb(1,"i",0)),2&t&&(r.Mc("",e.value," "),r.Eb(1),r.Ib("",e.icon," ",e.iconColor," icon"),r.sc("hidden",e.value&&0!=e.value))},encapsulation:2}),t})();function fn(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",10),r.gc("click",(function(n){r.Bc(t);const i=e.$implicit;return r.kc(2).changeColor(i)})),r.Xb()}2&t&&r.Hc("background",e.$implicit,r.Lb)}function mn(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",3),r.Yb(1,"div",4),r.Ic(2,fn,1,2,"div",5),r.Xb(),r.Yb(3,"div",6),r.Yb(4,"p"),r.Kc(5,"Hex Code"),r.Xb(),r.Yb(6,"div",7),r.Yb(7,"input",8,9),r.gc("keyup",(function(e){r.Bc(t);const n=r.Ac(8);return r.kc().changeColorManual(n.value)}))("keydown.enter",(function(e){return r.Bc(t),r.kc().toggleColors()})),r.Xb(),r.Xb(),r.Xb(),r.Xb()}if(2&t){const t=r.kc();r.Eb(2),r.sc("ngForOf",t.defaultColors),r.Eb(5),r.sc("value",t.color||null)}}let zn=(()=>{class t{constructor(){this.event=new r.n,this.show=!1,this.defaultColors=["#000105","#3e6158","#3f7a89","#96c582","#b7d5c4","#bcd6e7","#7c90c1","#9d8594","#dad0d8","#4b4fce","#4e0a77","#a367b5","#ee3e6d","#d63d62","#c6a670","#f46600","#cf0500","#efabbd","#8e0622","#f0b89a","#f0ca68","#62382f","#c97545","#c1800b"]}changeColor(t){this.color=t,this.event.emit(this.color),this.show=!1}changeColorManual(t){/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)&&(this.color=t,this.event.emit(this.color))}toggleColors(){this.show=!this.show}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Mb({type:t,selectors:[["sqy-color-picker"]],inputs:{heading:"heading",color:"color"},outputs:{event:"event"},decls:3,vars:2,consts:[[1,"color-picker"],["type","text","readonly","","name","track-color",3,"value","click"],["class","opened",4,"ngIf"],[1,"opened"],[1,"colors"],["class","circle",3,"background","click",4,"ngFor","ngForOf"],[1,"hex-code"],[1,"g-input"],["type","text","maxlength","7",3,"value","keyup","keydown.enter"],["paintInput",""],[1,"circle",3,"click"]],template:function(t,e){1&t&&(r.Yb(0,"div",0),r.Yb(1,"input",1),r.gc("click",(function(t){return e.toggleColors()})),r.Xb(),r.Ic(2,mn,9,2,"div",2),r.Xb()),2&t&&(r.Eb(1),r.sc("value",e.color||null),r.Eb(1),r.sc("ngIf",e.show))},directives:[i.k,i.j],styles:['.color-picker[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:40px;width:40px;box-sizing:border-box;border-radius:100%;cursor:pointer;border:1px solid #dadada;box-shadow:0 2px 4px 0 rgba(0,0,0,.14)}.color-picker[_ngcontent-%COMP%]   .opened[_ngcontent-%COMP%]{box-shadow:0 7px 13px 0 rgba(86,95,102,.07);background:#fff;max-width:240px;padding:15px;border-radius:5px;position:absolute;z-index:20;margin-top:15px}.color-picker[_ngcontent-%COMP%]   .opened[_ngcontent-%COMP%]:after{border:10px solid transparent;border-bottom-color:#fff;content:"";right:10px;position:absolute;top:-20px}.color-picker[_ngcontent-%COMP%]   .opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap}.color-picker[_ngcontent-%COMP%]   .opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{-webkit-box-flex:40px;flex:40px 0 0;margin-right:10px;margin-bottom:10px}.color-picker[_ngcontent-%COMP%]   .opened[_ngcontent-%COMP%]   .hex-code[_ngcontent-%COMP%]{display:-webkit-box;display:flex;margin-top:20px}.color-picker[_ngcontent-%COMP%]   .opened[_ngcontent-%COMP%]   .hex-code[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:50%;text-align:center;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;line-height:45px}.color-picker[_ngcontent-%COMP%]   .opened[_ngcontent-%COMP%]   .hex-code[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]{border:1px solid #e8ebed;height:45px;border-radius:5px;width:120px}.color-picker[_ngcontent-%COMP%]   .opened[_ngcontent-%COMP%]   .hex-code[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;width:100%;text-transform:uppercase;outline:none;text-align:center;letter-spacing:1.5px;color:#595b65;height:100%;border-radius:5px;margin:0;padding:0}']}),t})();function vn(t,e){1&t&&(r.Yb(0,"span",20),r.Kc(1,"Not a valid DNA sequence"),r.Xb())}const yn=function(t){return{error:t}};let kn=(()=>{class t{constructor(t){this.builder=t,this.onSave=new r.n,this.changePos=new r.n,this.display=!1,this._track=null,this.trackForm=this.builder.group({label:[""],color:[""],sequence:["",a.q.pattern(rn.a.dnaSeqRegex)]})}set track(t){t&&(this._track=t,this.max=this.max||this._track.pos,this.updateTrackForm(t),this.display=!0)}ngOnChanges(t){t.track.currentValue&&this.updateTrackForm(t.track.currentValue)}ngOnDestroy(){this._track=null}get label(){return this.trackForm.get("label")}get color(){return this.trackForm.get("color")}get sequence(){return this.trackForm.get("sequence")}updateTrackForm(t){this.trackForm.patchValue({label:t.label,color:t.color,sequence:t.sequence})}setColor(t){this.trackForm.value.color=t}onSubmit(){this.onSave.emit(this._track),this.display=!1}updateTrack(){this._track.label=this.trackForm.value.label,this._track.color=this.trackForm.value.color,this._track.sequence=this.trackForm.value.sequence,this.onSave.emit(this._track)}change(t){this.trackForm.touched&&this.trackForm.valid&&this.updateTrack(),t>-1&&t<this.max+1&&(this.changePos.emit(t),this.trackForm.reset())}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a.c))},t.\u0275cmp=r.Mb({type:t,selectors:[["sqy-track-details"]],inputs:{max:"max",track:"track"},outputs:{onSave:"onSave",changePos:"changePos"},features:[r.Cb()],decls:46,vars:17,consts:[[3,"nzVisible","nzWidth","nzOnClose"],[1,"ui","form",3,"formGroup","ngSubmit"],[1,"field"],[1,"ui","medium","circular","centered","image",3,"src"],[1,"ui","collapsing","inverted","blue","table","w-1-2","m-auto"],[1,"fields"],[1,"nine","wide","field"],["type","text","name","track-label","formControlName","label"],[1,"seven","wide","field"],[3,"color","heading","event"],[1,"required","field",3,"ngClass"],["name","track-seq","rows","8","cols","80","required","","formControlName","sequence"],["class","ui error",4,"ngIf"],[1,"bottom","three","fields"],["name","action","type","button",1,"ui","left","labeled","icon","primary","fluid","button",3,"disabled","click"],[1,"left","arrow","icon"],["name","action","type","submit",1,"ui","right","labeled","icon","secondary","fluid","button",3,"disabled"],[1,"save","icon"],["name","action","type","button",1,"ui","right","labeled","icon","primary","fluid","button",3,"disabled","click"],[1,"right","arrow","icon"],[1,"ui","error"]],template:function(t,e){1&t&&(r.Yb(0,"nz-drawer",0),r.gc("nzOnClose",(function(t){return e.display=!1})),r.Yb(1,"form",1),r.gc("ngSubmit",(function(t){return e.updateTrack()})),r.Yb(2,"div",2),r.Tb(3,"img",3),r.Xb(),r.Yb(4,"div",2),r.Yb(5,"table",4),r.Yb(6,"thead"),r.Yb(7,"tr"),r.Yb(8,"th"),r.Kc(9," Type "),r.Xb(),r.Yb(10,"th"),r.Kc(11," Position "),r.Xb(),r.Xb(),r.Xb(),r.Yb(12,"tbody"),r.Yb(13,"tr"),r.Yb(14,"td"),r.Kc(15),r.lc(16,"titlecase"),r.Xb(),r.Yb(17,"td"),r.Kc(18),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(19,"div",5),r.Yb(20,"div",6),r.Yb(21,"label"),r.Kc(22,"Label"),r.Xb(),r.Tb(23,"input",7),r.Xb(),r.Yb(24,"div",8),r.Yb(25,"label"),r.Kc(26,"Color"),r.Xb(),r.Yb(27,"sqy-color-picker",9),r.gc("event",(function(t){return e.setColor(t)})),r.Xb(),r.Xb(),r.Xb(),r.Yb(28,"div",10),r.Yb(29,"label"),r.Kc(30,"Sequence"),r.Xb(),r.Tb(31,"textarea",11),r.Ic(32,vn,2,0,"span",12),r.Xb(),r.Yb(33,"div",13),r.Yb(34,"div",2),r.Yb(35,"button",14),r.gc("click",(function(t){return e.change(e._track.pos-1)})),r.Tb(36,"i",15),r.Kc(37," Previous "),r.Xb(),r.Xb(),r.Yb(38,"div",2),r.Yb(39,"button",16),r.Tb(40,"i",17),r.Kc(41," Save "),r.Xb(),r.Xb(),r.Yb(42,"div",2),r.Yb(43,"button",18),r.gc("click",(function(t){return e.change(e._track.pos+1)})),r.Tb(44,"i",19),r.Kc(45," Next "),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&t&&(r.sc("nzVisible",e.display)("nzWidth",640),r.Eb(1),r.sc("formGroup",e.trackForm),r.Eb(2),r.sc("src",e._track.glyph_thumbnail,r.Dc),r.Eb(12),r.Lc(r.mc(16,13,e._track.type)),r.Eb(3),r.Mc("#",e._track.pos+1,""),r.Eb(9),r.sc("color",e._track.color)("heading","Color"),r.Eb(1),r.sc("ngClass",r.wc(15,yn,e.sequence.invalid&&(e.sequence.dirty||e.sequence.touched))),r.Eb(4),r.sc("ngIf",(null==e.sequence.errors?null:e.sequence.errors.pattern)&&(e.sequence.dirty||e.sequence.touched)),r.Eb(3),r.sc("disabled",e._track.pos+1<2),r.Eb(4),r.sc("disabled",!e.trackForm.dirty||e.trackForm.invalid),r.Eb(4),r.sc("disabled",e._track.pos+1===e.max))},directives:[Je,a.s,a.i,a.e,a.b,a.h,a.d,zn,i.i,a.o,i.k],pipes:[i.t],styles:[".ui.form[_ngcontent-%COMP%]{height:100%}.ui.form[_ngcontent-%COMP%]   .bottom.fields[_ngcontent-%COMP%]{width:100%;position:absolute;bottom:1rem}  .ant-drawer-body{height:100%}"]}),t})(),On=(()=>{class t{transform(t,e){return t?e?(e=e.toLowerCase(),t.filter(t=>[t.label||"",t.type||"",t.sequence||""].some(t=>t.toLowerCase().includes(e)))):t:[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Rb({name:"filterTracks",type:t,pure:!0}),t})();function Cn(t,e){1&t&&(r.Yb(0,"div",45),r.Tb(1,"i",63),r.Kc(2," Read only "),r.Xb())}function wn(t,e){1&t&&(r.Yb(0,"div",45),r.Tb(1,"i",64),r.Kc(2," Write mode "),r.Xb())}const Tn=function(t){return{invalid:t}},Mn=function(t){return{show:t}},Sn=function(t){return{disabled:t}},Pn=function(t,e,n){return{background:t,"border-bottom":e,"background-size":n}};function xn(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",65),r.gc("mouseover",(function(n){r.Bc(t);const i=e.$implicit;return r.kc(2).trackHovered=i}))("mouseout",(function(e){return r.Bc(t),r.kc(2).trackHovered=null})),r.Yb(1,"div",66),r.Yb(2,"div",67),r.Yb(3,"input",68,69),r.gc("ngModelChange",(function(n){return r.Bc(t),e.$implicit.label=n})),r.Xb(),r.Xb(),r.Yb(5,"div",70),r.Yb(6,"a",71),r.gc("click",(function(n){r.Bc(t);const i=e.index;return r.kc(2).moveTrack(i,-1)})),r.Tb(7,"i",72),r.Xb(),r.Yb(8,"a",71),r.gc("click",(function(n){r.Bc(t);const i=e.index;return r.kc(2).moveTrack(i,1)})),r.Tb(9,"i",73),r.Xb(),r.Yb(10,"a",71),r.gc("click",(function(n){r.Bc(t);const i=e.$implicit;return r.kc(2).removeTrack(i)})),r.Tb(11,"i",74),r.Xb(),r.Xb(),r.Xb(),r.Yb(12,"div",75),r.gc("click",(function(n){r.Bc(t);const i=e.$implicit,s=e.index;return r.kc(2).openSidebar(i,s)})),r.Xb(),r.Yb(13,"div",76),r.Kc(14),r.Xb(),r.Xb()}if(2&t){const t=e.$implicit,n=e.index,i=r.kc(2);r.Hc("width",i.zoom/5.5+"rem"),r.sc("ngClass",r.wc(13,Tn,t.invalid)),r.Eb(2),r.sc("ngClass",r.wc(15,Mn,t.label)),r.Eb(1),r.sc("ngModel",t.label)("disabled",i.locked),r.Eb(3),r.sc("ngClass",r.wc(17,Sn,i.locked||0===n)),r.Eb(2),r.sc("ngClass",r.wc(19,Sn,i.locked||n===(null==i.construct.tracks?null:i.construct.tracks.length)-1)),r.Eb(2),r.sc("ngClass",r.wc(21,Sn,i.locked)),r.Eb(2),r.sc("ngStyle",r.yc(23,Pn,"url("+t.glyph_thumbnail+")","1.5px solid "+t.color,"auto "+i.zoom+"%")),r.Fb("data-tooltip",t.name),r.Eb(1),r.sc("hidden",!i.showIndexes),r.Eb(1),r.Mc(" ",n+1," ")}}function Xn(t,e){if(1&t&&r.Tb(0,"nz-option",96),2&t){const t=e.$implicit;r.sc("nzLabel",t.name)("nzValue",t.tax_id)}}const Yn=function(t){return{error:t}};function In(t,e){if(1&t){const t=r.Zb();r.Yb(0,"form",77,78),r.gc("ngSubmit",(function(e){return r.Bc(t),r.kc(2).submit()})),r.Yb(2,"div",79),r.Yb(3,"label",80),r.Kc(4,"Required fields are shown with"),r.Xb(),r.Xb(),r.Yb(5,"div",79),r.Yb(6,"label",81),r.Kc(7,"Select organism"),r.Xb(),r.Yb(8,"nz-select",82),r.gc("ngModelChange",(function(e){return r.Bc(t),r.kc(2).specie.tax_id=e})),r.Ic(9,Xn,1,2,"nz-option",83),r.Xb(),r.Xb(),r.Yb(10,"div",84),r.Yb(11,"label",85),r.Kc(12,"Enter a label"),r.Xb(),r.Yb(13,"input",86,87),r.gc("ngModelChange",(function(e){return r.Bc(t),r.kc(2).construct.name=e})),r.Xb(),r.Xb(),r.Yb(15,"div",88),r.Yb(16,"label",89),r.Kc(17,"Circular"),r.Xb(),r.Yb(18,"input",90),r.gc("ngModelChange",(function(e){return r.Bc(t),r.kc(2).construct.circular=e})),r.Xb(),r.Xb(),r.Yb(19,"div",88),r.Yb(20,"label",91),r.Kc(21,"Description"),r.Xb(),r.Yb(22,"textarea",92),r.gc("ngModelChange",(function(e){return r.Bc(t),r.kc(2).construct.description=e})),r.Xb(),r.Xb(),r.Yb(23,"div",93),r.Yb(24,"button",94),r.Kc(25," Submit "),r.Tb(26,"i",95),r.Xb(),r.Xb(),r.Xb()}if(2&t){const t=r.Ac(1),e=r.Ac(14),n=r.kc(2);r.Eb(8),r.sc("ngModel",n.specie.tax_id)("nzLoading",n.isLoading)("nzDisabled",n.isLoading),r.Eb(1),r.sc("ngForOf",n.species),r.Eb(1),r.sc("ngClass",r.wc(9,Yn,e.invalid&&(e.dirty||e.touched))),r.Eb(3),r.sc("ngModel",n.construct.name),r.Eb(5),r.sc("ngModel",n.construct.circular),r.Eb(4),r.sc("ngModel",n.construct.description),r.Eb(2),r.sc("disabled",!(null!=n.construct.tracks&&n.construct.tracks.length)||t.invalid)}}function En(t,e){1&t&&(r.Yb(0,"tr"),r.Yb(1,"td",103),r.Kc(2,"The construct is empty. Add new tracks to visualize them here."),r.Xb(),r.Xb())}const jn=function(t){return{"no-color":t}};function Vn(t,e){if(1&t){const t=r.Zb();r.Yb(0,"tr"),r.Yb(1,"td"),r.Yb(2,"div",104),r.Kc(3),r.Xb(),r.Xb(),r.Yb(4,"td"),r.Tb(5,"sqy-if-not-icon",46),r.Xb(),r.Yb(6,"td"),r.Tb(7,"sqy-if-not-icon",46),r.Xb(),r.Yb(8,"td"),r.Tb(9,"sqy-if-not-icon",46),r.Xb(),r.Yb(10,"td",105),r.Yb(11,"a",106),r.gc("click",(function(n){r.Bc(t);const i=e.$implicit,s=e.index;return r.kc(3).openSidebar(i,s)})),r.Tb(12,"i",107),r.Xb(),r.Yb(13,"a",108),r.gc("click",(function(n){r.Bc(t);const i=e.index;return r.kc(3).moveTrack(i,-1)})),r.Tb(14,"i",109),r.Xb(),r.Yb(15,"a",110),r.gc("click",(function(n){r.Bc(t);const i=e.index;return r.kc(3).moveTrack(i,1)})),r.Tb(16,"i",111),r.Xb(),r.Yb(17,"a",112),r.gc("click",(function(n){r.Bc(t);const i=e.$implicit;return r.kc(3).removeTrack(i)})),r.Tb(18,"i",113),r.Xb(),r.Xb(),r.Xb()}if(2&t){const t=e.$implicit,n=e.index,i=r.kc(3);r.Eb(2),r.Hc("background-color",t.color),r.sc("ngClass",r.wc(11,jn,!t.color)),r.Eb(1),r.Mc("#",n+1,""),r.Eb(2),r.sc("value",t.label),r.Eb(2),r.sc("value",t.type),r.Eb(2),r.sc("value",null==t.sequence?null:t.sequence.length),r.Eb(2),r.sc("ngClass",r.wc(13,Sn,i.locked)),r.Eb(2),r.sc("ngClass",r.wc(15,Sn,i.locked||n<1)),r.Eb(2),r.sc("ngClass",r.wc(17,Sn,i.locked||n>=(null==i.construct.tracks?null:i.construct.tracks.length)-1)),r.Eb(2),r.sc("ngClass",r.wc(19,Sn,i.locked))}}function _n(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",97),r.Yb(1,"div",8),r.Yb(2,"div",98),r.Tb(3,"i",99),r.Yb(4,"input",100),r.gc("ngModelChange",(function(e){return r.Bc(t),r.kc(2).search=e})),r.Xb(),r.Xb(),r.Xb(),r.Yb(5,"div",8),r.Yb(6,"table",101),r.Yb(7,"thead"),r.Yb(8,"tr"),r.Tb(9,"th"),r.Yb(10,"th"),r.Kc(11," Label "),r.Xb(),r.Yb(12,"th"),r.Kc(13," Type "),r.Xb(),r.Yb(14,"th"),r.Kc(15," Size "),r.Xb(),r.Tb(16,"th"),r.Xb(),r.Xb(),r.Yb(17,"tbody"),r.Ic(18,En,3,0,"tr",3),r.Ic(19,Vn,19,21,"tr",102),r.lc(20,"filterTracks"),r.Xb(),r.Xb(),r.Xb(),r.Xb()}if(2&t){const t=r.kc(2);r.Eb(4),r.sc("ngModel",t.search),r.Eb(14),r.sc("ngIf",!(null!=t.construct.tracks&&t.construct.tracks.length)),r.Eb(1),r.sc("ngForOf",r.nc(20,3,t.construct.tracks,t.search))}}const Dn=function(t){return{"loading disabled":t}},Fn=function(t,e){return{primary:t,orange:e}},Ln=function(t){return{open:t}},An=function(t){return{"disabled loading":t}},Bn=function(t){return{active:t}};function $n(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",6),r.Yb(1,"div",7),r.Yb(2,"div",8),r.Yb(3,"div",9),r.Yb(4,"div",8),r.Yb(5,"div",10),r.Tb(6,"i",11),r.Yb(7,"nz-slider",12),r.gc("ngModelChange",(function(e){return r.Bc(t),r.kc().zoom=e})),r.Xb(),r.Tb(8,"i",11),r.Xb(),r.Xb(),r.Yb(9,"div",8),r.Yb(10,"button",13),r.gc("click",(function(e){return r.Bc(t),r.kc().exampleConstruct()})),r.Tb(11,"i",14),r.Xb(),r.Xb(),r.Yb(12,"div",8),r.Yb(13,"button",15),r.gc("click",(function(e){return r.Bc(t),r.kc().clear()})),r.Tb(14,"i",16),r.Xb(),r.Xb(),r.Yb(15,"div",8),r.Yb(16,"button",17),r.Tb(17,"i",18),r.Xb(),r.Yb(18,"nz-dropdown-menu",19,20),r.Yb(20,"div",21),r.Yb(21,"div",22),r.Kc(22," Show/Hide indexes "),r.Yb(23,"div",23),r.Yb(24,"input",24),r.gc("ngModelChange",(function(e){return r.Bc(t),r.kc().showIndexes=e})),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(25,"div",8),r.Yb(26,"button",25),r.gc("click",(function(e){return r.Bc(t),r.kc().showPicker=!0})),r.Tb(27,"i",26),r.Xb(),r.Xb(),r.Yb(28,"div",8),r.Yb(29,"button",27),r.gc("click",(function(e){r.Bc(t);const n=r.kc();return n.locked=!n.locked})),r.Tb(30,"i",28),r.Xb(),r.Xb(),r.Yb(31,"div",8),r.Yb(32,"button",29),r.Kc(33," Export as "),r.Tb(34,"i",30),r.Yb(35,"div",31),r.Yb(36,"a",32),r.Tb(37,"i",33),r.Kc(38," PNG/JPG "),r.Xb(),r.Yb(39,"a",34),r.gc("click",(function(e){return r.Bc(t),r.kc().downloadAs("GenBank")})),r.Tb(40,"i",35),r.Kc(41," GenBank "),r.Xb(),r.Yb(42,"a",36),r.gc("click",(function(e){return r.Bc(t),r.kc().downloadAs("Fasta")})),r.Tb(43,"i",35),r.Kc(44," Fasta "),r.Xb(),r.Yb(45,"a",32),r.Tb(46,"i",37),r.Kc(47," PDF "),r.Xb(),r.Yb(48,"a",36),r.gc("click",(function(e){return r.Bc(t),r.kc().downloadAs("Json")})),r.Tb(49,"i",38),r.Kc(50," JSON "),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(51,"div",39),r.Yb(52,"div",40),r.Yb(53,"div",41),r.Yb(54,"div",7),r.Yb(55,"div",42),r.Yb(56,"div",43),r.Yb(57,"div",44),r.Yb(58,"div",45),r.Yb(59,"label"),r.Kc(60,"Total tracks:"),r.Xb(),r.Kc(61),r.Xb(),r.Yb(62,"div",45),r.Yb(63,"label"),r.Kc(64,"Total length:"),r.Xb(),r.Kc(65),r.Xb(),r.Yb(66,"div",45),r.Yb(67,"label"),r.Kc(68,"From:"),r.Xb(),r.Tb(69,"sqy-if-not-icon",46),r.Xb(),r.Yb(70,"div",45),r.Yb(71,"label"),r.Kc(72,"To:"),r.Xb(),r.Tb(73,"sqy-if-not-icon",46),r.Xb(),r.Ic(74,Cn,3,0,"div",47),r.Ic(75,wn,3,0,"div",47),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(76,"div",7),r.Yb(77,"div",48),r.Yb(78,"div",49),r.Yb(79,"div",50),r.Kc(80," The construct is empty. To add new tracks click on button below. "),r.Xb(),r.Yb(81,"button",51),r.gc("click",(function(e){return r.Bc(t),r.kc().showPicker=!0})),r.Kc(82," Add tracks "),r.Xb(),r.Xb(),r.Yb(83,"div",52),r.Ic(84,xn,15,27,"div",53),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(85,"div",54),r.Yb(86,"div",55),r.Yb(87,"div",7),r.Yb(88,"div",56),r.Yb(89,"div",57),r.Yb(90,"a",58),r.gc("click",(function(e){return r.Bc(t),r.kc().view="general"})),r.Kc(91," General "),r.Xb(),r.Yb(92,"a",58),r.gc("click",(function(e){return r.Bc(t),r.kc().view="tracks"})),r.Kc(93," Tracks "),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(94,"div",7),r.Yb(95,"div",59),r.Ic(96,In,27,11,"form",60),r.Ic(97,_n,21,6,"div",61),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(98,"div",7),r.Yb(99,"div",8),r.Yb(100,"div",62),r.Yb(101,"p"),r.Kc(102," Centre for Genomic Regulation \xa9 "),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()}if(2&t){const t=r.Ac(19),e=r.kc();r.sc("ngClass",r.wc(30,Dn,e.sketcherLoading)),r.Eb(7),r.sc("nzMin",50)("nzMax",110)("nzTooltipVisible","never")("ngModel",e.zoom),r.Eb(3),r.sc("disabled",e.locked),r.Eb(3),r.sc("disabled",!(null!=e.construct.tracks&&e.construct.tracks.length)||e.locked),r.Eb(3),r.sc("nzDropdownMenu",t)("nzClickHide",!1)("disabled",e.isTracksLoading),r.Eb(8),r.sc("ngModel",e.showIndexes),r.Eb(2),r.sc("disabled",e.isTracksLoading||e.locked),r.Eb(3),r.sc("ngClass",r.xc(32,Fn,!e.locked,e.locked)),r.Fb("data-tooltip",e.locked?"Unlock":"Lock"),r.Eb(1),r.sc("ngClass",r.wc(35,Ln,!e.locked)),r.Eb(2),r.sc("disabled",!(null!=e.construct.tracks&&e.construct.tracks.length)),r.Eb(29),r.Mc(" ",null==e.construct.tracks?null:e.construct.tracks.length," "),r.Eb(4),r.Mc(" ",null==e.construct.sequence?null:e.construct.sequence.length," bps "),r.Eb(4),r.sc("value",null==e.trackHovered?null:e.trackHovered.start),r.Eb(4),r.sc("value",null==e.trackHovered?null:e.trackHovered.end),r.Eb(1),r.sc("ngIf",e.locked),r.Eb(1),r.sc("ngIf",!e.locked),r.Eb(3),r.sc("hidden",(null==e.construct.tracks?null:e.construct.tracks.length)||e.isLoading),r.Eb(3),r.sc("ngClass",r.wc(37,An,e.isTracksLoading)),r.Eb(2),r.sc("hidden",!(null!=e.construct.tracks&&e.construct.tracks.length)||e.isLoading),r.Eb(1),r.sc("ngForOf",e.construct.tracks),r.Eb(6),r.sc("ngClass",r.wc(39,Bn,"general"===e.view)),r.Eb(2),r.sc("ngClass",r.wc(41,Bn,"tracks"===e.view)),r.Eb(4),r.sc("ngIf","general"===e.view),r.Eb(1),r.sc("ngIf","tracks"===e.view)}}function Rn(t,e){if(1&t){const t=r.Zb();r.Yb(0,"sqy-track-details",114),r.gc("onSave",(function(e){return r.Bc(t),r.kc().addTrack(e)}))("changePos",(function(e){return r.Bc(t),r.kc().changeTrack(e)})),r.Xb()}if(2&t){const t=r.kc();r.sc("track",t.track)("max",null==t.construct.tracks?null:t.construct.tracks.length)}}function Kn(t,e){1&t&&(r.Yb(0,"a",126),r.Kc(1," \u2713 "),r.Xb())}const qn=function(t){return{selected:t}};function Nn(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",124),r.gc("mouseover",(function(n){r.Bc(t);const i=e.$implicit;return r.kc(3).hoveredName=i.name}))("mouseout",(function(e){return r.Bc(t),r.kc(3).hoveredName=null}))("click",(function(t){const n=e.$implicit;return n.selected=!n.selected})),r.Ic(1,Kn,2,0,"a",125),r.Xb()}if(2&t){const t=e.$implicit;r.Hc("background","url("+t.glyph_thumbnail+")",r.Lb),r.sc("ngClass",r.wc(4,qn,t.selected)),r.Eb(1),r.sc("ngIf",t.selected)}}function Un(t,e){if(1&t&&(r.Wb(0),r.Yb(1,"div",8),r.Yb(2,"div",121),r.Kc(3),r.Xb(),r.Xb(),r.Yb(4,"div",122),r.Ic(5,Nn,2,6,"div",123),r.Xb(),r.Vb()),2&t){const t=e.$implicit;r.Eb(3),r.Mc(" ",t.name," "),r.Eb(2),r.sc("ngForOf",t.elements)}}const Hn=function(t){return{loading:t}};function Wn(t,e){if(1&t){const t=r.Zb();r.Wb(0),r.Yb(1,"div",115),r.Yb(2,"div",8),r.Yb(3,"div",116),r.Yb(4,"div",66),r.Kc(5," Instructions "),r.Xb(),r.Yb(6,"ul",117),r.Yb(7,"li"),r.Kc(8,"Click on each track to selected or deselect it."),r.Xb(),r.Yb(9,"li"),r.Kc(10,"Hover the mouse over a track to display name"),r.Xb(),r.Yb(11,"li"),r.Kc(12,"Tracks will be added in selection order"),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(13,"div",118),r.Kc(14),r.Yb(15,"div",119),r.Yb(16,"input",120),r.gc("click",(function(e){return r.Bc(t),r.kc().toggleSelection(e)})),r.Xb(),r.Yb(17,"label"),r.Kc(18,"Select all"),r.Xb(),r.Xb(),r.Xb(),r.Ic(19,Un,6,2,"ng-container",102),r.Xb(),r.Vb()}if(2&t){const t=r.kc();r.Eb(1),r.sc("ngClass",r.wc(3,Hn,t.isLoading)),r.Eb(13),r.Mc(" ",t.hoveredName," "),r.Eb(5),r.sc("ngForOf",t.categories)}}const Gn=function(t,e){return{"green check":t,"times red":e}};function Jn(t,e){if(1&t&&(r.Yb(0,"div",127),r.Yb(1,"div",8),r.Yb(2,"h2",128),r.Tb(3,"i",129),r.Yb(4,"div",130),r.Kc(5),r.Xb(),r.Xb(),r.Xb(),r.Yb(6,"div",8),r.Yb(7,"p"),r.Kc(8,"Your job has been submitted successfully. In a few moments you will be redirected to your history. Once finished the work or you can visualize the results. Please be patient."),r.Xb(),r.Xb(),r.Yb(9,"div",8),r.Yb(10,"div",121),r.Kc(11," Summary "),r.Xb(),r.Xb(),r.Yb(12,"div",8),r.Yb(13,"table",131),r.Yb(14,"thead"),r.Yb(15,"tr"),r.Yb(16,"th"),r.Kc(17,"Label"),r.Xb(),r.Yb(18,"th"),r.Kc(19,"Specie"),r.Xb(),r.Yb(20,"th"),r.Kc(21,"Total tracks"),r.Xb(),r.Yb(22,"th"),r.Kc(23,"Circular"),r.Xb(),r.Xb(),r.Xb(),r.Yb(24,"tbody"),r.Yb(25,"tr"),r.Yb(26,"td"),r.Kc(27),r.Xb(),r.Yb(28,"td"),r.Kc(29),r.Xb(),r.Yb(30,"td"),r.Kc(31),r.Xb(),r.Yb(32,"td"),r.Tb(33,"i",132),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&t){const t=r.kc();r.Eb(5),r.Mc(' Your construct: "',t.construct.name,'" has been submitted! '),r.Eb(22),r.Mc(" ",null==t.history?null:null==t.history.construct?null:t.history.construct.name," "),r.Eb(2),r.Mc(" ",null==t.history?null:null==t.history.construct?null:t.history.construct.specie.name," "),r.Eb(2),r.Mc(" ",null==t.history?null:null==t.history.construct?null:t.history.construct.n_tracks," "),r.Eb(2),r.sc("ngClass",r.xc(5,Gn,null==t.history?null:t.history.construct.circular,!(null!=t.history&&t.history.construct.circular)))}}let Zn=(()=>{class t{constructor(t,e,n,i,s,o,c){this.route=t,this.specieSrvc=e,this.trackSrvc=n,this.constructSrvc=i,this.sqrutinySrvc=s,this.router=o,this.notify=c,this.tracks=[],this.track=null,this.history=null,this.trackHovered=null,this.hoveredName=null,this.isLoading=!1,this.response=null,this.categories=[],this.specie=new on.a,this.species=[],this.submitted=!1,this.showPicker=!1,this.zoom=75,this.isTracksLoading=!1,this.construct=new an.a,this.showIndexes=!0,this.view="general",this.locked=!1,this.sketcherLoading=!1,this.construct.tracks=[],this.construct.sequence=""}ngOnInit(){this.isLoading=!0,this.sub=this.route.queryParams.subscribe(t=>{this.construct.id=t.id||null,this.specie.slug=t.specie||null}),this.specie.slug&&this.getSpecie(),this.construct.id?this.getConstruct():this.new(),this.getTracks(),this.getSpecies()}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}getSpecie(){this.isLoading=!0,this.specieSrvc.getBySlug(this.specie).pipe(Object(nn.a)(()=>this.isLoading=!1)).subscribe(t=>this.specie.deserialize(t))}getConstruct(){this.construct.id&&(this.sketcherLoading=!0,this.constructSrvc.getById(this.construct.id).pipe(Object(nn.a)(()=>this.sketcherLoading=!1)).subscribe(t=>this.construct=(new an.a).deserialize(t)))}getExampleConstruct(){this.sketcherLoading=!0,this.constructSrvc.getExample().subscribe(t=>t.length?this.construct=(new an.a).deserialize(t[0]):this.notify.warning("Unable to load model construct"),t=>this.notify.warning(t||"Unable to load model construct"),()=>this.sketcherLoading=!1)}getSpecies(){this.isLoading=!0,this.specieSrvc.getAll().pipe(Object(nn.a)(()=>this.isLoading=!1)).subscribe(t=>this.species=t.map(t=>{const e=(new on.a).deserialize(t);return e.default&&!this.specie.slug&&(this.specie=Object.assign({},e)),e}))}getTracksByCategories(){this.isLoading=!0,this.trackSrvc.getByCategories().pipe(Object(nn.a)(()=>this.isLoading=!1)).subscribe(t=>this.categories=t)}getTracks(){this.isLoading=!0,this.trackSrvc.getAll().pipe(Object(nn.a)(()=>this.isLoading=!1)).subscribe(t=>{this.tracks=t,this.new()})}new(){this.tracks.some(t=>t.default)&&(this.construct.tracks=[Object.assign({},this.tracks.find(t=>t.default))])}clear(){confirm("Are you sure you want to clear all tracks from construct? These action cannot be reverted.")&&(this.construct.tracks=[],this.construct.sequence="")}removeTrack(t){const e=this.construct.tracks.indexOf(t);-1!==e&&this.construct.tracks.splice(e,1)}someSelected(){return this.categories.some(t=>t.elements.some(t=>t.selected))}addTracks(){this.someSelected()&&!this.locked&&(this.categories.map(t=>{t.elements.map(t=>{t.selected&&(t.selected=!1,this.construct.tracks.push(Object.assign({},t)))})}),this.showPicker=!1)}exampleConstruct(){let t=!0;this.construct.tracks.length>0&&(confirm("You really want to load an example construct? You're gonna lose all actual data. Proceed?")||(t=!1)),t&&this.getExampleConstruct()}submit(){this.checkTracks()&&(this.response=null,this.sketcherLoading=!0,this.construct.specie_tax_id=this.specie.tax_id,this.sqrutinySrvc.fromSketch(this.construct).subscribe(t=>{this.history=(new cn.a).deserialize(t),this.submitted=!0,setTimeout(()=>{this.submitted=!1,this.router.navigate(["/workspace",this.history.id])},3e3)},t=>this.notify.error(t),()=>this.sketcherLoading=!1))}openSidebar(t,e){this.locked||(this.track=Object.assign({},t),this.track.pos=e)}addTrack(t){t.pos>-1&&(this.construct.tracks[t.pos]=t,this.construct.tracks[t.pos].start=this.construct.sequence.length+1,this.construct.tracks[t.pos].end=this.construct.sequence.length+t.sequence.length,this.construct.sequence+=t.sequence,delete this.construct.tracks[t.pos].invalid),this.track=null}changeTrack(t){t>-1&&this.construct.tracks[t]&&this.openSidebar(this.construct.tracks[t],t)}moveTrack(t,e){const n=t+e;-1<n&&n<=this.construct.tracks.length-1&&(this.construct.tracks=rn.a.array_move(this.construct.tracks,t,n))}checkTracks(){let t=!0;return this.construct.tracks.map(e=>{e.sequence||(e.invalid=!0,t=!1)}),t}toggleSelection(t){this.categories.map(e=>e.elements.map(e=>e.selected=t.target.checked))}downloadAs(t){if(this.construct.tracks.length){let e,n;switch(t.toUpperCase()){case"GENBANK":e=rn.a.jsonToGenbank(this.construct),n="gbk";break;case"FASTA":e=rn.a.jsonToFasta([this.construct]),n="fasta";break;case"XLSX":break;case"JSON":e=JSON.stringify({construct:this.construct}),n="json"}if(e){const i=new Blob([e],{type:"text/plain;charset=utf-8"});Object(sn.saveAs)(i,`SQrutiny_${this.construct.name||"untitled"}.${n}`),this.notify.success(`Exported to ${t}!`)}else this.notify.error("Unable to export")}}canDeactivate(){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(nt.a),r.Sb(ln.a),r.Sb(hn),r.Sb(un.a),r.Sb(bn.a),r.Sb(nt.c),r.Sb(pn.b))},t.\u0275cmp=r.Mb({type:t,selectors:[["sqy-sketcher"]],decls:6,vars:13,consts:[["class","ui basic segment internally celled grid sketcher",3,"ngClass",4,"ngIf"],[3,"track","max","onSave","changePos",4,"ngIf"],["nzWrapClassName","vertical-center-modal","nzTitle","Choose tracks","nzOkText","Add",3,"nzVisible","nzOkLoading","nzOkDisabled","nzVisibleChange","nzAfterOpen","nzOnCancel","nzOnOk"],[4,"ngIf"],[3,"nzFooter","nzWidth","nzKeyboard","nzMaskClosable","nzVisible","nzClosable","nzVisibleChange","nzOnCancel"],["class","ui very padded one column grid",4,"ngIf"],[1,"ui","basic","segment","internally","celled","grid","sketcher",3,"ngClass"],[1,"row"],[1,"column"],[1,"ui","equal","width","center","aligned","middle","aligned","container","grid"],[1,"slider-wraper"],[1,"zoom-in","icon"],[3,"nzMin","nzMax","nzTooltipVisible","ngModel","ngModelChange"],["data-inverted","","data-tooltip","Load example construct","data-position","bottom center",1,"ui","circular","icon","primary","button",3,"disabled","click"],[1,"database","icon"],["data-inverted","","data-tooltip","Clear construct","data-position","bottom center",1,"ui","circular","icon","primary","button",3,"disabled","click"],[1,"eraser","icon"],["nz-dropdown","","nzTrigger","click","nzOverlayClassName","ui settings dropdown","nzPlacement","bottomCenter",1,"ui","circular","icon","primary","button",3,"nzDropdownMenu","nzClickHide","disabled"],[1,"eye","icon"],["tabindex","0"],["settingsMenu","nzDropdownMenu"],["tabindex","-1",1,"ui","vertical","menu","transition","visible",2,"display","block !important"],[1,"item"],[1,"description"],["type","checkbox",3,"ngModel","ngModelChange"],["data-inverted","","data-tooltip","Add tracks","data-position","bottom center",1,"ui","circular","icon","primary","button",3,"disabled","click"],[1,"plus","icon"],["data-inverted","","data-position","bottom center",1,"ui","circular","icon","button",3,"ngClass","click"],[1,"lock","icon",3,"ngClass"],["type","button",1,"ui","primary","right","labeled","icon","button","simple","dropdown",3,"disabled"],[1,"dropdown","icon"],[1,"menu"],[1,"item","disabled"],[1,"file","icon"],[1,"item","disabled",3,"click"],[1,"dna","icon"],[1,"item",3,"click"],[1,"pdf","file","outline","icon"],[1,"file","code","icon"],[1,"row","canvas"],[1,"twelve","wide","column","p-0"],[1,"ui","internally","celled","grid","m-0"],[1,"column","top-details-bar"],[1,"ui","form"],[1,"inline","four","fields","m-0"],[1,"inline","field","txt-c"],[3,"value"],["class","inline field txt-c",4,"ngIf"],[1,"column","construct"],[1,"ui","placeholder","segment","h-1-1",3,"hidden"],[1,"ui","icon","header"],["type","button",1,"ui","primary","button",3,"ngClass","click"],[1,"strand",3,"hidden"],["class","track",3,"width","ngClass","mouseover","mouseout",4,"ngFor","ngForOf"],[1,"four","wide","column"],[1,"ui","grid"],[1,"sixteen","wide","column"],[1,"ui","two","item","secondary","pointing","menu"],[1,"item",3,"ngClass","click"],[1,"sixteen","wide","column",2,"height","80vh","overflow","auto"],["class","ui form",3,"ngSubmit",4,"ngIf"],["class","ui one column grid",4,"ngIf"],[1,"credits"],[1,"lock","icon"],[1,"pencil","alternate","icon"],[1,"track",3,"ngClass","mouseover","mouseout"],[1,"header"],[1,"ui","fluid","transparent","large","input",3,"ngClass"],["type","text","name","track-label","placeholder","(label)",3,"ngModel","disabled","ngModelChange"],["trackLabel","ngModel"],[1,"actions"],[3,"ngClass","click"],[1,"left","arrow","link","icon"],[1,"right","arrow","link","icon"],[1,"trash","red","link","icon"],["data-inverted","","data-position","bottom center",1,"image",3,"ngStyle","click"],[1,"index",3,"hidden"],[1,"ui","form",3,"ngSubmit"],["constructForm","ngForm"],[1,"required","field"],[1,"required-msg"],["for","construct_specie"],["name","construct-specie","required","","nzShowSearch","",3,"ngModel","nzLoading","nzDisabled","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"required","field",3,"ngClass"],["for","construct_name"],["type","text","placeholder","Label / Name","id","construct_name","name","construct-name","required","",1,"transparent",3,"ngModel","ngModelChange"],["name","ngModel"],[1,"inline","field"],["for",""],["type","checkbox","name","construct-circular",3,"ngModel","ngModelChange"],["for","construct_description"],["id","construct_description","name","construct-description","rows","8","cols","80",3,"ngModel","ngModelChange"],[1,"field"],["type","submit",1,"ui","secondary","right","labeled","fluid","icon","button",3,"disabled"],[1,"angle","right","icon"],[3,"nzLabel","nzValue"],[1,"ui","one","column","grid"],[1,"ui","fluid","icon","input"],[1,"search","icon"],["type","text","placeholder","Search by label / type / sequence...",3,"ngModel","ngModelChange"],[1,"ui","blue","definition","table"],[4,"ngFor","ngForOf"],["colspan","5",1,"txt-c"],[1,"ui","circular","label",3,"ngClass"],[1,"center","aligned"],["data-inverted","","data-tooltip","Open","data-position","top center",3,"ngClass","click"],[1,"edit","icon"],["data-inverted","","data-tooltip","Move up","data-position","top center",3,"ngClass","click"],[1,"arrow","up","icon"],["data-inverted","","data-tooltip","Move down","data-position","top center",3,"ngClass","click"],[1,"arrow","down","icon"],["data-inverted","","data-tooltip","Delete","data-position","top center",3,"ngClass","click"],[1,"x","red","icon"],[3,"track","max","onSave","changePos"],[1,"ui","basic","segment","one","column","grid","track-picker","mt-0",3,"ngClass"],[1,"ui","message"],[1,"list"],[1,"column","hov-track"],[1,"ui","checkbox","option"],["type","checkbox",3,"click"],[1,"ui","horizontal","divider"],[1,"eight","column","row"],["class","column track",3,"ngClass","background","mouseover","mouseout","click",4,"ngFor","ngForOf"],[1,"column","track",3,"ngClass","mouseover","mouseout","click"],["class","floating ui blue label",4,"ngIf"],[1,"floating","ui","blue","label"],[1,"ui","very","padded","one","column","grid"],[1,"ui","icon","center","aligned","header"],[1,"spinner","loading","icon"],[1,"content"],[1,"ui","blue","small","inverted","table"],[1,"icon",3,"ngClass"]],template:function(t,e){1&t&&(r.Ic(0,$n,103,43,"div",0),r.Ic(1,Rn,1,2,"sqy-track-details",1),r.Yb(2,"nz-modal",2),r.gc("nzVisibleChange",(function(t){return e.showPicker=t}))("nzAfterOpen",(function(t){return e.getTracksByCategories()}))("nzOnCancel",(function(t){return e.showPicker=!1}))("nzOnOk",(function(t){return e.addTracks()})),r.Ic(3,Wn,20,5,"ng-container",3),r.Xb(),r.Yb(4,"nz-modal",4),r.gc("nzVisibleChange",(function(t){return e.submitted=t}))("nzOnCancel",(function(t){return e.submitted=!1})),r.Ic(5,Jn,34,8,"div",5),r.Xb()),2&t&&(r.sc("ngIf",!e.isLoading),r.Eb(1),r.sc("ngIf",e.track),r.Eb(1),r.sc("nzVisible",e.showPicker)("nzOkLoading",e.isLoading)("nzOkDisabled",!e.someSelected()),r.Eb(1),r.sc("ngIf",e.showPicker),r.Eb(1),r.sc("nzFooter",null)("nzWidth",800)("nzKeyboard",!1)("nzMaskClosable",!1)("nzVisible",e.submitted)("nzClosable",!1),r.Eb(1),r.sc("ngIf",e.history))},directives:[i.k,s.a,i.i,$,a.h,a.k,dt,lt,a.a,gn,i.j,a.b,i.l,a.s,a.i,a.j,tn.b,a.o,tn.a,kn],pipes:[On],styles:['.sketcher[_ngcontent-%COMP%]{max-height:100vh;max-width:100vw;margin-top:var(--top-margin)!important}.sketcher[_ngcontent-%COMP%]   .slider-wraper[_ngcontent-%COMP%]{position:relative;padding:0 2.5rem}.sketcher[_ngcontent-%COMP%]   .slider-wraper[_ngcontent-%COMP%]   i.icon[_ngcontent-%COMP%]{position:absolute;top:-2px;line-height:1;font-size:15px;color:rgba(0,0,0,.45)}.sketcher[_ngcontent-%COMP%]   .slider-wraper[_ngcontent-%COMP%]   i.icon[_ngcontent-%COMP%]:first-child{left:0}.sketcher[_ngcontent-%COMP%]   .slider-wraper[_ngcontent-%COMP%]   i.icon[_ngcontent-%COMP%]:last-child{right:0}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]{height:90vh}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .top-details-bar[_ngcontent-%COMP%]{padding:.3em 1em}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .construct[_ngcontent-%COMP%]{min-height:75vh;max-height:85vh;overflow-y:auto}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]{width:100%;display:inline-block}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]{display:inline-block;min-width:2rem;position:relative;-webkit-box-align:center;align-items:center;border-bottom:1.5px solid #ccc;margin-bottom:4rem}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track.invalid[_ngcontent-%COMP%]{background-color:#ffe8ec}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]:not(:first-child){border-left:2px dashed #ccc}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .index[_ngcontent-%COMP%]{position:absolute;bottom:-3.2em;width:100%;text-align:center;font-weight:700;color:#ddd}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .index[_ngcontent-%COMP%]:before{position:absolute;z-index:2;content:"|";top:-2em;right:50%}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:1em;width:100%;font-size:.8rem}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#888;text-align:center}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{visibility:hidden;position:absolute;top:0;right:0;font-size:1.1rem}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   div.image[_ngcontent-%COMP%]{cursor:pointer;font-size:1em!important;left:0;width:100%!important;line-height:.8em!important;height:5.5em!important;background-repeat:no-repeat!important;background-position:50% 100%!important;z-index:3}.sketcher[_ngcontent-%COMP%]   .canvas[_ngcontent-%COMP%]   .construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]:hover > .header[_ngcontent-%COMP%] > .actions[_ngcontent-%COMP%]{visibility:visible}.sketcher[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%]{text-align:center}.sketcher[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:transparent;background:#bdbdbd;-webkit-background-clip:text;-moz-background-clip:text;background-clip:text;text-shadow:0 3px 3px hsla(0,0%,100%,.5)}.show[_ngcontent-%COMP%]{visibility:visible!important}  .ant-slider-track{background-color:var(--main-color)}  .ant-slider-handle{border-color:var(--main-color)}  .ant-dropdown.nz-dropdown{margin-top:17px!important}  .ui.settings.dropdown .menu{position:relative!important}  .vertical-center-modal{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}  .vertical-center-modal .ant-modal{width:1000px!important;top:0}  .vertical-center-modal .ant-modal .ant-modal-body{max-height:calc(90vh - 5em);overflow:auto}  .vertical-center-modal .ant-modal .ant-modal-body .track-picker{min-height:500px}  .vertical-center-modal .ant-modal .ant-modal-body .track-picker .column.track{z-index:100!important;height:4.5em!important;margin:.4em!important;border:.3px solid #eee!important;box-shadow:1px 1px 1px #eee!important;background-size:auto 100%!important;background-repeat:no-repeat!important;background-position:50% 100%!important;cursor:pointer!important}  .vertical-center-modal .ant-modal .ant-modal-body .track-picker .column.track.selected{border:2px solid #079ace!important;border-radius:2px;box-shadow:1px 1px 1px #eee!important}  .vertical-center-modal .ant-modal .ant-modal-body .track-picker .hov-track{height:1em;text-align:center;color:grey;font-weight:700}  .vertical-center-modal .ant-modal .ant-modal-body .track-picker .hov-track .option{position:absolute;right:0;top:50%}  .vertical-center-modal .ant-modal .ant-modal-body .track-picker .ui.horizontal.divider{font-weight:400;color:grey}.required-msg[_ngcontent-%COMP%]{font-weight:400!important}.ui.circular.label[_ngcontent-%COMP%]{font-weight:700}.ui.circular.label[_ngcontent-%COMP%]:not(.no-color){color:#fff!important}.ui.circular.label.no-color[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}']}),t})();var Qn=n("IRNp");function ti(t,e){if(1&t&&(r.Yb(0,"option",46),r.Kc(1),r.Xb()),2&t){const t=e.$implicit;r.sc("ngValue",t.tax_id),r.Eb(1),r.Lc(t.name)}}const ei=function(t){return{error:t}},ni=function(t,e){return{"check green":t,"times red":e}};function ii(t,e){if(1&t){const t=r.Zb();r.Wb(0),r.Yb(1,"div",29),r.Yb(2,"label",30),r.Kc(3,"Required fields are shown with"),r.Xb(),r.Xb(),r.Yb(4,"div",29),r.Yb(5,"label",31),r.Kc(6,"Select organism"),r.Xb(),r.Yb(7,"select",32),r.gc("ngModelChange",(function(e){return r.Bc(t),r.kc(2).specie.tax_id=e})),r.Ic(8,ti,2,2,"option",33),r.Xb(),r.Xb(),r.Yb(9,"div",34),r.Yb(10,"label",35),r.Kc(11,"Enter a label"),r.Xb(),r.Yb(12,"input",36,37),r.gc("ngModelChange",(function(e){return r.Bc(t),r.kc(2).construct.name=e})),r.Xb(),r.Xb(),r.Yb(14,"div",38),r.Yb(15,"label"),r.Kc(16,"Circular"),r.Xb(),r.Tb(17,"i",39),r.Xb(),r.Yb(18,"div",40),r.gc("click",(function(e){r.Bc(t);const n=r.kc(2);return n.textModal(n.construct.dna_seq)})),r.Yb(19,"label"),r.Kc(20,"DNA sequence"),r.Xb(),r.Yb(21,"span",41),r.Kc(22),r.Xb(),r.Yb(23,"p",42),r.Kc(24),r.Xb(),r.Xb(),r.Yb(25,"div",38),r.Yb(26,"label",43),r.Kc(27,"Description"),r.Xb(),r.Yb(28,"textarea",44,45),r.gc("ngModelChange",(function(e){return r.Bc(t),r.kc(2).construct.description=e})),r.Xb(),r.Xb(),r.Vb()}if(2&t){const t=r.Ac(13),e=r.kc(2);r.Eb(7),r.sc("ngModel",e.specie.tax_id),r.Eb(1),r.sc("ngForOf",e.species),r.Eb(1),r.sc("ngClass",r.wc(8,ei,t.invalid&&(t.dirty||t.touched))),r.Eb(3),r.sc("ngModel",e.construct.name),r.Eb(5),r.sc("ngClass",r.xc(10,ni,e.construct.circular,!e.construct.circular)),r.Eb(5),r.Mc("",e.construct.dna_seq.length," bps"),r.Eb(2),r.Lc(e.construct.dna_seq),r.Eb(4),r.sc("ngModel",e.construct.description)}}const si=function(t){return{"no-color":t}};function oi(t,e){if(1&t&&(r.Yb(0,"tr"),r.Yb(1,"td"),r.Yb(2,"div",50),r.Kc(3),r.Xb(),r.Xb(),r.Yb(4,"td"),r.Kc(5),r.Xb(),r.Yb(6,"td"),r.Kc(7),r.Xb(),r.Yb(8,"td"),r.Kc(9),r.Xb(),r.Yb(10,"td"),r.Kc(11),r.Xb(),r.Yb(12,"td"),r.Kc(13),r.Xb(),r.Xb()),2&t){const t=e.$implicit,n=e.index;r.Eb(2),r.Hc("background-color",t.color),r.sc("ngClass",r.wc(9,si,!t.color)),r.Eb(1),r.Mc("#",n+1,""),r.Eb(2),r.Mc(" ",t.label," "),r.Eb(2),r.Mc(" ",t.type," "),r.Eb(2),r.Mc(" ",t.start," "),r.Eb(2),r.Mc(" ",t.end," "),r.Eb(2),r.Mc(" ",null==t.sequence?null:t.sequence.length," ")}}function ci(t,e){if(1&t&&(r.Wb(0),r.Yb(1,"div",47),r.Yb(2,"table",48),r.Yb(3,"thead"),r.Yb(4,"tr"),r.Tb(5,"th"),r.Yb(6,"th"),r.Kc(7," Label "),r.Xb(),r.Yb(8,"th"),r.Kc(9," Type "),r.Xb(),r.Yb(10,"th"),r.Kc(11," Start "),r.Xb(),r.Yb(12,"th"),r.Kc(13," End "),r.Xb(),r.Yb(14,"th"),r.Kc(15," Size "),r.Xb(),r.Xb(),r.Xb(),r.Yb(16,"tbody"),r.Ic(17,oi,14,11,"tr",49),r.lc(18,"filterTracks"),r.Xb(),r.Xb(),r.Xb(),r.Vb()),2&t){const t=r.kc(2);r.Eb(17),r.sc("ngForOf",r.nc(18,1,t.construct.tracks,t.search))}}const ri=function(t){return{active:t}},ai=function(t){return{"loading disabled":t}};function li(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",18),r.Yb(1,"div",19),r.Yb(2,"div",20),r.Yb(3,"a",21),r.gc("click",(function(e){return r.Bc(t),r.kc().view=!0})),r.Kc(4," Information "),r.Xb(),r.Yb(5,"a",21),r.gc("click",(function(e){return r.Bc(t),r.kc().view=!1})),r.Kc(6," Tracks "),r.Xb(),r.Xb(),r.Xb(),r.Yb(7,"div",22),r.Yb(8,"form",23,24),r.gc("ngSubmit",(function(e){return r.Bc(t),r.kc().submit()})),r.Ic(10,ii,30,13,"ng-container",25),r.Ic(11,ci,19,4,"ng-container",25),r.Yb(12,"div",26),r.Yb(13,"button",27),r.Kc(14," Submit "),r.Tb(15,"i",28),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb()}if(2&t){const t=r.Ac(9),e=r.kc();r.Eb(3),r.sc("ngClass",r.wc(6,ri,e.view)),r.Eb(2),r.sc("ngClass",r.wc(8,ri,!e.view)),r.Eb(3),r.sc("ngClass",r.wc(10,ai,e.isSubmitting)),r.Eb(2),r.sc("ngIf",e.view),r.Eb(1),r.sc("ngIf",!e.view),r.Eb(2),r.sc("disabled",!(null!=e.construct.tracks&&e.construct.tracks.length)||t.invalid)}}let di=(()=>{class t{constructor(t,e,n,i,s,o,c){this.route=t,this.specieSrvc=e,this.sqrutinySrvc=n,this.router=i,this.notify=s,this.http=o,this.modal=c,this.response=null,this.specie=null,this.species=[],this.isLoading=!1,this.construct=null,this.history=null,this.exampleFile="assets/files/NC_044937.gbk",this.fileList=[],this.view=!0,this.isSubmitting=!1,this.customReq=t=>{this.fileList=[t.file];const e=new FormData;e.append("file",t.file);const n=new gt.g("POST",t.action,e,{reportProgress:!0,withCredentials:!0});return this.construct=null,this.http.request(n).subscribe(e=>{e.type===gt.e.UploadProgress?(e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e,t.file)):e instanceof gt.h&&(t.file.status="done",t.onSuccess(e.body,t.file,e),this.construct=(new an.a).deserialize(e.body),this.notify.success("GenBank file parsed successfully!"))},e=>t.onError({statusText:e},t.file))},this.endpoint=dn.a.endpoints.api+"/constructs/from-genbank"}ngOnInit(){this.sub=this.route.queryParams.subscribe(t=>{t.specie&&(this.specie=new on.a),this.specie.slug=t.specie||null}),this.specie&&this.getSpecie(),this.getSpecies()}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}getSpecie(){this.isLoading=!0,this.specieSrvc.getBySlug(this.specie).pipe(Object(nn.a)(()=>this.isLoading=!1)).subscribe(t=>this.specie.deserialize(t))}getSpecies(){this.isLoading=!0,this.specieSrvc.getAll().pipe(Object(nn.a)(()=>this.isLoading=!1)).subscribe(t=>this.species=t.map(t=>{const e=(new on.a).deserialize(t);return!this.specie.slug&&e.default&&(this.specie=Object.assign({},e)),e}))}loadExample(){this.http.get(this.exampleFile,{observe:"response",responseType:"blob"}).subscribe(t=>{const e=new FileReader;e.readAsDataURL(t.body),e.onloadend=e=>{if(e.target.readyState===window.FileReader.DONE){const n=new Blob([e.target.result]),i=new Array;i.push(n),this.fileList=[new File(i,t.url.split("/").slice(-1)[0])]}}},()=>this.notify.warning("Unable to load example file"))}submit(){this.response=null,this.isSubmitting=!0,this.construct.specie_tax_id=this.specie.tax_id,this.sqrutinySrvc.fromSketch(this.construct).subscribe(t=>{this.notify.loading("Your job has been submitted! In a moment you will be redirected. Please be patient"),setTimeout(()=>{this.router.navigate(["/workspace",t.id]),this.isSubmitting=!1},3e3)},t=>{this.isSubmitting=!1,this.notify.error(t)})}textModal(t){this.modal.create({nzContent:Qn.a,nzWrapClassName:"center-modal",nzComponentParams:{txt:t},nzFooter:null})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(nt.a),r.Sb(ln.a),r.Sb(bn.a),r.Sb(nt.c),r.Sb(pn.b),r.Sb(gt.c),r.Sb(s.c))},t.\u0275cmp=r.Mb({type:t,selectors:[["sqy-from-file"]],decls:37,vars:4,consts:[[1,"ui","main","container"],[1,"ui","vertical","masthead","center","aligned"],[1,"ui","header"],[1,"ui","two","column","centered","padded","grid"],[1,"one","column","row"],[1,"column","right","aligned"],[1,"disabled",3,"click"],[1,"ui","column"],["nzType","drag",3,"nzCustomRequest","nzFileList","nzAction"],[1,"p-4"],["xmlns","http://www.w3.org/2000/svg","width","45","height","46","viewBox","0 0 63 64"],["fill","#3B454F","fill-rule","nonzero"],["d","M42.656 15.135a1.953 1.953 0 0 1-1.391-.578L31.5 4.795l-9.765 9.762a1.97 1.97 0 1 1-2.785-2.785L30.106.616a1.97 1.97 0 0 1 2.785 0l11.157 11.156a1.97 1.97 0 0 1-1.392 3.363z"],["d","M31.5 36.791a1.97 1.97 0 0 1-1.969-1.969V2.01a1.97 1.97 0 0 1 3.938 0v32.812a1.97 1.97 0 0 1-1.969 1.969z"],["d","M55.781 63.041H7.22A7.225 7.225 0 0 1 0 55.822V41.385a4.599 4.599 0 0 1 4.594-4.594h7.234a4.567 4.567 0 0 1 4.402 3.276l2.814 9.382a.658.658 0 0 0 .628.467h23.656a.658.658 0 0 0 .628-.467l2.814-9.385a4.572 4.572 0 0 1 4.402-3.273h7.234A4.599 4.599 0 0 1 63 41.385v14.437a7.225 7.225 0 0 1-7.219 7.219zM4.594 40.729a.656.656 0 0 0-.657.656v14.437a3.286 3.286 0 0 0 3.282 3.282H55.78a3.286 3.286 0 0 0 3.282-3.282V41.385a.656.656 0 0 0-.657-.656h-7.234a.65.65 0 0 0-.628.467L47.73 50.58a4.628 4.628 0 0 1-4.402 3.274H19.672a4.567 4.567 0 0 1-4.402-3.276l-2.814-9.382a.65.65 0 0 0-.628-.467H4.594z"],[1,"ant-upload-text"],[1,"ant-upload-hint"],["class","one column row mt-7 p-4",4,"ngIf"],[1,"one","column","row","mt-7","p-4"],[1,"column","mt-4"],[1,"ui","two","item","secondary","pointing","menu"],[1,"item",3,"ngClass","click"],[1,"column"],[1,"ui","padded","form",3,"ngClass","ngSubmit"],["constructForm","ngForm"],[4,"ngIf"],[1,"field"],["type","submit",1,"ui","secondary","right","labeled","fluid","icon","button",3,"disabled"],[1,"angle","right","icon"],[1,"required","field"],[1,"required-msg"],["for","construct_specie"],["name","construct-specie","id","construct_specie","required","",1,"ui","dropdown",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"required","field",3,"ngClass"],["for","construct_name"],["type","text","placeholder","Label / Name","id","construct_name","name","construct-name","required","",1,"transparent",3,"ngModel","ngModelChange"],["name","ngModel"],[1,"inline","field"],[1,"circle","icon",3,"ngClass"],[1,"field","link",2,"max-height","300px",3,"click"],[1,"meta"],[1,"wrap"],["for","construct_description"],["id","construct_description","name","construct-description","rows","8","cols","80",3,"ngModel","ngModelChange"],["description","ngModel"],[3,"ngValue"],[1,"field",2,"height","70vh","overflow","auto"],[1,"ui","blue","definition","table"],[4,"ngFor","ngForOf"],[1,"ui","circular","label",3,"ngClass"]],template:function(t,e){1&t&&(r.Yb(0,"div",0),r.Yb(1,"div",1),r.Yb(2,"h1",2),r.Kc(3,"Upload your GenBank"),r.Xb(),r.Yb(4,"h2",2),r.Kc(5,"Allowed extensions: "),r.Yb(6,"strong"),r.Kc(7,".gb .gbk .genbank."),r.Xb(),r.Xb(),r.Yb(8,"p"),r.Kc(9,"Upload a valid GenBank file. Note that such file must include at least one "),r.Yb(10,"strong"),r.Kc(11,"CDS feature"),r.Xb(),r.Kc(12,". All others features will be filled with "),r.Yb(13,"strong"),r.Kc(14,"Dummy feature"),r.Xb(),r.Kc(15,"."),r.Xb(),r.Yb(16,"div",3),r.Yb(17,"div",4),r.Yb(18,"div",5),r.Yb(19,"a",6),r.gc("click",(function(t){return e.loadExample()})),r.Kc(20,"Load example file"),r.Xb(),r.Xb(),r.Yb(21,"div",7),r.Yb(22,"nz-upload",8),r.Yb(23,"div",9),r.jc(),r.Yb(24,"svg",10),r.Yb(25,"g",11),r.Tb(26,"path",12),r.Tb(27,"path",13),r.Tb(28,"path",14),r.Xb(),r.Xb(),r.Xb(),r.ic(),r.Yb(29,"div"),r.Yb(30,"p",15),r.Kc(31," Select a file or drop here to upload "),r.Xb(),r.Yb(32,"p",16),r.Kc(33," Only a single file can be uploaded. "),r.Xb(),r.Yb(34,"p",16),r.Kc(35," In case of error hover file to get error details. "),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Ic(36,li,16,12,"div",17),r.Xb(),r.Xb(),r.Xb()),2&t&&(r.Eb(22),r.sc("nzCustomRequest",e.customReq)("nzFileList",e.fileList)("nzAction",e.endpoint),r.Eb(14),r.sc("ngIf",e.construct))},directives:[Ve,i.k,i.i,a.s,a.i,a.j,a.p,a.o,a.h,a.k,i.j,a.b,a.l,a.r],pipes:[On],styles:[".ui.container[_ngcontent-%COMP%]{min-height:700px;margin-bottom:7em}.masthead.segment[_ngcontent-%COMP%]{min-height:400px;padding:1em 0;border-radius:0!important;border:0!important}.masthead[_ngcontent-%COMP%]   h1.ui.header[_ngcontent-%COMP%]{margin-top:1.5em;margin-bottom:0;font-size:3em;font-weight:400}.masthead[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;font-weight:400}.wrap[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.required-msg[_ngcontent-%COMP%]{font-weight:400!important}.ui.circular.label[_ngcontent-%COMP%]{font-weight:700}.ui.circular.label[_ngcontent-%COMP%]:not(.no-color){color:#fff!important}.ui.circular.label.no-color[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}"]}),t})(),hi=(()=>{class t{constructor(){}canDeactivate(t){return t.canDeactivate()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ob({token:t,factory:t.\u0275fac}),t})();const ui=[{path:"",component:Zn,data:{title:"Construct sketcher"}},{path:en.a.optimize.sketcher,component:Zn,data:{title:"Construct sketcher"},canDeactivate:[hi]},{path:en.a.optimize.from_file,component:di,data:{title:"Upload file"}}];let bi=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)},providers:[hi],imports:[[nt.g.forChild(ui)],nt.g]}),t})();var pi=n("PCNd");n.d(e,"OptimizerModule",(function(){return gi}));let gi=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)},imports:[[i.c,bi,pi.a,s.b,U,pt,a.n,_e,Qe,tn.c]]}),t})()}}]);
//# sourceMappingURL=7-es2015.fbc519896057c804214a.js.map