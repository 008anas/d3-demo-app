function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"7aIJ":function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),o=n("3Pt+"),c=n("dEAy"),r=n("zAKX"),a=n("Nqz0"),s=n("bMUq"),b=n("nJia"),l=n("OCB9"),d=n("fXoL"),u=["neverUsedTemplate"],h=["nzTemplate"];function p(t,e){if(1&t&&(d.Wb(0),d.Kc(1),d.Vb()),2&t){var n=d.kc(3);d.Eb(1),d.Lc(n.title)}}function v(t,e){if(1&t&&(d.Yb(0,"div",9),d.Ic(1,p,2,1,"ng-container",8),d.Xb()),2&t){var n=d.kc(2);d.Eb(1),d.sc("nzStringTemplateOutlet",n.title)}}function g(t,e){if(1&t&&(d.Wb(0),d.Kc(1),d.Vb()),2&t){var n=d.kc(2);d.Eb(1),d.Lc(n.content)}}function f(t,e){if(1&t&&(d.Yb(0,"div",2),d.Yb(1,"div",3),d.Tb(2,"div",4),d.Yb(3,"div",5),d.Yb(4,"div"),d.Ic(5,v,2,1,"div",6),d.Yb(6,"div",7),d.Ic(7,g,2,1,"ng-container",8),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb()),2&t){var n=d.kc();d.sc("ngClass",n._classMap)("ngStyle",n.nzOverlayStyle)("@.disabled",null==n.noAnimation?null:n.noAnimation.nzNoAnimation)("nzNoAnimation",null==n.noAnimation?null:n.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),d.Eb(5),d.sc("ngIf",n.title),d.Eb(2),d.sc("nzStringTemplateOutlet",n.content)}}var m,Y,X,y=["*"],k=((X=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).noAnimation=n,i._prefix="ant-popover-placement",i}return _inherits(e,t),e}(b.a)).\u0275fac=function(t){return new(t||X)(d.Sb(d.h),d.Sb(s.m,9))},X.\u0275cmp=d.Mb({type:X,selectors:[["nz-popover"]],contentQueries:function(t,e,n){var i;1&t&&(d.Fc(n,u,!0),d.Fc(n,h,!0)),2&t&&(d.zc(i=d.hc())&&(e.nzTitleTemplate=i.first),d.zc(i=d.hc())&&(e.nzContentTemplate=i.first))},inputs:{nzTitle:"nzTitle",nzContent:"nzContent"},exportAs:["nzPopoverComponent"],features:[d.Db([{provide:b.c,useExisting:X}]),d.Bb],ngContentSelectors:y,decls:3,vars:4,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","backdropClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],[1,"ant-popover",3,"ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],["role","tooltip",1,"ant-popover-inner"],["class","ant-popover-title",4,"ngIf"],[1,"ant-popover-inner-content"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-title"]],template:function(t,e){1&t&&(d.rc(),d.qc(0),d.Ic(1,f,8,7,"ng-template",0,1,d.Jc),d.gc("backdropClick",(function(t){return e.hide()}))("detach",(function(t){return e.hide()}))("positionChange",(function(t){return e.onPositionChange(t)}))),2&t&&(d.Eb(1),d.sc("cdkConnectedOverlayOrigin",e.origin)("cdkConnectedOverlayHasBackdrop",e._hasBackdrop)("cdkConnectedOverlayPositions",e._positions)("cdkConnectedOverlayOpen",e._visible))},directives:[l.a,s.j,i.i,i.l,s.m,i.k,s.r],styles:["\n      .ant-popover {\n        position: relative;\n      }\n    "],encapsulation:2,data:{animation:[s.U]},changeDetection:0}),X),C=((Y=function(t){function e(t,n,i,o,c,r){var a;return _classCallCheck(this,e),(a=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n,i,o,c,r))).noAnimation=r,a.componentFactory=a.resolver.resolveComponentFactory(k),a}return _inherits(e,t),e}(b.d)).\u0275fac=function(t){return new(t||Y)(d.Sb(d.l),d.Sb(d.Q),d.Sb(d.j),d.Sb(d.E),d.Sb(k,8),d.Sb(s.m,9))},Y.\u0275dir=d.Nb({type:Y,selectors:[["","nz-popover",""]],hostVars:2,hostBindings:function(t,e){2&t&&d.Jb("ant-popover-open",e.isTooltipComponentVisible)},inputs:{specificTitle:["nzPopoverTitle","specificTitle"],specificContent:["nzPopoverContent","specificContent"],directiveNameTitle:["nz-popover","directiveNameTitle"],specificTrigger:["nzPopoverTrigger","specificTrigger"],specificPlacement:["nzPopoverPlacement","specificPlacement"]},exportAs:["nzPopover"],features:[d.Bb]}),Y),w=((m=function t(){_classCallCheck(this,t)}).\u0275mod=d.Qb({type:m}),m.\u0275inj=d.Pb({factory:function(t){return new(t||m)},imports:[[i.c,l.g,s.g,s.o,s.n,b.b]]}),m),T=n("tyNb"),_=n("nYR2"),M=n("iYJU"),E=n("XZrq"),z=n("PScX"),K=n("0yvB"),O=n("ivy7"),x=n("lkLw");function P(t,e){1&t&&(d.Yb(0,"div",11),d.Yb(1,"div",12),d.Tb(2,"i",13),d.Kc(3," Yo have no history. "),d.Xb(),d.Xb())}var S=function(t){return{warning:t}},A=function(t){return[t]},q=function(t,e,n){return{"ant-badge-status-error":t,"ant-badge-status-success":e,"ant-badge-status-processing":n}},I=function(t){return["/editor",t]};function L(t,e){if(1&t){var n=d.Zb();d.Yb(0,"tr",19),d.Yb(1,"td"),d.Yb(2,"h3"),d.Yb(3,"a",20),d.Kc(4),d.Xb(),d.Xb(),d.Xb(),d.Yb(5,"td"),d.Yb(6,"h3"),d.Yb(7,"a",21),d.Kc(8),d.Xb(),d.Xb(),d.Xb(),d.Yb(9,"td"),d.Kc(10),d.Xb(),d.Yb(11,"td"),d.Yb(12,"time",22),d.Kc(13),d.lc(14,"date"),d.Xb(),d.Xb(),d.Yb(15,"td"),d.Yb(16,"div",23),d.lc(17,"titlecase"),d.Tb(18,"span",24),d.Xb(),d.Xb(),d.Yb(19,"td",25),d.Yb(20,"a",26),d.Tb(21,"i",27),d.Xb(),d.Yb(22,"a",28),d.Tb(23,"i",29),d.Xb(),d.Yb(24,"a",30),d.gc("click",(function(t){d.Bc(n);var i=e.$implicit;return d.kc(2).deleteHistory(i.id)})),d.Tb(25,"i",31),d.Xb(),d.Xb(),d.Xb()}if(2&t){var i=e.$implicit;d.sc("ngClass",d.wc(16,S,"failed"!=i.status&&"finished"!=i.status)),d.Eb(3),d.sc("routerLink",d.wc(18,A,i.id)),d.Eb(1),d.Lc(i.name),d.Eb(4),d.Lc(i.construct.label),d.Eb(2),d.Mc(" ",i.construct.specie.name," "),d.Eb(2),d.sc("dateTime",i.created_at),d.Eb(1),d.Mc(" ",d.nc(14,11,i.created_at,"DD/MM/YYYY hh:mm")," "),d.Eb(3),d.Fb("data-tooltip",d.mc(17,14,i.status)),d.Eb(2),d.sc("ngClass",d.yc(20,q,"failed"===i.status,"finished"===i.status,"failed"!=i.status&&"finished"!=i.status)),d.Eb(2),d.sc("sqy-clipboard",i.id),d.Eb(2),d.sc("routerLink",d.wc(24,I,i.id))}}var B=function(t){return{loading:t}};function F(t,e){if(1&t&&(d.Yb(0,"div",14),d.Yb(1,"table",15),d.Yb(2,"thead"),d.Yb(3,"tr"),d.Yb(4,"th",16),d.Kc(5," Your history "),d.Xb(),d.Yb(6,"th",17),d.Kc(7),d.Xb(),d.Xb(),d.Xb(),d.Yb(8,"tbody"),d.Ic(9,L,26,26,"tr",18),d.Xb(),d.Xb(),d.Xb()),2&t){var n=d.kc();d.sc("ngClass",d.wc(3,B,n.isLoading)),d.Eb(7),d.Mc(" ",n.histories.length," entries "),d.Eb(2),d.sc("ngForOf",n.histories)}}var D,H,j,V=((D=function(){function t(e,n,i,o){_classCallCheck(this,t),this.router=e,this.historySrvc=n,this.notify=i,this.navSrvc=o,this.histories=[],this.isLoading=!1,this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}}return _createClass(t,[{key:"ngOnInit",value:function(){this.isLoading=!0,this.getUserHistory()}},{key:"getUserHistory",value:function(){var t=this;this.isLoading=!0,this.historySrvc.getAll().pipe(Object(_.a)((function(){return t.isLoading=!1}))).subscribe((function(e){return t.histories=e.map((function(t){return(new M.a).deserialize(t)}))||[]}))}},{key:"clearHistory",value:function(){var t=this;confirm("Are you sure that you want to clear history?. This action cannot be reverted.")&&(this.isLoading=!0,this.historySrvc.deleteAll().pipe(Object(_.a)((function(){return t.isLoading=!1}))).subscribe((function(e){t.navSrvc.updateBadge(),t.getUserHistory(),t.notify.success(e.msg)})))}},{key:"deleteHistory",value:function(t){var e=this;confirm("Are you sure that you want to delete such history?. This action cannot be reverted.")&&(this.isLoading=!0,this.historySrvc.delete(t).pipe(Object(_.a)((function(){return e.isLoading=!1}))).subscribe((function(){e.navSrvc.updateBadge(),e.getUserHistory(),e.notify.success("History deleted!")})))}}]),t}()).\u0275fac=function(t){return new(t||D)(d.Sb(T.c),d.Sb(E.a),d.Sb(z.b),d.Sb(K.a))},D.\u0275cmp=d.Mb({type:D,selectors:[["sqy-workspace"]],decls:21,vars:3,consts:[[1,"ui","main","container"],[1,"ui","padded","grid","p-4"],[1,"one","column","row"],[1,"column"],[1,"ui","header"],[1,"two","column","row"],[1,"column","right","aligned"],["type","button","name","button",1,"ui","red","right","labeled","icon","button",3,"disabled","click"],[1,"trash","icon"],["class","ui placeholder segment",4,"ngIf"],["class","ui segment p-0",3,"ngClass",4,"ngIf"],[1,"ui","placeholder","segment"],[1,"ui","icon","header"],[1,"list","ul","icon"],[1,"ui","segment","p-0",3,"ngClass"],[1,"ui","very","padded","selectable","basic","table","b-0"],["colspan","5"],[1,"right","aligned"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"routerLink"],[1,"disabled"],[3,"dateTime"],["data-inverted","","data-position","top center",1,"ant-badge","ant-badge-status","ant-badge-not-a-wrapper","link"],[1,"ant-badge-status-dot",3,"ngClass"],[1,"ui","center","aligned"],["data-inverted","","data-position","top center","data-tooltip","Copy ID",3,"sqy-clipboard"],[1,"copy","icon"],["data-inverted","","data-position","top center","data-tooltip","Load on vector editor",3,"routerLink"],[1,"external","link","icon"],["data-inverted","","data-position","top center","data-tooltip","Delete",3,"click"],[1,"trash","link","red","icon"]],template:function(t,e){1&t&&(d.Yb(0,"div",0),d.Yb(1,"div",1),d.Yb(2,"div",2),d.Yb(3,"div",3),d.Yb(4,"h1",4),d.Kc(5,"Recent history"),d.Xb(),d.Yb(6,"p"),d.Kc(7," Here you can find the history of all the "),d.Yb(8,"strong"),d.Kc(9,"jobs"),d.Xb(),d.Kc(10," submitted. "),d.Xb(),d.Xb(),d.Xb(),d.Yb(11,"div",5),d.Tb(12,"div",3),d.Yb(13,"div",6),d.Yb(14,"button",7),d.gc("click",(function(t){return e.clearHistory()})),d.Kc(15," Clear history "),d.Tb(16,"i",8),d.Xb(),d.Xb(),d.Xb(),d.Yb(17,"div",2),d.Yb(18,"div",3),d.Ic(19,P,4,0,"div",9),d.Ic(20,F,10,5,"div",10),d.Xb(),d.Xb(),d.Xb(),d.Xb()),2&t&&(d.Eb(14),d.sc("disabled",!e.isLoading&&!e.histories.length),d.Eb(5),d.sc("ngIf",!e.isLoading&&!e.histories.length),d.Eb(1),d.sc("ngIf",!e.isLoading&&e.histories.length))},directives:[i.k,i.i,i.j,T.f,O.a],pipes:[x.a,i.t],styles:["h1.ui.header[_ngcontent-%COMP%]{font-size:4em;font-weight:400}"]}),D),N=n("IRNp"),R=n("AytR"),$=n("tk/3"),G=((H=function(){function t(e){_classCallCheck(this,t),this.http=e,this.url=R.a.endpoints.api+"/workspace/job/"}return _createClass(t,[{key:"getById",value:function(t){return this.http.get("".concat(this.url).concat(t)).pipe()}}]),t}()).\u0275fac=function(t){return new(t||H)(d.cc($.c))},H.\u0275prov=d.Ob({token:H,factory:H.\u0275fac,providedIn:"root"}),H),J=n("w/cW"),W=((j=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||j)},j.\u0275cmp=d.Mb({type:j,selectors:[["sqy-history-loading"]],decls:122,vars:0,consts:[[1,"ui","main","fluid","container","p-4","mt-6"],[1,"ui","grid"],[1,"row"],[1,"ui","container"],[1,"sixteen","wide","column"],[1,"ui","padded","one","column","grid"],[1,"column"],[1,"ui","fluid","placeholder"],[1,"header"],[1,"line"],[1,"two","column","row"],[1,"column","txt-r"],[1,"disabled"],[1,"trash","icon"],[1,"paragraph"],[1,"ui","placeholder"],[1,"ui","padded","form","grid"],[1,"one","column","row"],[1,"column","txt-c"],[1,"field"],[1,"four","inline","fields"],[1,"ui","horizontal","divider","header"],[1,"bug","icon"],[1,"dna","icon"],[1,"info","icon"],[1,"ui","blue","padded","sequence","definition","table"],[1,"link"],[1,"construct"],[1,"strand"]],template:function(t,e){1&t&&(d.Yb(0,"div",0),d.Yb(1,"div",1),d.Yb(2,"div",2),d.Yb(3,"div",3),d.Yb(4,"div",4),d.Yb(5,"div",5),d.Yb(6,"div",6),d.Yb(7,"div",7),d.Yb(8,"div",8),d.Tb(9,"div",9),d.Tb(10,"div",9),d.Xb(),d.Xb(),d.Xb(),d.Yb(11,"div",10),d.Tb(12,"div",6),d.Yb(13,"div",11),d.Yb(14,"a",12),d.Tb(15,"i",13),d.Kc(16," Delete history "),d.Xb(),d.Xb(),d.Xb(),d.Yb(17,"div",6),d.Yb(18,"div",7),d.Yb(19,"div",14),d.Tb(20,"div",9),d.Tb(21,"div",9),d.Tb(22,"div",9),d.Xb(),d.Xb(),d.Xb(),d.Yb(23,"div",6),d.Yb(24,"div",15),d.Yb(25,"div",14),d.Tb(26,"div",9),d.Tb(27,"div",9),d.Tb(28,"div",9),d.Tb(29,"div",9),d.Tb(30,"div",9),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(31,"div",2),d.Yb(32,"div",3),d.Yb(33,"div",4),d.Yb(34,"div",16),d.Yb(35,"div",17),d.Yb(36,"div",18),d.Yb(37,"h2"),d.Kc(38,"Construct summary"),d.Xb(),d.Xb(),d.Xb(),d.Yb(39,"div",17),d.Yb(40,"div",6),d.Yb(41,"div",19),d.Yb(42,"div",7),d.Yb(43,"div",14),d.Tb(44,"div",9),d.Xb(),d.Xb(),d.Xb(),d.Yb(45,"div",20),d.Yb(46,"div",19),d.Yb(47,"div",7),d.Yb(48,"div",14),d.Tb(49,"div",9),d.Xb(),d.Xb(),d.Xb(),d.Yb(50,"div",19),d.Yb(51,"div",7),d.Yb(52,"div",14),d.Tb(53,"div",9),d.Xb(),d.Xb(),d.Xb(),d.Yb(54,"div",19),d.Yb(55,"div",7),d.Yb(56,"div",14),d.Tb(57,"div",9),d.Xb(),d.Xb(),d.Xb(),d.Yb(58,"div",19),d.Yb(59,"div",7),d.Yb(60,"div",14),d.Tb(61,"div",9),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(62,"div",17),d.Yb(63,"div",6),d.Yb(64,"h4",21),d.Tb(65,"i",22),d.Kc(66," Organism "),d.Xb(),d.Xb(),d.Yb(67,"div",6),d.Yb(68,"div",15),d.Tb(69,"div",9),d.Tb(70,"div",9),d.Tb(71,"div",9),d.Tb(72,"div",9),d.Tb(73,"div",9),d.Xb(),d.Xb(),d.Xb(),d.Yb(74,"div",17),d.Yb(75,"div",6),d.Yb(76,"h4",21),d.Tb(77,"i",23),d.Kc(78," Sequence "),d.Xb(),d.Xb(),d.Yb(79,"div",6),d.Yb(80,"p"),d.Tb(81,"i",24),d.Kc(82," Click on sequence to display full content"),d.Xb(),d.Yb(83,"table",25),d.Yb(84,"tbody"),d.Yb(85,"tr"),d.Yb(86,"th"),d.Kc(87,"DNA"),d.Xb(),d.Tb(88,"td",26),d.Yb(89,"td"),d.Yb(90,"strong"),d.Kc(91,"Total:"),d.Xb(),d.Xb(),d.Xb(),d.Yb(92,"tr"),d.Yb(93,"th"),d.Kc(94,"Protein"),d.Xb(),d.Tb(95,"td",26),d.Yb(96,"td"),d.Yb(97,"strong"),d.Kc(98,"Total:"),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(99,"div",17),d.Yb(100,"div",6),d.Yb(101,"h4",21),d.Kc(102," Tracks "),d.Xb(),d.Xb(),d.Tb(103,"div",11),d.Yb(104,"div",6),d.Yb(105,"div",27),d.Tb(106,"div",28),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(107,"div",17),d.Yb(108,"div",6),d.Yb(109,"div",7),d.Yb(110,"div",14),d.Tb(111,"div",9),d.Tb(112,"div",9),d.Tb(113,"div",9),d.Tb(114,"div",9),d.Tb(115,"div",9),d.Xb(),d.Yb(116,"div",14),d.Tb(117,"div",9),d.Tb(118,"div",9),d.Tb(119,"div",9),d.Tb(120,"div",9),d.Tb(121,"div",9),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb())},styles:[""]}),j),U=n("9uVP"),Z=n("CrrK");function Q(t,e){if(1&t&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Kc(2),d.Xb(),d.Yb(3,"td"),d.Kc(4),d.Xb(),d.Yb(5,"td"),d.Kc(6),d.Xb(),d.Yb(7,"td"),d.Kc(8),d.Xb(),d.Xb()),2&t){var n=e.$implicit;d.Eb(2),d.Mc(" ",n.start," "),d.Eb(2),d.Mc(" ",n.end," "),d.Eb(2),d.Mc(" ",n.raw_score," "),d.Eb(2),d.Mc(" ",n.norm_score," ")}}var tt,et=((tt=function(){function t(e,n){_classCallCheck(this,t),this.fileSrvc=e,this.notify=n}return _createClass(t,[{key:"exportToExcel",value:function(){this.values&&(this.fileSrvc.exportAsExcelFile([{name:"Scores",data:this.values}],"sample"),this.notify.success("Exported successfully!"))}},{key:"values",set:function(t){if(this._values=[],t){this._values=t;var e=this._values.map((function(t){return t.raw_score})),n=this._values.map((function(t){return t.norm_score}));this.max_raw=Math.max.apply(Math,e),this.min_raw=Math.min.apply(Math,e),this.max_norm=Math.max.apply(Math,n),this.min_norm=Math.min.apply(Math,n)}}}]),t}()).\u0275fac=function(t){return new(t||tt)(d.Sb(Z.a),d.Sb(z.b))},tt.\u0275cmp=d.Mb({type:tt,selectors:[["sqy-display-values"]],inputs:{values:"values"},decls:61,vars:6,consts:[[1,"ui","padded","grid"],[1,"two","column","row"],[1,"column"],[1,"column","pr-5","right","aligned"],[1,"ui","simple","dropdown"],[1,"text"],[1,"download","icon"],[1,"dropdown","icon"],[1,"menu"],[1,"header"],[1,"item",3,"click"],[1,"file","excel","icon"],[1,"item"],[1,"dna","icon"],[1,"row"],[1,"ui","definition","small","table"],[1,"collapsing"],[1,"ui","selectable","small","table"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(d.Yb(0,"div",0),d.Yb(1,"div",1),d.Yb(2,"div",2),d.Yb(3,"strong"),d.Kc(4," Total score:"),d.Xb(),d.Kc(5),d.Xb(),d.Yb(6,"div",3),d.Yb(7,"a",4),d.Yb(8,"div",5),d.Tb(9,"i",6),d.Kc(10," Export "),d.Xb(),d.Tb(11,"i",7),d.Yb(12,"div",8),d.Yb(13,"div",9),d.Kc(14," Export As "),d.Xb(),d.Yb(15,"a",10),d.gc("click",(function(t){return e.exportToExcel()})),d.Tb(16,"i",11),d.Kc(17," Excel "),d.Xb(),d.Yb(18,"a",12),d.Tb(19,"i",13),d.Kc(20," GenBank "),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(21,"div",14),d.Yb(22,"div",2),d.Yb(23,"table",15),d.Yb(24,"thead"),d.Yb(25,"tr"),d.Tb(26,"th"),d.Yb(27,"th"),d.Kc(28,"Maximum value"),d.Xb(),d.Yb(29,"th"),d.Kc(30,"Minimum value"),d.Xb(),d.Xb(),d.Xb(),d.Yb(31,"tbody"),d.Yb(32,"tr"),d.Yb(33,"td",16),d.Kc(34,"Raw scores"),d.Xb(),d.Yb(35,"td"),d.Kc(36),d.Xb(),d.Yb(37,"td"),d.Kc(38),d.Xb(),d.Xb(),d.Yb(39,"tr"),d.Yb(40,"td",16),d.Kc(41,"Normalized scores"),d.Xb(),d.Yb(42,"td"),d.Kc(43),d.Xb(),d.Yb(44,"td"),d.Kc(45),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(46,"div",14),d.Yb(47,"div",2),d.Yb(48,"table",17),d.Yb(49,"thead"),d.Yb(50,"tr"),d.Yb(51,"th"),d.Kc(52," Start "),d.Xb(),d.Yb(53,"th"),d.Kc(54," End "),d.Xb(),d.Yb(55,"th"),d.Kc(56," Raw values "),d.Xb(),d.Yb(57,"th"),d.Kc(58," Normalized values "),d.Xb(),d.Xb(),d.Xb(),d.Yb(59,"tbody"),d.Ic(60,Q,9,4,"tr",18),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb()),2&t&&(d.Eb(5),d.Mc("",null==e._values?null:e._values.length," "),d.Eb(31),d.Lc(e.max_raw),d.Eb(2),d.Lc(e.min_raw),d.Eb(5),d.Lc(e.max_norm),d.Eb(2),d.Lc(e.min_norm),d.Eb(15),d.sc("ngForOf",e._values))},directives:[i.j],styles:[".center-modal{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}  .center-modal .ant-modal{width:1000px!important;top:0}  .center-modal .ant-modal .ant-modal-body{max-height:calc(90vh - 5em);overflow:auto}label[_ngcontent-%COMP%]{font-weight:700}"]}),tt);function nt(t,e){if(1&t&&(d.Yb(0,"tr"),d.Yb(1,"td"),d.Kc(2),d.Xb(),d.Yb(3,"td"),d.Kc(4),d.Xb(),d.Xb()),2&t){var n=e.$implicit;d.Eb(2),d.Mc(" ",n.pos," "),d.Eb(2),d.Mc(" ",n.score," ")}}var it,ot,ct=((it=function(){function t(e,n){_classCallCheck(this,t),this.fileSrvc=e,this.notify=n}return _createClass(t,[{key:"exportToExcel",value:function(){this.values&&(this.fileSrvc.exportAsExcelFile(this.values,"sample"),this.notify.success("Exported successfully!"))}}]),t}()).\u0275fac=function(t){return new(t||it)(d.Sb(Z.a),d.Sb(z.b))},it.\u0275cmp=d.Mb({type:it,selectors:[["sqy-display-threshold"]],inputs:{values:"values"},decls:32,vars:2,consts:[[1,"ui","padded","grid"],[1,"two","column","row"],[1,"column"],[1,"column","pr-5","right","aligned"],[1,"ui","simple","dropdown"],[1,"text"],[1,"download","icon"],[1,"dropdown","icon"],[1,"menu"],[1,"header"],[1,"item",3,"click"],[1,"file","excel","icon"],[1,"item"],[1,"dna","icon"],[1,"row"],[1,"ui","selectable","small","table"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(d.Yb(0,"div",0),d.Yb(1,"div",1),d.Yb(2,"div",2),d.Yb(3,"strong"),d.Kc(4," Total score:"),d.Xb(),d.Kc(5),d.Xb(),d.Yb(6,"div",3),d.Yb(7,"a",4),d.Yb(8,"div",5),d.Tb(9,"i",6),d.Kc(10," Export "),d.Xb(),d.Tb(11,"i",7),d.Yb(12,"div",8),d.Yb(13,"div",9),d.Kc(14," Export As "),d.Xb(),d.Yb(15,"a",10),d.gc("click",(function(t){return e.exportToExcel()})),d.Tb(16,"i",11),d.Kc(17," Excel "),d.Xb(),d.Yb(18,"a",12),d.Tb(19,"i",13),d.Kc(20," GenBank "),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(21,"div",14),d.Yb(22,"div",2),d.Yb(23,"table",15),d.Yb(24,"thead"),d.Yb(25,"tr"),d.Yb(26,"th"),d.Kc(27," Positions "),d.Xb(),d.Yb(28,"th"),d.Kc(29," Score "),d.Xb(),d.Xb(),d.Xb(),d.Yb(30,"tbody"),d.Ic(31,nt,5,2,"tr",16),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb()),2&t&&(d.Eb(5),d.Mc("",null==e.values?null:e.values.length," "),d.Eb(26),d.sc("ngForOf",e.values))},directives:[i.j],styles:[""]}),it),rt=n("dAYa"),at=n("cxgq"),st=n("Q8cG"),bt=function(t){return{error:t}},lt=((ot=function(){function t(e){_classCallCheck(this,t),this.builder=e,this.onSet=new d.n}return _createClass(t,[{key:"ngOnInit",value:function(){this.highlightForm=this.builder.group({from:[0,o.r.compose([o.r.min(0),o.r.required,o.r.max(this.max-1)])],to:[this.max,o.r.compose([o.r.required,o.r.min(1),o.r.max(this.max)])]})}},{key:"set",value:function(){this.from.value<this.to.value&&this.onSet.emit("".concat(this.from.value,":").concat(this.to.value))}},{key:"from",get:function(){return this.highlightForm.get("from")}},{key:"to",get:function(){return this.highlightForm.get("to")}}]),t}()).\u0275fac=function(t){return new(t||ot)(d.Sb(o.c))},ot.\u0275cmp=d.Mb({type:ot,selectors:[["sqy-set-highlight"]],inputs:{max:"max"},outputs:{onSet:"onSet"},decls:13,vars:9,consts:[[1,"ui","tiny","form",3,"formGroup","ngSubmit"],[1,"fields"],[1,"field",3,"ngClass"],["type","number","placeholder","From","required","","name","highl-from","formControlName","from"],["type","number","required","","name","highl-to","formControlName","to",3,"placeholder"],[1,"field"],["type","submit",1,"ui","fluid","primary","button",3,"disabled"]],template:function(t,e){1&t&&(d.Yb(0,"form",0),d.gc("ngSubmit",(function(t){return e.set()})),d.Yb(1,"div",1),d.Yb(2,"div",2),d.Yb(3,"label"),d.Kc(4,"From"),d.Xb(),d.Tb(5,"input",3),d.Xb(),d.Yb(6,"div",2),d.Yb(7,"label"),d.Kc(8,"To"),d.Xb(),d.Tb(9,"input",4),d.Xb(),d.Xb(),d.Yb(10,"div",5),d.Yb(11,"button",6),d.Kc(12,"Set"),d.Xb(),d.Xb(),d.Xb()),2&t&&(d.sc("formGroup",e.highlightForm),d.Eb(2),d.sc("ngClass",d.wc(5,bt,e.from.invalid&&(e.from.dirty||e.from.touched))),d.Eb(4),d.sc("ngClass",d.wc(7,bt,e.to.invalid&&(e.to.dirty||e.to.touched))),d.Eb(3),d.uc("placeholder","Max: ",e.max,""),d.Eb(2),d.sc("disabled",e.highlightForm.invalid))},directives:[o.t,o.i,o.e,i.i,o.m,o.b,o.p,o.h,o.d],styles:[""]}),ot),dt=["dnaSeq"],ut=["proteinSeq"],ht=["tracksView"],pt=["zoomIns"];function vt(t,e){if(1&t&&d.Tb(0,"nz-option",63),2&t){var n=e.$implicit;d.sc("nzLabel",n)("nzValue",n)}}var gt=function(t){return{disabled:t}};function ft(t,e){if(1&t){var n=d.Zb();d.Yb(0,"div",64),d.Yb(1,"div",65),d.Yb(2,"div",66),d.Yb(3,"div",2),d.Yb(4,"h3",67),d.Kc(5),d.Xb(),d.Xb(),d.Xb(),d.Yb(6,"div",68),d.Yb(7,"div",69),d.Yb(8,"a",5),d.Kc(9," Chart "),d.Tb(10,"i",4),d.Xb(),d.Yb(11,"a",5),d.Kc(12," Data "),d.Tb(13,"i",4),d.Xb(),d.Yb(14,"a",5),d.Kc(15," Export "),d.Tb(16,"i",4),d.Xb(),d.Yb(17,"nz-dropdown-menu",null,70),d.Yb(19,"div",44),d.Yb(20,"div",52),d.Yb(21,"div",46),d.Kc(22," Graph options "),d.Xb(),d.Tb(23,"div",47),d.Yb(24,"a",48),d.gc("click",(function(t){d.Bc(n);var i=e.$implicit;return d.kc().changeColors(i.alias)})),d.Kc(25," Change color "),d.Xb(),d.Yb(26,"a",71),d.gc("click",(function(t){d.Bc(n);var i=e.index;return d.kc().move(i,-1)})),d.Tb(27,"i",72),d.Kc(28," Move up "),d.Xb(),d.Yb(29,"a",71),d.gc("click",(function(t){d.Bc(n);var i=e.index;return d.kc().move(i,1)})),d.Tb(30,"i",73),d.Kc(31," Move down "),d.Xb(),d.Yb(32,"a",48),d.gc("click",(function(t){return e.$implicit.display=!1})),d.Tb(33,"i",49),d.Kc(34," Hide "),d.Xb(),d.Yb(35,"div",46),d.Kc(36," Threshold "),d.Xb(),d.Yb(37,"a",71),d.gc("click",(function(t){d.Bc(n);var i=e.$implicit;return d.kc().clearThreshold(i.alias)})),d.Kc(38," Clear "),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(39,"nz-dropdown-menu",null,74),d.Yb(41,"div",44),d.Yb(42,"div",52),d.Yb(43,"div",46),d.Kc(44," Display "),d.Xb(),d.Tb(45,"div",47),d.Yb(46,"a",48),d.gc("click",(function(t){d.Bc(n);var i=e.$implicit;return d.kc().valuesModal(i.alias)})),d.Kc(47," Scores "),d.Xb(),d.Yb(48,"a",71),d.gc("click",(function(t){d.Bc(n);var i=e.$implicit;return d.kc().thresholdModal(i.alias)})),d.Kc(49," Threshold positions "),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(50,"nz-dropdown-menu",null,75),d.Yb(52,"div",44),d.Yb(53,"div",52),d.Yb(54,"div",46),d.Kc(55," Export "),d.Xb(),d.Tb(56,"div",47),d.Yb(57,"div",46),d.Kc(58," Scores "),d.Xb(),d.Yb(59,"a",48),d.gc("click",(function(t){d.Bc(n);var i=e.$implicit;return d.kc().exportToExcel(i.alias)})),d.Tb(60,"i",53),d.Kc(61," Excel "),d.Xb(),d.Yb(62,"div",46),d.Kc(63," Current threshold "),d.Xb(),d.Yb(64,"a",71),d.gc("click",(function(t){d.Bc(n);var i=e.$implicit;return d.kc().exportThreshold(i.alias)})),d.Tb(65,"i",76),d.Kc(66," GenBank "),d.Xb(),d.Yb(67,"a",77),d.Tb(68,"i",53),d.Kc(69," Excel "),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(70,"div",78),d.Tb(71,"p"),d.Xb(),d.Yb(72,"div",79),d.Yb(73,"div",80),d.Yb(74,"div",81),d.Yb(75,"strong"),d.Kc(76,"Values: "),d.Xb(),d.Kc(77),d.Xb(),d.Tb(78,"i",4),d.Xb(),d.Yb(79,"nz-dropdown-menu",null,82),d.Yb(81,"ul",57),d.Yb(82,"li",60),d.gc("click",(function(t){d.Bc(n);var i=e.$implicit;return d.kc().switchValues("raw",i.alias)})),d.Kc(83," Raw "),d.Tb(84,"i",83),d.Xb(),d.Yb(85,"li",60),d.gc("click",(function(t){d.Bc(n);var i=e.$implicit;return d.kc().switchValues("norm",i.alias)})),d.Kc(86," Normalized "),d.Tb(87,"i",83),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Tb(88,"sqrutiny-matrix",84),d.Xb()}if(2&t){var i=e.$implicit,o=e.index,c=d.Ac(18),r=d.Ac(40),a=d.Ac(51),s=d.Ac(80),b=d.kc();d.sc("hidden",!i.display),d.Eb(5),d.Lc(i.name),d.Eb(3),d.sc("nzDropdownMenu",c),d.Eb(3),d.sc("nzDropdownMenu",r),d.Eb(3),d.sc("nzDropdownMenu",a),d.Eb(12),d.sc("ngClass",d.wc(17,gt,o<1||b.options.length<2)),d.Eb(3),d.sc("ngClass",d.wc(19,gt,o===b.options.length-1||b.options.length<2)),d.Eb(8),d.sc("ngClass",d.wc(21,gt,!i.cutoffs)),d.Eb(11),d.sc("ngClass",d.wc(23,gt,!i.cutoffs)),d.Eb(16),d.sc("ngClass",d.wc(25,gt,!i.cutoffs)),d.Eb(3),d.sc("ngClass",d.wc(27,gt,!i.cutoffs)),d.Eb(3),d.uc("id","cutoffRes",i.alias,""),d.Eb(3),d.sc("nzDropdownMenu",s),d.Eb(4),d.Mc("","raw"===i.type?"Raw":"Normalized"," "),d.Eb(7),d.sc("hidden","raw"!==i.type),d.Eb(3),d.sc("hidden","norm"!==i.type),d.Eb(1),d.tc("id",i.alias)}}function mt(t,e){if(1&t&&d.Tb(0,"nz-option",96),2&t){var n=e.$implicit,i=d.kc().$implicit;d.sc("nzLabel",n.name)("nzValue",n.alias)("nzDisabled",i.disabled)}}function Yt(t,e){if(1&t&&d.Tb(0,"nz-option",63),2&t){var n=e.$implicit;d.sc("nzLabel",n.desc)("nzValue",n.op)}}function Xt(t,e){if(1&t){var n=d.Zb();d.Yb(0,"div",85),d.Yb(1,"div",86),d.Yb(2,"nz-select",87),d.gc("ngModelChange",(function(t){return d.Bc(n),e.$implicit.key=t})),d.Ic(3,mt,1,3,"nz-option",88),d.Xb(),d.Xb(),d.Yb(4,"div",86),d.Yb(5,"nz-select",89),d.gc("ngModelChange",(function(t){return d.Bc(n),e.$implicit.type=t})),d.Tb(6,"nz-option",90),d.Tb(7,"nz-option",91),d.Xb(),d.Xb(),d.Yb(8,"div",86),d.Yb(9,"nz-select",92),d.gc("ngModelChange",(function(t){return d.Bc(n),e.$implicit.op=t})),d.Ic(10,Yt,1,2,"nz-option",11),d.Xb(),d.Xb(),d.Yb(11,"div",86),d.Yb(12,"input",93),d.gc("ngModelChange",(function(t){return d.Bc(n),e.$implicit.value=t})),d.Xb(),d.Xb(),d.Yb(13,"div",94),d.Yb(14,"i",95),d.gc("click",(function(t){d.Bc(n);var i=e.index;return d.kc().filters.splice(i,1)})),d.Xb(),d.Xb(),d.Xb()}if(2&t){var i=e.$implicit,o=d.kc();d.Eb(2),d.uc("name","filter-",i.key,""),d.sc("ngModel",i.key),d.Eb(1),d.sc("ngForOf",o.options),d.Eb(2),d.sc("ngModel",i.type),d.Eb(4),d.sc("ngModel",i.op),d.Eb(1),d.sc("ngForOf",o.operators),d.Eb(2),d.sc("ngModel",i.value)}}var yt=function(t){return{"non-active":t}};function kt(t,e){if(1&t&&(d.Yb(0,"a",97),d.gc("click",(function(t){var n=e.$implicit;return n.display=!n.display})),d.Tb(1,"span",98),d.Yb(2,"span",99),d.Kc(3),d.Xb(),d.Xb()),2&t){var n=e.$implicit;d.sc("ngClass",d.wc(4,yt,!n.display)),d.Eb(1),d.Hc("background-color",n.color),d.Eb(2),d.Lc(n.name)}}function Ct(t,e){if(1&t){var n=d.Zb();d.Yb(0,"sqy-set-highlight",100),d.gc("onSet",(function(t){return d.Bc(n),d.kc().setHighlight(t)})),d.Xb()}if(2&t){var i=d.kc();d.sc("max",i._data.construct.dna_seq.length)}}var wt,Tt=function(t){return{"loading disabled":t}},_t=((wt=function(){function t(e,n,i,o,c,r,a){_classCallCheck(this,t),this.sqSrvc=e,this.notify=n,this.modal=i,this.fileSrvc=o,this.historySrvc=c,this.route=r,this.loader=a,this.isVisible=!1,this._data=null,this.isSearching=!1,this.options=[],this.filters=[],this.bulk=!1,this.colors=["red","blue","black","green","orange","purple"],this.enzimes=["GAATTC","CTTAAG","CCWGG","GGWCC","GGATCC","CCTAGG","AAGCTT","TTCGAA"],this.operators=[{desc:"Greater or equal than",op:"<="},{desc:"Greater than",op:">"},{desc:"Equal",op:"="},{desc:"Lower or equal than",op:">="},{desc:"Lower than",op:"<"}],this.operatorsFn={"<":function(t,e){return t<e},"<=":function(t,e){return t<=e},"=":function(t,e){return t==e},">":function(t,e){return t>e},">=":function(t,e){return t>=e}}}return _createClass(t,[{key:"ngAfterViewInit",value:function(){this.init()}},{key:"init",value:function(){var e=this;this._data&&this.options&&(document.querySelectorAll(".protvista").forEach((function(t){return t.setAttribute("length",e._data.construct.dna_seq.length)})),this.dnaSeq.nativeElement.data=this._data.construct.dna_seq,this.proteinSeq.nativeElement.data=t.proteinSeqProtvista(this._data.construct.protein_seq),this.tracksElem.nativeElement.data=t.getTrackView(this._data.construct.tracks),document.querySelectorAll(".score-graph").forEach((function(t,n){t.data=e.options[n].data,t.setAttribute("color",e.options[n].color)})),this.dnaSeq.nativeElement.click())}},{key:"searchMotif",value:function(t){var e=this;t&&(this.isSearching=!0,this.sqSrvc.motifInSeq(this._data.construct.dna_seq,t).pipe(Object(_.a)((function(){return e.isSearching=!1}))).subscribe((function(t){if(t.count>0){var n="";t.data.map((function(t){return n+=",".concat(t[0],":").concat(t[1])})),","===n.charAt(0)&&(n=n.substring(1)),document.querySelectorAll(".protvista").forEach((function(t){return t.fixedHighlight=n}))}else e.notify.error("No match was found")}),(function(t){return e.notify.error(t)})))}},{key:"displayAll",value:function(){this.options.map((function(t){return t.display=!0}))}},{key:"hideAll",value:function(){this.options.map((function(t){return t.display=!1}))}},{key:"move",value:function(t,e){var n=t+e;-1<n&&n<=this.options.length-1&&(this.options=U.a.array_move(Object.assign([],this.options),t,n))}},{key:"setHighlight",value:function(t){t&&document.querySelectorAll(".protvista").forEach((function(e){return e.fixedHighlight=t}))}},{key:"clearHighlight",value:function(){document.querySelectorAll(".protvista").forEach((function(t){return t.fixedHighlight=void 0}))}},{key:"setThreshold",value:function(t,e,n,i){var o=this;if(t&&n){var c=[];if(this.getByAlias(this._data.results,t).scores.map((function(t){var r="raw"===i?t.raw_score:t.norm_score;o.operatorsFn[n](e,r)&&c.push({pos:t.start,score:r})})),c.length){this.switchValues(i,t),this.getByAlias(this.options,t).cutoffs=c,document.getElementById(t).cutoffs=c.map((function(t){return t.pos}));var r=document.getElementById("cutoffRes"+t).getElementsByTagName("p")[0];r.innerHTML='<i class="filter icon"></i> '.concat(this.operators.find((function(t){return t.op===n})).desc," ").concat(e),r.style.visibility="visible"}else this.clearThreshold(t),this.notify.info(this.getByAlias(this.options,t).name+": No result was found")}}},{key:"clearThreshold",value:function(t){document.getElementById(t).cutoffs=void 0,this.getByAlias(this.options,t).cutoffs=null,this.filters=this.filters.filter((function(e){return e.key!==t})),document.getElementById("cutoffRes"+t).getElementsByTagName("p")[0].innerHTML="",document.getElementById("cutoffRes"+t).style.visibility="hidden"}},{key:"clearAllThreshold",value:function(){document.querySelectorAll(".score-graph").forEach((function(t){return t.cutoffs=void 0})),this.options.map((function(t){return t.cutoffs=null}))}},{key:"applyFilters",value:function(){var t=this;this.clearAllThreshold(),this.filters.map((function(e){e.key&&e.op&&t.setThreshold(e.key,e.value,e.op,e.type)})),this.isVisible=!1}},{key:"addFilter",value:function(){this.filters.length<this.options.length&&this.filters.push({op:this.operators[0].op,key:this.options[this.filters.length].alias,type:"raw"})}},{key:"valuesModal",value:function(t){this.modal.create({nzContent:et,nzWrapClassName:"center-modal",nzComponentParams:{values:this._data.results.find((function(e){return e.alias===t})).scores},nzFooter:null})}},{key:"thresholdModal",value:function(t){this.modal.create({nzContent:ct,nzWrapClassName:"center-modal",nzComponentParams:{values:this.options.find((function(e){return e.alias===t})).cutoffs},nzFooter:null})}},{key:"exportToExcel",value:function(t){var e=null;if(t){var n=this.getByAlias(this.options,t);e=[{name:n.name,data:n.data}]}else e=this._data.results.map((function(t){return{name:t.name,data:t.scores.map((function(t){return{position:t.start,raw_score:t.raw_score,norm_score:t.norm_score}}))}}));e?(this.fileSrvc.exportAsExcelFile(e,t||"export_all"),this.notify.success("Exported! Your download is about to start.")):this.notify.error("Unable to export.")}},{key:"changeColors",value:function(t){var e=this;t?(this.getByAlias(this.options,t).color=this.getRandomColor(),document.getElementById(t).setAttribute("color",this.getByAlias(this.options,t).color)):(this.options.forEach((function(t){return t.color=e.getRandomColor()})),document.querySelectorAll(".score-graph").forEach((function(t,n){return t.setAttribute("color",e.options[n].color)})))}},{key:"getRandomColor",value:function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}},{key:"exportThreshold",value:function(t){if(t){var e=this.filters.filter((function(e){return e.key===t}));this.export(e)}}},{key:"export",value:function(t){var e=this;this.loader.startLoading(),this.historySrvc.export(this.route.snapshot.data.history.id,{filters:t||null,bulk:this.bulk||!1}).pipe(Object(_.a)((function(){return e.loader.stopLoading()}))).subscribe((function(t){e.notify.success("Your download is about to start."),e.fileSrvc.saveFileAs(t.data,t.mimetype,t.filename)}),(function(t){return e.notify.error(t)}))}},{key:"switchValues",value:function(t,e){document.getElementById(e).data=this.getByAlias(this._data.results,e).scores.map((function(e){return{pos:e.start,score:"raw"===t?e.raw_score:e.norm_score}})),this.options.find((function(t){return t.alias===e})).type=t}},{key:"getByAlias",value:function(t,e){return t.find((function(t){return t.alias===e}))}},{key:"getByScoreType",value:function(t,e){this._data.results.find((function(e){return e.alias===t})).scores.map((function(t){return{pos:t.start,score:"raw"===e?t.raw_score:t.norm_score}}))}},{key:"data",set:function(t){var e=this;this._data=t,this.options=[],this._data.results&&this._data.construct&&this._data.results.length&&this._data.results.forEach((function(t){e.options.push({name:t.name,alias:t.alias,display:!0,data:t.scores.map((function(t){return{pos:t.start,score:t.raw_score}})),type:"raw",color:e.getRandomColor()})}))}}],[{key:"getTrackView",value:function(t){return t.map((function(t){return{accession:"XXXXX",start:t.start,end:t.end,color:t.color}}))}},{key:"proteinSeqProtvista",value:function(t){return" ".concat(t.split("").join("  ")," ")}}]),t}()).\u0275fac=function(t){return new(t||wt)(d.Sb(rt.a),d.Sb(z.b),d.Sb(c.c),d.Sb(Z.a),d.Sb(E.a),d.Sb(T.a),d.Sb(at.a))},wt.\u0275cmp=d.Mb({type:wt,selectors:[["sqy-results-viewer"]],viewQuery:function(t,e){var n;1&t&&(d.Nc(dt,!0),d.Nc(ut,!0),d.Nc(ht,!0),d.Nc(pt,!0)),2&t&&(d.zc(n=d.hc())&&(e.dnaSeq=n.first),d.zc(n=d.hc())&&(e.proteinSeq=n.first),d.zc(n=d.hc())&&(e.tracksElem=n.first),d.zc(n=d.hc())&&(e.zoomIns=n.first))},inputs:{data:"data"},decls:123,vars:19,consts:[[1,"ui","vertically","divided","grid"],[1,"equal","width","center","aligned","middle","aligned","row",2,"padding","0em"],[1,"column"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomCenter",3,"nzDropdownMenu"],[1,"dropdown","icon"],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],[1,"download","icon"],[1,"ui","icon","fluid","input",3,"ngClass"],[1,"search","icon"],["type","text","placeholder","Search for motif",3,"keyup.enter"],["nzPlaceHolder","Restriction enzyme","nzDisabled","","ngDefaultControl","","nzAllowClear","",1,"w-1-1",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"zoom","icon"],[1,"one","column","row"],[1,"column","mt-0"],["attributes","length displaystart displayend highlight"],[1,"ui","very","padded","grid","graphs"],[1,"column","mb-4"],["length","100000",1,"protvista"],["highlight-event","onmouseover","use-ctrl-to-zoom","",1,"protvista"],["dnaSeq",""],["proteinSeq",""],["shape","roundRectangle","use-ctrl-to-zoom","","highlight-event","onmouseover",1,"protvista"],["tracksView",""],[1,"ui","top","attached","menu"],[1,"item"],[3,"click"],[1,"filter","icon"],[1,"sync","icon"],[1,"right","menu"],[1,"eye","icon"],["class","column pt-5",3,"hidden",4,"ngFor","ngForOf"],["nzTitle","Threshold","nzOkText","Apply",3,"nzWidth","nzVisible","nzOkDisabled","nzVisibleChange","nzOnCancel","nzOnOk"],[1,"ui","very","padded","form"],[1,"field"],[1,"ui","header",2,"font-weight","normal"],["class","fields",4,"ngFor","ngForOf"],[1,"ui","placeholder","segment",3,"hidden"],[1,"ui","icon","header"],[1,"inbox","icon"],["type","button",1,"ui","fluid","primary","button",3,"disabled","click"],[1,"plus","icon"],[1,"field",3,"hidden"],["vsMenu","nzDropdownMenu"],[1,"ui","floating","multiple","dropdown"],[1,"scrolling","menu","transition","visible"],[1,"header"],[1,"divider"],[1,"item",3,"click"],[1,"eye","slash","icon"],["class","ant-badge ant-badge-status ant-badge-not-a-wrapper item",3,"ngClass","click",4,"ngFor","ngForOf"],["exMenu","nzDropdownMenu"],[1,"menu","transition","visible"],[1,"file","excel","outline","icon"],[1,"file","outline","icon"],[1,"description"],["hgMenu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","","nz-popover","","nzType","primary","nzPopoverTitle","Set highlight positions",3,"nzPopoverContent"],[1,"crosshairs","icon"],["nz-menu-item","",3,"click"],[1,"eraser","icon"],["contentTemplate",""],[3,"nzLabel","nzValue"],[1,"column","pt-5",3,"hidden"],[1,"ui","padded","grid"],[1,"row"],[1,"ui","horizontal","divider","header"],[1,"three","column","row","mb-3"],[1,"column","s-action"],["acMenu","nzDropdownMenu"],[1,"item",3,"ngClass","click"],[1,"up","arrow","icon"],[1,"down","arrow","icon"],["dataMenu","nzDropdownMenu"],["sExMenu","nzDropdownMenu"],[1,"dna","icon"],[1,"item",3,"ngClass"],[1,"column","txt-c",2,"visibility","hidden",3,"id"],[1,"column","right","aligned"],["nz-dropdown","","nzTrigger","click",1,"ui","dropdown",3,"nzDropdownMenu"],[1,"text"],["vlMenu","nzDropdownMenu"],[1,"check","small","icon",3,"hidden"],["height","60","use-ctrl-to-zoom","",1,"protvista","score-graph",3,"id"],[1,"fields"],[1,"required","four","wide","field","field"],["nzPlaceHolder","Graph",3,"ngModel","name","ngModelChange"],[3,"nzLabel","nzValue","nzDisabled",4,"ngFor","ngForOf"],["name","filter-type","nzPlaceHolder","Type",3,"ngModel","ngModelChange"],["nzValue","norm","nzLabel","Normalized value"],["nzValue","raw","nzLabel","Raw value"],["name","filter-operator","nzPlaceHolder","Operator",3,"ngModel","ngModelChange"],["type","number","name","filter-score","placeholder","Score",3,"ngModel","ngModelChange"],[1,"one","wide","field","txt-c"],[1,"x","red","link","large","icon",3,"click"],[3,"nzLabel","nzValue","nzDisabled"],[1,"ant-badge","ant-badge-status","ant-badge-not-a-wrapper","item",3,"ngClass","click"],[1,"ant-badge-status-dot"],[1,"ant-badge-status-text"],[3,"max","onSet"]],template:function(t,e){if(1&t&&(d.Yb(0,"div",0),d.Yb(1,"div",1),d.Yb(2,"div",2),d.Yb(3,"a",3),d.Kc(4," Highlight "),d.Tb(5,"i",4),d.Xb(),d.Xb(),d.Yb(6,"div",2),d.Yb(7,"a",5),d.Tb(8,"i",6),d.Kc(9," Export "),d.Tb(10,"i",4),d.Xb(),d.Xb(),d.Yb(11,"div",2),d.Yb(12,"div",7),d.Tb(13,"i",8),d.Yb(14,"input",9),d.gc("keyup.enter",(function(t){return e.searchMotif(t.target.value)})),d.Xb(),d.Xb(),d.Xb(),d.Yb(15,"div",2),d.Yb(16,"nz-select",10),d.gc("ngModelChange",(function(t){return e.searchMotif(t)}))("ngModelChange",(function(t){return e.enzime=t})),d.Ic(17,vt,1,2,"nz-option",11),d.Xb(),d.Xb(),d.Yb(18,"div",2),d.Yb(19,"p"),d.Tb(20,"i",12),d.Kc(21," Use "),d.Yb(22,"strong"),d.Kc(23,"Ctrl"),d.Xb(),d.Kc(24," + "),d.Yb(25,"strong"),d.Kc(26,"Scroll"),d.Xb(),d.Kc(27," to zoom. "),d.Xb(),d.Xb(),d.Xb(),d.Yb(28,"div",13),d.Yb(29,"div",14),d.Yb(30,"protvista-manager",15),d.Yb(31,"div",16),d.Yb(32,"div",13),d.Yb(33,"div",17),d.Tb(34,"protvista-navigation",18),d.Tb(35,"protvista-sequence",19,20),d.Tb(37,"protvista-sequence",19,21),d.Tb(39,"protvista-interpro-track",22,23),d.Xb(),d.Yb(41,"div",2),d.Yb(42,"div",24),d.Yb(43,"div",25),d.Yb(44,"a",26),d.gc("click",(function(t){return e.isVisible=!0})),d.Tb(45,"i",27),d.Kc(46," Threshold "),d.Xb(),d.Xb(),d.Yb(47,"div",25),d.Yb(48,"a",26),d.gc("click",(function(t){return e.changeColors()})),d.Tb(49,"i",28),d.Kc(50," Change colors "),d.Xb(),d.Xb(),d.Yb(51,"div",29),d.Yb(52,"div",25),d.Yb(53,"a",5),d.Tb(54,"i",30),d.Kc(55," Visibility "),d.Tb(56,"i",4),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Ic(57,ft,89,29,"div",31),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(58,"nz-modal",32),d.gc("nzVisibleChange",(function(t){return e.isVisible=t}))("nzOnCancel",(function(t){return e.isVisible=!1}))("nzOnOk",(function(t){return e.applyFilters()})),d.Yb(59,"form",33),d.Yb(60,"div",34),d.Yb(61,"h1",35),d.Tb(62,"i",27),d.Kc(63," Set threshold for graphs "),d.Xb(),d.Xb(),d.Ic(64,Xt,15,7,"div",36),d.Yb(65,"div",37),d.Yb(66,"div",38),d.Tb(67,"i",39),d.Kc(68," There is no threshold setted "),d.Xb(),d.Yb(69,"button",40),d.gc("click",(function(t){return e.addFilter()})),d.Tb(70,"i",41),d.Kc(71," Add threshold "),d.Xb(),d.Xb(),d.Yb(72,"div",42),d.Yb(73,"button",40),d.gc("click",(function(t){return e.addFilter()})),d.Tb(74,"i",41),d.Kc(75," Add threshold "),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(76,"nz-dropdown-menu",null,43),d.Yb(78,"div",44),d.Yb(79,"div",45),d.Yb(80,"div",46),d.Kc(81," Click to Show or Hide "),d.Xb(),d.Tb(82,"div",47),d.Yb(83,"a",48),d.gc("click",(function(t){return e.displayAll()})),d.Tb(84,"i",30),d.Kc(85," Display all "),d.Xb(),d.Yb(86,"a",48),d.gc("click",(function(t){return e.hideAll()})),d.Tb(87,"i",49),d.Kc(88," Hide all "),d.Xb(),d.Tb(89,"div",47),d.Ic(90,kt,4,6,"a",50),d.Xb(),d.Xb(),d.Xb(),d.Yb(91,"nz-dropdown-menu",null,51),d.Yb(93,"div",44),d.Yb(94,"div",52),d.Yb(95,"div",46),d.Kc(96," Download as "),d.Xb(),d.Tb(97,"div",47),d.Yb(98,"a",48),d.gc("click",(function(t){return e.exportToExcel()})),d.Tb(99,"i",53),d.Kc(100," Excel "),d.Xb(),d.Tb(101,"div",47),d.Yb(102,"div",46),d.Kc(103," GenBank "),d.Xb(),d.Yb(104,"a",48),d.gc("click",(function(t){return e.bulk=!1,e.export([])})),d.Tb(105,"i",54),d.Kc(106," Only tracks "),d.Xb(),d.Yb(107,"a",48),d.gc("click",(function(t){return e.bulk=!0,e.export([])})),d.Tb(108,"i",54),d.Kc(109," With all scores "),d.Yb(110,"div",55),d.Kc(111," (heavy) "),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(112,"nz-dropdown-menu",null,56),d.Yb(114,"ul",57),d.Yb(115,"li",58),d.Tb(116,"i",59),d.Kc(117," Set highlight "),d.Xb(),d.Yb(118,"li",60),d.gc("click",(function(t){return e.clearHighlight()})),d.Tb(119,"i",61),d.Kc(120," Clear highlight "),d.Xb(),d.Xb(),d.Xb(),d.Ic(121,Ct,1,1,"ng-template",null,62,d.Jc)),2&t){var n=d.Ac(77),i=d.Ac(92),o=d.Ac(113),c=d.Ac(122);d.Eb(3),d.sc("nzDropdownMenu",o),d.Eb(4),d.sc("nzDropdownMenu",i),d.Eb(5),d.sc("ngClass",d.wc(17,Tt,e.isSearching)),d.Eb(4),d.sc("ngModel",e.enzime),d.Eb(1),d.sc("ngForOf",e.enzimes),d.Eb(36),d.sc("nzDropdownMenu",n),d.Eb(4),d.sc("ngForOf",e.options),d.Eb(1),d.sc("nzWidth",800)("nzVisible",e.isVisible)("nzOkDisabled",e.filters.length<1),d.Eb(6),d.sc("ngForOf",e.filters),d.Eb(1),d.sc("hidden",e.filters.length),d.Eb(4),d.sc("disabled",(null==e.filters?null:e.filters.length)>=e.options.length),d.Eb(3),d.sc("hidden",!e.filters.length),d.Eb(1),d.sc("disabled",(null==e.filters?null:e.filters.length)>=e.options.length),d.Eb(17),d.sc("ngForOf",e.options),d.Eb(25),d.sc("nzPopoverContent",c)}},directives:[a.a,a.b,i.i,r.b,o.b,o.h,o.k,i.j,c.a,o.t,o.i,o.j,a.d,st.a,st.b,C,r.a,o.m,lt],styles:["a.non-active[_ngcontent-%COMP%]{color:currentColor;opacity:.5;text-decoration:none}.graphs[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{padding:0}.s-action[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 .7em}@media only screen and (min-width:1920px){.ui.dropdown[_ngcontent-%COMP%]   .scrolling.menu[_ngcontent-%COMP%], .ui.scrolling.dropdown[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{max-height:25.57142857rem}}"]}),wt);function Mt(t,e){1&t&&d.Tb(0,"sqy-history-loading")}function Et(t,e){if(1&t){var n=d.Zb();d.Yb(0,"a",66),d.gc("click",(function(t){return d.Bc(n),d.kc(2).getJob()})),d.Tb(1,"i",67),d.Kc(2," Refresh content "),d.Xb()}}var zt=function(t,e){return{background:t,"border-bottom":e}};function Kt(t,e){if(1&t){var n=d.Zb();d.Yb(0,"div",68),d.gc("mouseover",(function(t){d.Bc(n);var i=e.$implicit;return d.kc(2).trackHovered=i}))("mouseout",(function(t){return d.Bc(n),d.kc(2).trackHovered=null})),d.Yb(1,"div",69),d.Yb(2,"h4"),d.Kc(3),d.Xb(),d.Xb(),d.Tb(4,"div",70),d.Yb(5,"div",71),d.Kc(6),d.Xb(),d.Xb()}if(2&t){var i=e.$implicit,o=e.index;d.Eb(3),d.Lc(i.label),d.Eb(1),d.sc("ngStyle",d.xc(4,zt,"url("+i.glyph_thumbnail+")","1.5px solid "+i.color)),d.Fb("data-tooltip",i.name),d.Eb(2),d.Mc(" ",o+1," ")}}function Ot(t,e){1&t&&(d.Yb(0,"div",72),d.Yb(1,"div",73),d.Tb(2,"i",74),d.Kc(3," It was not possible to show you the results due to an internal problem. Please try again later or "),d.Yb(4,"a",43),d.Kc(5,"contact us"),d.Xb(),d.Kc(6,". "),d.Xb(),d.Xb()),2&t&&(d.Eb(4),d.sc("routerLink","/contact"))}function xt(t,e){if(1&t){var n=d.Zb();d.Yb(0,"div",72),d.Yb(1,"div",73),d.Tb(2,"i",75),d.Kc(3," The results are processing please be patient... "),d.Xb(),d.Yb(4,"button",76),d.gc("click",(function(t){return d.Bc(n),d.kc(2).getJob()})),d.Kc(5," Refresh "),d.Tb(6,"i",67),d.Xb(),d.Xb()}if(2&t){var i=d.kc(2);d.Eb(4),d.sc("disabled",i.isJobLoading)}}function Pt(t,e){if(1&t&&d.Tb(0,"sqy-results-viewer",77),2&t){var n=d.kc(2);d.sc("data",n.resultData)}}var St=function(t,e,n){return{"ant-badge-status-error":t,"ant-badge-status-processing":e,"ant-badge-status-success":n}},At=function(t,e){return{"check green":t,"times red":e}},qt=function(t){return{construct:t}},It=function(t){return["/editor",t]},Lt=function(t){return{"disabled loading":t}};function Bt(t,e){if(1&t){var n=d.Zb();d.Yb(0,"div",2),d.Yb(1,"div",3),d.Yb(2,"div",4),d.Yb(3,"div",5),d.Yb(4,"div",6),d.Yb(5,"div",7),d.Yb(6,"div",8),d.Yb(7,"h1",9),d.Kc(8),d.Xb(),d.Xb(),d.Yb(9,"div",10),d.Yb(10,"div",8),d.Yb(11,"span",11),d.Yb(12,"time",12),d.Kc(13),d.lc(14,"date"),d.Xb(),d.Xb(),d.Yb(15,"div",13),d.Tb(16,"span",14),d.Yb(17,"span",15),d.Kc(18),d.lc(19,"titlecase"),d.Xb(),d.Xb(),d.Xb(),d.Yb(20,"div",16),d.Ic(21,Et,3,0,"a",17),d.Yb(22,"a",18),d.gc("click",(function(t){return d.Bc(n),d.kc().deleteHistory()})),d.Tb(23,"i",19),d.Kc(24," Delete history "),d.Xb(),d.Xb(),d.Xb(),d.Yb(25,"div",20),d.Yb(26,"div",21),d.Yb(27,"div",22),d.Tb(28,"i",23),d.Yb(29,"div",24),d.Yb(30,"a",25),d.Kc(31,"Construct"),d.Xb(),d.Yb(32,"p"),d.Kc(33,"Check Construct details"),d.Xb(),d.Xb(),d.Xb(),d.Yb(34,"div",22),d.Tb(35,"i",26),d.Yb(36,"div",24),d.Yb(37,"a",27),d.Kc(38,"Plot area"),d.Xb(),d.Yb(39,"p"),d.Kc(40,"Go to results visualizator area"),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(41,"div",28),d.Yb(42,"div",29),d.Tb(43,"input",30),d.Yb(44,"button",31),d.Kc(45," Copy "),d.Tb(46,"i",32),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(47,"div",33),d.Yb(48,"div",5),d.Yb(49,"div",6),d.Yb(50,"div",34),d.Yb(51,"div",35),d.Yb(52,"div",36),d.Yb(53,"h2"),d.Kc(54,"Construct summary"),d.Xb(),d.Xb(),d.Xb(),d.Yb(55,"div",35),d.Yb(56,"div",8),d.Yb(57,"div",37),d.Yb(58,"p"),d.Kc(59),d.Xb(),d.Xb(),d.Yb(60,"div",38),d.Yb(61,"div",39),d.Yb(62,"label"),d.Kc(63,"Label:"),d.Xb(),d.Kc(64),d.Xb(),d.Yb(65,"div",39),d.Yb(66,"label"),d.Kc(67,"Number of tracks:"),d.Xb(),d.Kc(68),d.Xb(),d.Yb(69,"div",39),d.Yb(70,"label"),d.Kc(71,"Circular:"),d.Xb(),d.Tb(72,"i",40),d.Xb(),d.Yb(73,"div",39),d.Yb(74,"a",41),d.Kc(75,"See it on Sketcher "),d.Tb(76,"i",42),d.Xb(),d.Xb(),d.Yb(77,"div",39),d.Yb(78,"a",43),d.Kc(79,"See it on Vector Editor "),d.Tb(80,"i",42),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(81,"div",35),d.Yb(82,"div",8),d.Yb(83,"h4",44),d.Tb(84,"i",45),d.Kc(85," Organism "),d.Xb(),d.Xb(),d.Yb(86,"div",8),d.Yb(87,"p"),d.Kc(88,"Open on "),d.Yb(89,"a",46),d.Kc(90,"NCBI Taxonomy browser"),d.Xb(),d.Kc(91," organism info"),d.Xb(),d.Yb(92,"div",47),d.Yb(93,"div",48),d.Yb(94,"label"),d.Kc(95,"Name:"),d.Xb(),d.Yb(96,"a",46),d.Kc(97),d.Xb(),d.Xb(),d.Yb(98,"div",48),d.Yb(99,"label"),d.Kc(100,"Taxonomy ID:"),d.Xb(),d.Kc(101),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(102,"div",35),d.Yb(103,"div",8),d.Yb(104,"h4",44),d.Tb(105,"i",49),d.Kc(106," Sequence "),d.Xb(),d.Xb(),d.Yb(107,"div",8),d.Yb(108,"p"),d.Tb(109,"i",50),d.Kc(110," Click on sequence to display full content"),d.Xb(),d.Yb(111,"table",51),d.Yb(112,"tbody"),d.Yb(113,"tr"),d.Yb(114,"th"),d.Kc(115,"DNA"),d.Xb(),d.Yb(116,"td",52),d.gc("click",(function(t){d.Bc(n);var e=d.kc();return e.textModal(e.history.construct.dna_seq)})),d.Kc(117),d.Xb(),d.Yb(118,"td"),d.Yb(119,"strong"),d.Kc(120,"Total:"),d.Xb(),d.Kc(121),d.Xb(),d.Xb(),d.Yb(122,"tr"),d.Yb(123,"th"),d.Kc(124,"Protein"),d.Xb(),d.Yb(125,"td",52),d.gc("click",(function(t){d.Bc(n);var e=d.kc();return e.textModal(e.history.construct.protein_seq)})),d.Kc(126),d.Xb(),d.Yb(127,"td"),d.Yb(128,"strong"),d.Kc(129,"Total:"),d.Xb(),d.Kc(130),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(131,"div",35),d.Yb(132,"div",8),d.Yb(133,"h4",44),d.Kc(134," Tracks "),d.Xb(),d.Xb(),d.Yb(135,"div",53),d.Yb(136,"div",3),d.Yb(137,"div",54),d.Yb(138,"p"),d.Tb(139,"i",50),d.Kc(140," Hover a track to display information"),d.Xb(),d.Xb(),d.Yb(141,"div",55),d.Yb(142,"strong"),d.Kc(143,"Start:"),d.Xb(),d.Kc(144),d.Xb(),d.Yb(145,"div",55),d.Yb(146,"strong"),d.Kc(147,"End:"),d.Xb(),d.Kc(148),d.Xb(),d.Yb(149,"div",55),d.Yb(150,"strong"),d.Kc(151,"Length:"),d.Xb(),d.Kc(152),d.Xb(),d.Yb(153,"div",56),d.Yb(154,"p",57),d.Kc(155),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(156,"div",8),d.Yb(157,"div",58),d.Yb(158,"div",59),d.Ic(159,Kt,7,7,"div",60),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(160,"div",61),d.Yb(161,"div",8),d.Yb(162,"div",62),d.Yb(163,"div",35),d.Yb(164,"div",63),d.Ic(165,Ot,7,1,"div",64),d.Ic(166,xt,7,1,"div",64),d.Ic(167,Pt,1,1,"sqy-results-viewer",65),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){var i=d.kc();d.Eb(8),d.Mc(" ",i.history.name," "),d.Eb(4),d.sc("dateTime",i.history.created_at),d.Eb(1),d.Lc(d.nc(14,35,i.history.created_at,"d MMMM, YYYY hh:mm")),d.Eb(3),d.sc("ngClass",d.yc(40,St,i.history.hasFailed(),i.history.isActive(),i.history.isDone())),d.Eb(2),d.Lc(d.mc(19,38,null==i.history.job?null:i.history.job.status)),d.Eb(3),d.sc("ngIf",i.history.isActive()),d.Eb(22),d.sc("value",i.history.id),d.Eb(1),d.sc("sqy-clipboard",i.history.id),d.Eb(13),d.sc("hidden",!i.history.construct.description),d.Eb(2),d.Lc(i.history.construct.description),d.Eb(5),d.Mc(" ",i.history.construct.name," "),d.Eb(4),d.Mc(" ",i.history.construct.n_tracks," "),d.Eb(4),d.sc("ngClass",d.xc(44,At,i.history.construct.circular,!i.history.construct.circular)),d.Eb(2),d.sc("queryParams",d.wc(47,qt,i.history.construct.id)),d.Eb(4),d.sc("routerLink",d.wc(49,It,i.history.id)),d.Eb(11),d.tc("href",i.history.construct.specie.tax_link,d.Dc),d.Eb(7),d.tc("href",i.history.construct.specie.tax_link,d.Dc),d.Eb(1),d.Mc(" ",i.history.construct.specie.name," "),d.Eb(4),d.Mc(" ",i.history.construct.specie.tax_id," "),d.Eb(16),d.Mc(" ",i.history.construct.dna_seq," "),d.Eb(4),d.Mc(" ",i.history.construct.dna_seq.length," bps "),d.Eb(5),d.Mc(" ",i.history.construct.protein_seq," "),d.Eb(4),d.Mc(" ",i.history.construct.protein_seq.length," "),d.Eb(11),d.sc("hidden",!i.trackHovered),d.Eb(3),d.Mc(" ",null==i.trackHovered?null:i.trackHovered.start," "),d.Eb(1),d.sc("hidden",!i.trackHovered),d.Eb(3),d.Mc(" ",null==i.trackHovered?null:i.trackHovered.end," "),d.Eb(1),d.sc("hidden",!i.trackHovered),d.Eb(3),d.Mc(" ",null==i.trackHovered?null:i.trackHovered.sequence.length," bps "),d.Eb(3),d.Mc("",i.history.construct.n_tracks," tracks"),d.Eb(4),d.sc("ngForOf",i.history.construct.tracks),d.Eb(5),d.sc("ngClass",d.wc(51,Lt,i.isJobLoading)),d.Eb(1),d.sc("ngIf",i.history.hasFailed()),d.Eb(1),d.sc("ngIf",i.history.isActive()),d.Eb(1),d.sc("ngIf",i.history.isDone())}}var Ft,Dt,Ht=((Ft=function(){function t(e,n,i,o,c,r,a,s){_classCallCheck(this,t),this.route=e,this.router=n,this.historySrvc=i,this.jobSrvc=o,this.modal=c,this.notify=r,this.titleSrvc=a,this.navSrvc=s,this.history=null,this.isLoading=!1,this.isJobLoading=!1,this.isSearching=!1,this.msg=null,this.seq=null,this.trackHovered=null,this.attempts=0}return _createClass(t,[{key:"ngOnInit",value:function(){this.isLoading=!0,this.history=(new M.a).deserialize(this.route.snapshot.data.history),this.titleSrvc.setTitle(this.history.name),this.getJob()}},{key:"ngOnDestroy",value:function(){this.interval&&clearInterval(this.interval)}},{key:"getJob",value:function(){var t=this;this.isJobLoading=!0,this.jobSrvc.getById(this.history.job_id).pipe(Object(_.a)((function(){t.isLoading=!1,t.isJobLoading=!1}))).subscribe((function(e){t.history.job=e,t.history.isDone()?(t.interval&&clearInterval(t.interval),t.resultData={construct:t.history.construct,results:t.history.job.result}):t.history.isActive()&&(t.interval||(t.interval=setInterval((function(){return t.getJob()}),4e3),t.attempts=0),t.attempts++,t.attempts>=20&&clearInterval(t.interval))}),(function(e){return t.notify.error(e)}))}},{key:"deleteHistory",value:function(){var t=this;confirm("Are you sure?")&&(this.isLoading=!0,this.historySrvc.delete(this.history.id).pipe(Object(_.a)((function(){return t.isLoading=!1}))).subscribe((function(){t.navSrvc.updateBadge(),t.notify.success("History deleted!"),t.router.navigate(["/workspace"])}),(function(e){return t.notify.error(e||"Unable to delete history")})))}},{key:"textModal",value:function(t){this.modal.create({nzContent:N.a,nzWrapClassName:"center-modal",nzComponentParams:{txt:t},nzFooter:null})}}]),t}()).\u0275fac=function(t){return new(t||Ft)(d.Sb(T.a),d.Sb(T.c),d.Sb(E.a),d.Sb(G),d.Sb(c.c),d.Sb(z.b),d.Sb(J.a),d.Sb(K.a))},Ft.\u0275cmp=d.Mb({type:Ft,selectors:[["sqy-history"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","ui main fluid container p-4 mt-6",4,"ngIf"],[1,"ui","main","fluid","container","p-4","mt-6"],[1,"ui","grid"],["id","history",1,"row"],[1,"ui","container"],[1,"sixteen","wide","column"],[1,"ui","padded","one","column","grid"],[1,"column"],[1,"ui","header"],[1,"two","column","row"],[1,"date"],[3,"dateTime"],[1,"ant-badge","ant-badge-status","ant-badge-not-a-wrapper"],[1,"ant-badge-status-dot",3,"ngClass"],[1,"ant-badge-status-text"],[1,"column","txt-r"],["class","m-4",3,"click",4,"ngIf"],[1,"m-4","delete",3,"click"],[1,"trash","icon"],[1,"eleven","wide","column"],[1,"ui","very","relaxed","horizontal","selection","large","list"],[1,"item"],[1,"barcode","large","icon"],[1,"content"],["onclick","window.location.hash = 'construct'",1,"header"],[1,"chart","bar","outline","large","icon"],["onclick","window.location.hash = 'results'",1,"header"],[1,"five","wide","column","right","aligned"],[1,"ui","action","fluid","input"],["type","text","name","history-id",3,"value"],["type","button","name","copy",1,"ui","right","labeled","icon","primary","button",3,"sqy-clipboard"],[1,"copy","icon"],["id","construct",1,"row"],[1,"ui","padded","form","construct-summary","grid"],[1,"one","column","row"],[1,"column","txt-c"],[1,"field",3,"hidden"],[1,"four","inline","fields"],[1,"field"],[1,"circle","icon",3,"ngClass"],["routerLink","/optimize/sketcher",3,"queryParams"],[1,"external","link","icon"],[3,"routerLink"],[1,"ui","horizontal","divider","header"],[1,"bug","icon"],["target","_blank",3,"href"],[1,"two","inline","fields"],[1,"inline","field"],[1,"dna","icon"],[1,"info","icon"],[1,"ui","blue","padded","sequence","definition","table"],[1,"link",3,"click"],[1,"column",2,"min-height","18px"],[1,"four","wide","column"],[1,"three","wide","column","center","aligned",3,"hidden"],[1,"right","floated","two","wide","column","right","aligned"],[1,"meta"],[1,"construct"],[1,"strand"],["class","track",3,"mouseover","mouseout",4,"ngFor","ngForOf"],["id","results",1,"one","column","row"],[1,"ui","protvista","padded","grid"],[1,"ui","basic","segment","column",3,"ngClass"],["class","ui placeholder segment",4,"ngIf"],[3,"data",4,"ngIf"],[1,"m-4",3,"click"],[1,"sync","icon"],[1,"track",3,"mouseover","mouseout"],[1,"header"],["data-inverted","","data-position","bottom center",1,"image",3,"ngStyle"],[1,"index"],[1,"ui","placeholder","segment"],[1,"ui","icon","header"],[1,"times","circle","red","icon"],[1,"spinner","loading","icon"],["type","button","name","refresh",1,"ui","primary","right","labeled","icon","button",3,"disabled","click"],[3,"data"]],template:function(t,e){1&t&&(d.Ic(0,Mt,1,0,"sqy-history-loading",0),d.Ic(1,Bt,168,53,"div",1)),2&t&&(d.sc("ngIf",e.isLoading),d.Eb(1),d.sc("ngIf",!e.isLoading))},directives:[i.k,W,i.i,O.a,T.f,i.j,i.l,_t],pipes:[x.a,i.t],styles:["div.ui.grid.main-h[_ngcontent-%COMP%]{margin-bottom:4em}.ui.protvista[_ngcontent-%COMP%]   .ui.placeholder.segment[_ngcontent-%COMP%]{min-height:400px}a.delete[_ngcontent-%COMP%]{color:#e63757}h1.ui.header[_ngcontent-%COMP%]{font-size:2.5em;font-weight:400}.ui.horizontal.list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .ui.horizontal.list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .ui.horizontal.list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] + .content[_ngcontent-%COMP%]{display:inline!important}.protvista.actions[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit}.protvista.actions[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.icon[_ngcontent-%COMP%]{color:inherit;font-size:1.3rem}td.fitted[_ngcontent-%COMP%]{max-width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ui.horizontal.list[_ngcontent-%COMP%]:not(.celled) > .item[_ngcontent-%COMP%]{padding:.7rem 1.5rem !important!important}table.sequence[_ngcontent-%COMP%]{width:100%}table.sequence[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}table.sequence[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:90%;padding-left:.5em}table.sequence[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:10%}.construct[_ngcontent-%COMP%]{overflow-y:hidden;overflow-x:auto;width:100%;max-height:150px}.construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]{white-space:nowrap;margin:1em;height:120px}.construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]{position:relative;display:inline-block;width:150px;height:30px;-webkit-transition:all .45s;transition:all .45s;-webkit-transform-origin:center left;transform-origin:center left;cursor:pointer}.construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .index[_ngcontent-%COMP%]{position:relative;border-top:1.5px solid #ccc;margin-top:.5em;text-align:center;font-weight:700;color:#ddd}.construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:1em;width:100%;font-size:.8rem;text-align:center}.construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-weight:400;color:#888!important}.construct[_ngcontent-%COMP%]   .strand[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   div.image[_ngcontent-%COMP%]{font-size:1em!important;left:0;width:100%!important;line-height:.8em!important;height:100%!important;background-size:100%!important;background-repeat:no-repeat!important;background-position:50%!important;z-index:3}#construct[_ngcontent-%COMP%], #history[_ngcontent-%COMP%]{margin-bottom:2em}.construct-summary[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{text-align:center}"]}),Ft),jt=n("GpOm"),Vt=[{path:"",component:V},{path:n("YqVT").a.workspace.detail,component:Ht,resolve:{history:jt.a}}],Nt=((Dt=function t(){_classCallCheck(this,t)}).\u0275mod=d.Qb({type:Dt}),Dt.\u0275inj=d.Pb({factory:function(t){return new(t||Dt)},providers:[jt.a],imports:[[T.g.forChild(Vt)],T.g]}),Dt),Rt=n("PCNd");n.d(e,"WorkspaceModule",(function(){return Gt}));var $t,Gt=(($t=function t(){_classCallCheck(this,t)}).\u0275mod=d.Qb({type:$t}),$t.\u0275inj=d.Pb({factory:function(t){return new(t||$t)},imports:[[i.c,Nt,Rt.a,c.b,r.c,a.c,w,o.o]]}),$t)}}]);
//# sourceMappingURL=7-es5.a10dcf98c6862745f0b4.js.map